<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>profvis</title>
<style type="text/css">@layer htmltools {
.html-fill-container {
display: flex;
flex-direction: column;

min-height: 0;
min-width: 0;
}
.html-fill-container > .html-fill-item {

flex: 1 1 auto;
min-height: 0;
min-width: 0;
}
.html-fill-container > :not(.html-fill-item) {

flex: 0 0 auto;
}
}
</style>
<script>(function() {
  // If window.HTMLWidgets is already defined, then use it; otherwise create a
  // new object. This allows preceding code to set options that affect the
  // initialization process (though none currently exist).
  window.HTMLWidgets = window.HTMLWidgets || {};

  // See if we're running in a viewer pane. If not, we're in a web browser.
  var viewerMode = window.HTMLWidgets.viewerMode =
      /\bviewer_pane=1\b/.test(window.location);

  // See if we're running in Shiny mode. If not, it's a static document.
  // Note that static widgets can appear in both Shiny and static modes, but
  // obviously, Shiny widgets can only appear in Shiny apps/documents.
  var shinyMode = window.HTMLWidgets.shinyMode =
      typeof(window.Shiny) !== "undefined" && !!window.Shiny.outputBindings;

  // We can't count on jQuery being available, so we implement our own
  // version if necessary.
  function querySelectorAll(scope, selector) {
    if (typeof(jQuery) !== "undefined" && scope instanceof jQuery) {
      return scope.find(selector);
    }
    if (scope.querySelectorAll) {
      return scope.querySelectorAll(selector);
    }
  }

  function asArray(value) {
    if (value === null)
      return [];
    if ($.isArray(value))
      return value;
    return [value];
  }

  // Implement jQuery's extend
  function extend(target /*, ... */) {
    if (arguments.length == 1) {
      return target;
    }
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var prop in source) {
        if (source.hasOwnProperty(prop)) {
          target[prop] = source[prop];
        }
      }
    }
    return target;
  }

  // IE8 doesn't support Array.forEach.
  function forEach(values, callback, thisArg) {
    if (values.forEach) {
      values.forEach(callback, thisArg);
    } else {
      for (var i = 0; i < values.length; i++) {
        callback.call(thisArg, values[i], i, values);
      }
    }
  }

  // Replaces the specified method with the return value of funcSource.
  //
  // Note that funcSource should not BE the new method, it should be a function
  // that RETURNS the new method. funcSource receives a single argument that is
  // the overridden method, it can be called from the new method. The overridden
  // method can be called like a regular function, it has the target permanently
  // bound to it so "this" will work correctly.
  function overrideMethod(target, methodName, funcSource) {
    var superFunc = target[methodName] || function() {};
    var superFuncBound = function() {
      return superFunc.apply(target, arguments);
    };
    target[methodName] = funcSource(superFuncBound);
  }

  // Add a method to delegator that, when invoked, calls
  // delegatee.methodName. If there is no such method on
  // the delegatee, but there was one on delegator before
  // delegateMethod was called, then the original version
  // is invoked instead.
  // For example:
  //
  // var a = {
  //   method1: function() { console.log('a1'); }
  //   method2: function() { console.log('a2'); }
  // };
  // var b = {
  //   method1: function() { console.log('b1'); }
  // };
  // delegateMethod(a, b, "method1");
  // delegateMethod(a, b, "method2");
  // a.method1();
  // a.method2();
  //
  // The output would be "b1", "a2".
  function delegateMethod(delegator, delegatee, methodName) {
    var inherited = delegator[methodName];
    delegator[methodName] = function() {
      var target = delegatee;
      var method = delegatee[methodName];

      // The method doesn't exist on the delegatee. Instead,
      // call the method on the delegator, if it exists.
      if (!method) {
        target = delegator;
        method = inherited;
      }

      if (method) {
        return method.apply(target, arguments);
      }
    };
  }

  // Implement a vague facsimilie of jQuery's data method
  function elementData(el, name, value) {
    if (arguments.length == 2) {
      return el["htmlwidget_data_" + name];
    } else if (arguments.length == 3) {
      el["htmlwidget_data_" + name] = value;
      return el;
    } else {
      throw new Error("Wrong number of arguments for elementData: " +
        arguments.length);
    }
  }

  // http://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex
  function escapeRegExp(str) {
    return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
  }

  function hasClass(el, className) {
    var re = new RegExp("\\b" + escapeRegExp(className) + "\\b");
    return re.test(el.className);
  }

  // elements - array (or array-like object) of HTML elements
  // className - class name to test for
  // include - if true, only return elements with given className;
  //   if false, only return elements *without* given className
  function filterByClass(elements, className, include) {
    var results = [];
    for (var i = 0; i < elements.length; i++) {
      if (hasClass(elements[i], className) == include)
        results.push(elements[i]);
    }
    return results;
  }

  function on(obj, eventName, func) {
    if (obj.addEventListener) {
      obj.addEventListener(eventName, func, false);
    } else if (obj.attachEvent) {
      obj.attachEvent(eventName, func);
    }
  }

  function off(obj, eventName, func) {
    if (obj.removeEventListener)
      obj.removeEventListener(eventName, func, false);
    else if (obj.detachEvent) {
      obj.detachEvent(eventName, func);
    }
  }

  // Translate array of values to top/right/bottom/left, as usual with
  // the "padding" CSS property
  // https://developer.mozilla.org/en-US/docs/Web/CSS/padding
  function unpackPadding(value) {
    if (typeof(value) === "number")
      value = [value];
    if (value.length === 1) {
      return {top: value[0], right: value[0], bottom: value[0], left: value[0]};
    }
    if (value.length === 2) {
      return {top: value[0], right: value[1], bottom: value[0], left: value[1]};
    }
    if (value.length === 3) {
      return {top: value[0], right: value[1], bottom: value[2], left: value[1]};
    }
    if (value.length === 4) {
      return {top: value[0], right: value[1], bottom: value[2], left: value[3]};
    }
  }

  // Convert an unpacked padding object to a CSS value
  function paddingToCss(paddingObj) {
    return paddingObj.top + "px " + paddingObj.right + "px " + paddingObj.bottom + "px " + paddingObj.left + "px";
  }

  // Makes a number suitable for CSS
  function px(x) {
    if (typeof(x) === "number")
      return x + "px";
    else
      return x;
  }

  // Retrieves runtime widget sizing information for an element.
  // The return value is either null, or an object with fill, padding,
  // defaultWidth, defaultHeight fields.
  function sizingPolicy(el) {
    var sizingEl = document.querySelector("script[data-for='" + el.id + "'][type='application/htmlwidget-sizing']");
    if (!sizingEl)
      return null;
    var sp = JSON.parse(sizingEl.textContent || sizingEl.text || "{}");
    if (viewerMode) {
      return sp.viewer;
    } else {
      return sp.browser;
    }
  }

  // @param tasks Array of strings (or falsy value, in which case no-op).
  //   Each element must be a valid JavaScript expression that yields a
  //   function. Or, can be an array of objects with "code" and "data"
  //   properties; in this case, the "code" property should be a string
  //   of JS that's an expr that yields a function, and "data" should be
  //   an object that will be added as an additional argument when that
  //   function is called.
  // @param target The object that will be "this" for each function
  //   execution.
  // @param args Array of arguments to be passed to the functions. (The
  //   same arguments will be passed to all functions.)
  function evalAndRun(tasks, target, args) {
    if (tasks) {
      forEach(tasks, function(task) {
        var theseArgs = args;
        if (typeof(task) === "object") {
          theseArgs = theseArgs.concat([task.data]);
          task = task.code;
        }
        var taskFunc = tryEval(task);
        if (typeof(taskFunc) !== "function") {
          throw new Error("Task must be a function! Source:\n" + task);
        }
        taskFunc.apply(target, theseArgs);
      });
    }
  }

  // Attempt eval() both with and without enclosing in parentheses.
  // Note that enclosing coerces a function declaration into
  // an expression that eval() can parse
  // (otherwise, a SyntaxError is thrown)
  function tryEval(code) {
    var result = null;
    try {
      result = eval("(" + code + ")");
    } catch(error) {
      if (!(error instanceof SyntaxError)) {
        throw error;
      }
      try {
        result = eval(code);
      } catch(e) {
        if (e instanceof SyntaxError) {
          throw error;
        } else {
          throw e;
        }
      }
    }
    return result;
  }

  function initSizing(el) {
    var sizing = sizingPolicy(el);
    if (!sizing)
      return;

    var cel = document.getElementById("htmlwidget_container");
    if (!cel)
      return;

    if (typeof(sizing.padding) !== "undefined") {
      document.body.style.margin = "0";
      document.body.style.padding = paddingToCss(unpackPadding(sizing.padding));
    }

    if (sizing.fill) {
      document.body.style.overflow = "hidden";
      document.body.style.width = "100%";
      document.body.style.height = "100%";
      document.documentElement.style.width = "100%";
      document.documentElement.style.height = "100%";
      cel.style.position = "absolute";
      var pad = unpackPadding(sizing.padding);
      cel.style.top = pad.top + "px";
      cel.style.right = pad.right + "px";
      cel.style.bottom = pad.bottom + "px";
      cel.style.left = pad.left + "px";
      el.style.width = "100%";
      el.style.height = "100%";

      return {
        getWidth: function() { return cel.getBoundingClientRect().width; },
        getHeight: function() { return cel.getBoundingClientRect().height; }
      };

    } else {
      el.style.width = px(sizing.width);
      el.style.height = px(sizing.height);

      return {
        getWidth: function() { return cel.getBoundingClientRect().width; },
        getHeight: function() { return cel.getBoundingClientRect().height; }
      };
    }
  }

  // Default implementations for methods
  var defaults = {
    find: function(scope) {
      return querySelectorAll(scope, "." + this.name);
    },
    renderError: function(el, err) {
      var $el = $(el);

      this.clearError(el);

      // Add all these error classes, as Shiny does
      var errClass = "shiny-output-error";
      if (err.type !== null) {
        // use the classes of the error condition as CSS class names
        errClass = errClass + " " + $.map(asArray(err.type), function(type) {
          return errClass + "-" + type;
        }).join(" ");
      }
      errClass = errClass + " htmlwidgets-error";

      // Is el inline or block? If inline or inline-block, just display:none it
      // and add an inline error.
      var display = $el.css("display");
      $el.data("restore-display-mode", display);

      if (display === "inline" || display === "inline-block") {
        $el.hide();
        if (err.message !== "") {
          var errorSpan = $("<span>").addClass(errClass);
          errorSpan.text(err.message);
          $el.after(errorSpan);
        }
      } else if (display === "block") {
        // If block, add an error just after the el, set visibility:none on the
        // el, and position the error to be on top of the el.
        // Mark it with a unique ID and CSS class so we can remove it later.
        $el.css("visibility", "hidden");
        if (err.message !== "") {
          var errorDiv = $("<div>").addClass(errClass).css("position", "absolute")
            .css("top", el.offsetTop)
            .css("left", el.offsetLeft)
            // setting width can push out the page size, forcing otherwise
            // unnecessary scrollbars to appear and making it impossible for
            // the element to shrink; so use max-width instead
            .css("maxWidth", el.offsetWidth)
            .css("height", el.offsetHeight);
          errorDiv.text(err.message);
          $el.after(errorDiv);

          // Really dumb way to keep the size/position of the error in sync with
          // the parent element as the window is resized or whatever.
          var intId = setInterval(function() {
            if (!errorDiv[0].parentElement) {
              clearInterval(intId);
              return;
            }
            errorDiv
              .css("top", el.offsetTop)
              .css("left", el.offsetLeft)
              .css("maxWidth", el.offsetWidth)
              .css("height", el.offsetHeight);
          }, 500);
        }
      }
    },
    clearError: function(el) {
      var $el = $(el);
      var display = $el.data("restore-display-mode");
      $el.data("restore-display-mode", null);

      if (display === "inline" || display === "inline-block") {
        if (display)
          $el.css("display", display);
        $(el.nextSibling).filter(".htmlwidgets-error").remove();
      } else if (display === "block"){
        $el.css("visibility", "inherit");
        $(el.nextSibling).filter(".htmlwidgets-error").remove();
      }
    },
    sizing: {}
  };

  // Called by widget bindings to register a new type of widget. The definition
  // object can contain the following properties:
  // - name (required) - A string indicating the binding name, which will be
  //   used by default as the CSS classname to look for.
  // - initialize (optional) - A function(el) that will be called once per
  //   widget element; if a value is returned, it will be passed as the third
  //   value to renderValue.
  // - renderValue (required) - A function(el, data, initValue) that will be
  //   called with data. Static contexts will cause this to be called once per
  //   element; Shiny apps will cause this to be called multiple times per
  //   element, as the data changes.
  window.HTMLWidgets.widget = function(definition) {
    if (!definition.name) {
      throw new Error("Widget must have a name");
    }
    if (!definition.type) {
      throw new Error("Widget must have a type");
    }
    // Currently we only support output widgets
    if (definition.type !== "output") {
      throw new Error("Unrecognized widget type '" + definition.type + "'");
    }
    // TODO: Verify that .name is a valid CSS classname

    // Support new-style instance-bound definitions. Old-style class-bound
    // definitions have one widget "object" per widget per type/class of
    // widget; the renderValue and resize methods on such widget objects
    // take el and instance arguments, because the widget object can't
    // store them. New-style instance-bound definitions have one widget
    // object per widget instance; the definition that's passed in doesn't
    // provide renderValue or resize methods at all, just the single method
    //   factory(el, width, height)
    // which returns an object that has renderValue(x) and resize(w, h).
    // This enables a far more natural programming style for the widget
    // author, who can store per-instance state using either OO-style
    // instance fields or functional-style closure variables (I guess this
    // is in contrast to what can only be called C-style pseudo-OO which is
    // what we required before).
    if (definition.factory) {
      definition = createLegacyDefinitionAdapter(definition);
    }

    if (!definition.renderValue) {
      throw new Error("Widget must have a renderValue function");
    }

    // For static rendering (non-Shiny), use a simple widget registration
    // scheme. We also use this scheme for Shiny apps/documents that also
    // contain static widgets.
    window.HTMLWidgets.widgets = window.HTMLWidgets.widgets || [];
    // Merge defaults into the definition; don't mutate the original definition.
    var staticBinding = extend({}, defaults, definition);
    overrideMethod(staticBinding, "find", function(superfunc) {
      return function(scope) {
        var results = superfunc(scope);
        // Filter out Shiny outputs, we only want the static kind
        return filterByClass(results, "html-widget-output", false);
      };
    });
    window.HTMLWidgets.widgets.push(staticBinding);

    if (shinyMode) {
      // Shiny is running. Register the definition with an output binding.
      // The definition itself will not be the output binding, instead
      // we will make an output binding object that delegates to the
      // definition. This is because we foolishly used the same method
      // name (renderValue) for htmlwidgets definition and Shiny bindings
      // but they actually have quite different semantics (the Shiny
      // bindings receive data that includes lots of metadata that it
      // strips off before calling htmlwidgets renderValue). We can't
      // just ignore the difference because in some widgets it's helpful
      // to call this.renderValue() from inside of resize(), and if
      // we're not delegating, then that call will go to the Shiny
      // version instead of the htmlwidgets version.

      // Merge defaults with definition, without mutating either.
      var bindingDef = extend({}, defaults, definition);

      // This object will be our actual Shiny binding.
      var shinyBinding = new Shiny.OutputBinding();

      // With a few exceptions, we'll want to simply use the bindingDef's
      // version of methods if they are available, otherwise fall back to
      // Shiny's defaults. NOTE: If Shiny's output bindings gain additional
      // methods in the future, and we want them to be overrideable by
      // HTMLWidget binding definitions, then we'll need to add them to this
      // list.
      delegateMethod(shinyBinding, bindingDef, "getId");
      delegateMethod(shinyBinding, bindingDef, "onValueChange");
      delegateMethod(shinyBinding, bindingDef, "onValueError");
      delegateMethod(shinyBinding, bindingDef, "renderError");
      delegateMethod(shinyBinding, bindingDef, "clearError");
      delegateMethod(shinyBinding, bindingDef, "showProgress");

      // The find, renderValue, and resize are handled differently, because we
      // want to actually decorate the behavior of the bindingDef methods.

      shinyBinding.find = function(scope) {
        var results = bindingDef.find(scope);

        // Only return elements that are Shiny outputs, not static ones
        var dynamicResults = results.filter(".html-widget-output");

        // It's possible that whatever caused Shiny to think there might be
        // new dynamic outputs, also caused there to be new static outputs.
        // Since there might be lots of different htmlwidgets bindings, we
        // schedule execution for later--no need to staticRender multiple
        // times.
        if (results.length !== dynamicResults.length)
          scheduleStaticRender();

        return dynamicResults;
      };

      // Wrap renderValue to handle initialization, which unfortunately isn't
      // supported natively by Shiny at the time of this writing.

      shinyBinding.renderValue = function(el, data) {
        Shiny.renderDependencies(data.deps);
        // Resolve strings marked as javascript literals to objects
        if (!(data.evals instanceof Array)) data.evals = [data.evals];
        for (var i = 0; data.evals && i < data.evals.length; i++) {
          window.HTMLWidgets.evaluateStringMember(data.x, data.evals[i]);
        }
        if (!bindingDef.renderOnNullValue) {
          if (data.x === null) {
            el.style.visibility = "hidden";
            return;
          } else {
            el.style.visibility = "inherit";
          }
        }
        if (!elementData(el, "initialized")) {
          initSizing(el);

          elementData(el, "initialized", true);
          if (bindingDef.initialize) {
            var rect = el.getBoundingClientRect();
            var result = bindingDef.initialize(el, rect.width, rect.height);
            elementData(el, "init_result", result);
          }
        }
        bindingDef.renderValue(el, data.x, elementData(el, "init_result"));
        evalAndRun(data.jsHooks.render, elementData(el, "init_result"), [el, data.x]);
      };

      // Only override resize if bindingDef implements it
      if (bindingDef.resize) {
        shinyBinding.resize = function(el, width, height) {
          // Shiny can call resize before initialize/renderValue have been
          // called, which doesn't make sense for widgets.
          if (elementData(el, "initialized")) {
            bindingDef.resize(el, width, height, elementData(el, "init_result"));
          }
        };
      }

      Shiny.outputBindings.register(shinyBinding, bindingDef.name);
    }
  };

  var scheduleStaticRenderTimerId = null;
  function scheduleStaticRender() {
    if (!scheduleStaticRenderTimerId) {
      scheduleStaticRenderTimerId = setTimeout(function() {
        scheduleStaticRenderTimerId = null;
        window.HTMLWidgets.staticRender();
      }, 1);
    }
  }

  // Render static widgets after the document finishes loading
  // Statically render all elements that are of this widget's class
  window.HTMLWidgets.staticRender = function() {
    var bindings = window.HTMLWidgets.widgets || [];
    forEach(bindings, function(binding) {
      var matches = binding.find(document.documentElement);
      forEach(matches, function(el) {
        var sizeObj = initSizing(el, binding);

        var getSize = function(el) {
          if (sizeObj) {
            return {w: sizeObj.getWidth(), h: sizeObj.getHeight()}
          } else {
            var rect = el.getBoundingClientRect();
            return {w: rect.width, h: rect.height}
          }
        };

        if (hasClass(el, "html-widget-static-bound"))
          return;
        el.className = el.className + " html-widget-static-bound";

        var initResult;
        if (binding.initialize) {
          var size = getSize(el);
          initResult = binding.initialize(el, size.w, size.h);
          elementData(el, "init_result", initResult);
        }

        if (binding.resize) {
          var lastSize = getSize(el);
          var resizeHandler = function(e) {
            var size = getSize(el);
            if (size.w === 0 && size.h === 0)
              return;
            if (size.w === lastSize.w && size.h === lastSize.h)
              return;
            lastSize = size;
            binding.resize(el, size.w, size.h, initResult);
          };

          on(window, "resize", resizeHandler);

          // This is needed for cases where we're running in a Shiny
          // app, but the widget itself is not a Shiny output, but
          // rather a simple static widget. One example of this is
          // an rmarkdown document that has runtime:shiny and widget
          // that isn't in a render function. Shiny only knows to
          // call resize handlers for Shiny outputs, not for static
          // widgets, so we do it ourselves.
          if (window.jQuery) {
            window.jQuery(document).on(
              "shown.htmlwidgets shown.bs.tab.htmlwidgets shown.bs.collapse.htmlwidgets",
              resizeHandler
            );
            window.jQuery(document).on(
              "hidden.htmlwidgets hidden.bs.tab.htmlwidgets hidden.bs.collapse.htmlwidgets",
              resizeHandler
            );
          }

          // This is needed for the specific case of ioslides, which
          // flips slides between display:none and display:block.
          // Ideally we would not have to have ioslide-specific code
          // here, but rather have ioslides raise a generic event,
          // but the rmarkdown package just went to CRAN so the
          // window to getting that fixed may be long.
          if (window.addEventListener) {
            // It's OK to limit this to window.addEventListener
            // browsers because ioslides itself only supports
            // such browsers.
            on(document, "slideenter", resizeHandler);
            on(document, "slideleave", resizeHandler);
          }
        }

        var scriptData = document.querySelector("script[data-for='" + el.id + "'][type='application/json']");
        if (scriptData) {
          var data = JSON.parse(scriptData.textContent || scriptData.text);
          // Resolve strings marked as javascript literals to objects
          if (!(data.evals instanceof Array)) data.evals = [data.evals];
          for (var k = 0; data.evals && k < data.evals.length; k++) {
            window.HTMLWidgets.evaluateStringMember(data.x, data.evals[k]);
          }
          binding.renderValue(el, data.x, initResult);
          evalAndRun(data.jsHooks.render, initResult, [el, data.x]);
        }
      });
    });

    invokePostRenderHandlers();
  }


  function has_jQuery3() {
    if (!window.jQuery) {
      return false;
    }
    var $version = window.jQuery.fn.jquery;
    var $major_version = parseInt($version.split(".")[0]);
    return $major_version >= 3;
  }

  /*
  / Shiny 1.4 bumped jQuery from 1.x to 3.x which means jQuery's
  / on-ready handler (i.e., $(fn)) is now asyncronous (i.e., it now
  / really means $(setTimeout(fn)).
  / https://jquery.com/upgrade-guide/3.0/#breaking-change-document-ready-handlers-are-now-asynchronous
  /
  / Since Shiny uses $() to schedule initShiny, shiny>=1.4 calls initShiny
  / one tick later than it did before, which means staticRender() is
  / called renderValue() earlier than (advanced) widget authors might be expecting.
  / https://github.com/rstudio/shiny/issues/2630
  /
  / For a concrete example, leaflet has some methods (e.g., updateBounds)
  / which reference Shiny methods registered in initShiny (e.g., setInputValue).
  / Since leaflet is privy to this life-cycle, it knows to use setTimeout() to
  / delay execution of those methods (until Shiny methods are ready)
  / https://github.com/rstudio/leaflet/blob/18ec981/javascript/src/index.js#L266-L268
  /
  / Ideally widget authors wouldn't need to use this setTimeout() hack that
  / leaflet uses to call Shiny methods on a staticRender(). In the long run,
  / the logic initShiny should be broken up so that method registration happens
  / right away, but binding happens later.
  */
  function maybeStaticRenderLater() {
    if (shinyMode && has_jQuery3()) {
      window.jQuery(window.HTMLWidgets.staticRender);
    } else {
      window.HTMLWidgets.staticRender();
    }
  }

  if (document.addEventListener) {
    document.addEventListener("DOMContentLoaded", function() {
      document.removeEventListener("DOMContentLoaded", arguments.callee, false);
      maybeStaticRenderLater();
    }, false);
  } else if (document.attachEvent) {
    document.attachEvent("onreadystatechange", function() {
      if (document.readyState === "complete") {
        document.detachEvent("onreadystatechange", arguments.callee);
        maybeStaticRenderLater();
      }
    });
  }


  window.HTMLWidgets.getAttachmentUrl = function(depname, key) {
    // If no key, default to the first item
    if (typeof(key) === "undefined")
      key = 1;

    var link = document.getElementById(depname + "-" + key + "-attachment");
    if (!link) {
      throw new Error("Attachment " + depname + "/" + key + " not found in document");
    }
    return link.getAttribute("href");
  };

  window.HTMLWidgets.dataframeToD3 = function(df) {
    var names = [];
    var length;
    for (var name in df) {
        if (df.hasOwnProperty(name))
            names.push(name);
        if (typeof(df[name]) !== "object" || typeof(df[name].length) === "undefined") {
            throw new Error("All fields must be arrays");
        } else if (typeof(length) !== "undefined" && length !== df[name].length) {
            throw new Error("All fields must be arrays of the same length");
        }
        length = df[name].length;
    }
    var results = [];
    var item;
    for (var row = 0; row < length; row++) {
        item = {};
        for (var col = 0; col < names.length; col++) {
            item[names[col]] = df[names[col]][row];
        }
        results.push(item);
    }
    return results;
  };

  window.HTMLWidgets.transposeArray2D = function(array) {
      if (array.length === 0) return array;
      var newArray = array[0].map(function(col, i) {
          return array.map(function(row) {
              return row[i]
          })
      });
      return newArray;
  };
  // Split value at splitChar, but allow splitChar to be escaped
  // using escapeChar. Any other characters escaped by escapeChar
  // will be included as usual (including escapeChar itself).
  function splitWithEscape(value, splitChar, escapeChar) {
    var results = [];
    var escapeMode = false;
    var currentResult = "";
    for (var pos = 0; pos < value.length; pos++) {
      if (!escapeMode) {
        if (value[pos] === splitChar) {
          results.push(currentResult);
          currentResult = "";
        } else if (value[pos] === escapeChar) {
          escapeMode = true;
        } else {
          currentResult += value[pos];
        }
      } else {
        currentResult += value[pos];
        escapeMode = false;
      }
    }
    if (currentResult !== "") {
      results.push(currentResult);
    }
    return results;
  }
  // Function authored by Yihui/JJ Allaire
  window.HTMLWidgets.evaluateStringMember = function(o, member) {
    var parts = splitWithEscape(member, '.', '\\');
    for (var i = 0, l = parts.length; i < l; i++) {
      var part = parts[i];
      // part may be a character or 'numeric' member name
      if (o !== null && typeof o === "object" && part in o) {
        if (i == (l - 1)) { // if we are at the end of the line then evalulate
          if (typeof o[part] === "string")
            o[part] = tryEval(o[part]);
        } else { // otherwise continue to next embedded object
          o = o[part];
        }
      }
    }
  };

  // Retrieve the HTMLWidget instance (i.e. the return value of an
  // HTMLWidget binding's initialize() or factory() function)
  // associated with an element, or null if none.
  window.HTMLWidgets.getInstance = function(el) {
    return elementData(el, "init_result");
  };

  // Finds the first element in the scope that matches the selector,
  // and returns the HTMLWidget instance (i.e. the return value of
  // an HTMLWidget binding's initialize() or factory() function)
  // associated with that element, if any. If no element matches the
  // selector, or the first matching element has no HTMLWidget
  // instance associated with it, then null is returned.
  //
  // The scope argument is optional, and defaults to window.document.
  window.HTMLWidgets.find = function(scope, selector) {
    if (arguments.length == 1) {
      selector = scope;
      scope = document;
    }

    var el = scope.querySelector(selector);
    if (el === null) {
      return null;
    } else {
      return window.HTMLWidgets.getInstance(el);
    }
  };

  // Finds all elements in the scope that match the selector, and
  // returns the HTMLWidget instances (i.e. the return values of
  // an HTMLWidget binding's initialize() or factory() function)
  // associated with the elements, in an array. If elements that
  // match the selector don't have an associated HTMLWidget
  // instance, the returned array will contain nulls.
  //
  // The scope argument is optional, and defaults to window.document.
  window.HTMLWidgets.findAll = function(scope, selector) {
    if (arguments.length == 1) {
      selector = scope;
      scope = document;
    }

    var nodes = scope.querySelectorAll(selector);
    var results = [];
    for (var i = 0; i < nodes.length; i++) {
      results.push(window.HTMLWidgets.getInstance(nodes[i]));
    }
    return results;
  };

  var postRenderHandlers = [];
  function invokePostRenderHandlers() {
    while (postRenderHandlers.length) {
      var handler = postRenderHandlers.shift();
      if (handler) {
        handler();
      }
    }
  }

  // Register the given callback function to be invoked after the
  // next time static widgets are rendered.
  window.HTMLWidgets.addPostRenderHandler = function(callback) {
    postRenderHandlers.push(callback);
  };

  // Takes a new-style instance-bound definition, and returns an
  // old-style class-bound definition. This saves us from having
  // to rewrite all the logic in this file to accomodate both
  // types of definitions.
  function createLegacyDefinitionAdapter(defn) {
    var result = {
      name: defn.name,
      type: defn.type,
      initialize: function(el, width, height) {
        return defn.factory(el, width, height);
      },
      renderValue: function(el, x, instance) {
        return instance.renderValue(x);
      },
      resize: function(el, width, height, instance) {
        return instance.resize(width, height);
      }
    };

    if (defn.find)
      result.find = defn.find;
    if (defn.renderError)
      result.renderError = defn.renderError;
    if (defn.clearError)
      result.clearError = defn.clearError;

    return result;
  }
})();
</script>
<script>/*! jQuery v3.7.1 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(ie,e){"use strict";var oe=[],r=Object.getPrototypeOf,ae=oe.slice,g=oe.flat?function(e){return oe.flat.call(e)}:function(e){return oe.concat.apply([],e)},s=oe.push,se=oe.indexOf,n={},i=n.toString,ue=n.hasOwnProperty,o=ue.toString,a=o.call(Object),le={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},C=ie.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var r,i,o=(n=n||C).createElement("script");if(o.text=e,t)for(r in u)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e}var t="3.7.1",l=/HTML$/i,ce=function(e,t){return new ce.fn.init(e,t)};function c(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!v(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function fe(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}ce.fn=ce.prototype={jquery:t,constructor:ce,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ce.each(this,e)},map:function(n){return this.pushStack(ce.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:oe.sort,splice:oe.splice},ce.extend=ce.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||v(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(ce.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||ce.isPlainObject(n)?n:{},i=!1,a[t]=ce.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ce.extend({expando:"jQuery"+(t+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==i.call(e))&&(!(t=r(e))||"function"==typeof(n=ue.call(t,"constructor")&&t.constructor)&&o.call(n)===a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){m(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(c(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)while(t=e[r++])n+=ce.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(c(Object(e))?ce.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:se.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!l.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(c(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:le}),"function"==typeof Symbol&&(ce.fn[Symbol.iterator]=oe[Symbol.iterator]),ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var pe=oe.pop,de=oe.sort,he=oe.splice,ge="[\\x20\\t\\r\\n\\f]",ve=new RegExp("^"+ge+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ge+"+$","g");ce.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var f=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function p(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}ce.escapeSelector=function(e){return(e+"").replace(f,p)};var ye=C,me=s;!function(){var e,b,w,o,a,T,r,C,d,i,k=me,S=ce.expando,E=0,n=0,s=W(),c=W(),u=W(),h=W(),l=function(e,t){return e===t&&(a=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",t="(?:\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",p="\\["+ge+"*("+t+")(?:"+ge+"*([*^$|!~]?=)"+ge+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+t+"))|)"+ge+"*\\]",g=":("+t+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+p+")*)|.*)\\)|)",v=new RegExp(ge+"+","g"),y=new RegExp("^"+ge+"*,"+ge+"*"),m=new RegExp("^"+ge+"*([>+~]|"+ge+")"+ge+"*"),x=new RegExp(ge+"|>"),j=new RegExp(g),A=new RegExp("^"+t+"$"),D={ID:new RegExp("^#("+t+")"),CLASS:new RegExp("^\\.("+t+")"),TAG:new RegExp("^("+t+"|[*])"),ATTR:new RegExp("^"+p),PSEUDO:new RegExp("^"+g),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ge+"*(even|odd|(([+-]|)(\\d*)n|)"+ge+"*(?:([+-]|)"+ge+"*(\\d+)|))"+ge+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+ge+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ge+"*((?:-\\d)?\\d*)"+ge+"*\\)|)(?=[^-]|$)","i")},N=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,L=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,H=/[+~]/,O=new RegExp("\\\\[\\da-fA-F]{1,6}"+ge+"?|\\\\([^\\r\\n\\f])","g"),P=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},M=function(){V()},R=J(function(e){return!0===e.disabled&&fe(e,"fieldset")},{dir:"parentNode",next:"legend"});try{k.apply(oe=ae.call(ye.childNodes),ye.childNodes),oe[ye.childNodes.length].nodeType}catch(e){k={apply:function(e,t){me.apply(e,ae.call(t))},call:function(e){me.apply(e,ae.call(arguments,1))}}}function I(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(V(e),e=e||T,C)){if(11!==p&&(u=L.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return k.call(n,a),n}else if(f&&(a=f.getElementById(i))&&I.contains(e,a)&&a.id===i)return k.call(n,a),n}else{if(u[2])return k.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&e.getElementsByClassName)return k.apply(n,e.getElementsByClassName(i)),n}if(!(h[t+" "]||d&&d.test(t))){if(c=t,f=e,1===p&&(x.test(t)||m.test(t))){(f=H.test(t)&&U(e.parentNode)||e)==e&&le.scope||((s=e.getAttribute("id"))?s=ce.escapeSelector(s):e.setAttribute("id",s=S)),o=(l=Y(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+Q(l[o]);c=l.join(",")}try{return k.apply(n,f.querySelectorAll(c)),n}catch(e){h(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return re(t.replace(ve,"$1"),e,n,r)}function W(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function F(e){return e[S]=!0,e}function $(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function B(t){return function(e){return fe(e,"input")&&e.type===t}}function _(t){return function(e){return(fe(e,"input")||fe(e,"button"))&&e.type===t}}function z(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&R(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function X(a){return F(function(o){return o=+o,F(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function U(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function V(e){var t,n=e?e.ownerDocument||e:ye;return n!=T&&9===n.nodeType&&n.documentElement&&(r=(T=n).documentElement,C=!ce.isXMLDoc(T),i=r.matches||r.webkitMatchesSelector||r.msMatchesSelector,r.msMatchesSelector&&ye!=T&&(t=T.defaultView)&&t.top!==t&&t.addEventListener("unload",M),le.getById=$(function(e){return r.appendChild(e).id=ce.expando,!T.getElementsByName||!T.getElementsByName(ce.expando).length}),le.disconnectedMatch=$(function(e){return i.call(e,"*")}),le.scope=$(function(){return T.querySelectorAll(":scope")}),le.cssHas=$(function(){try{return T.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),le.getById?(b.filter.ID=function(e){var t=e.replace(O,P);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(O,P);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&C){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},b.find.CLASS=function(e,t){if("undefined"!=typeof t.getElementsByClassName&&C)return t.getElementsByClassName(e)},d=[],$(function(e){var t;r.appendChild(e).innerHTML="<a id='"+S+"' href='' disabled='disabled'></a><select id='"+S+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+ge+"*(?:value|"+f+")"),e.querySelectorAll("[id~="+S+"-]").length||d.push("~="),e.querySelectorAll("a#"+S+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=T.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+ge+"*name"+ge+"*="+ge+"*(?:''|\"\")")}),le.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),l=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!le.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument==ye&&I.contains(ye,e)?-1:t===T||t.ownerDocument==ye&&I.contains(ye,t)?1:o?se.call(o,e)-se.call(o,t):0:4&n?-1:1)}),T}for(e in I.matches=function(e,t){return I(e,null,null,t)},I.matchesSelector=function(e,t){if(V(e),C&&!h[t+" "]&&(!d||!d.test(t)))try{var n=i.call(e,t);if(n||le.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){h(t,!0)}return 0<I(t,T,null,[e]).length},I.contains=function(e,t){return(e.ownerDocument||e)!=T&&V(e),ce.contains(e,t)},I.attr=function(e,t){(e.ownerDocument||e)!=T&&V(e);var n=b.attrHandle[t.toLowerCase()],r=n&&ue.call(b.attrHandle,t.toLowerCase())?n(e,t,!C):void 0;return void 0!==r?r:e.getAttribute(t)},I.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ce.uniqueSort=function(e){var t,n=[],r=0,i=0;if(a=!le.sortStable,o=!le.sortStable&&ae.call(e,0),de.call(e,l),a){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)he.call(e,n[r],1)}return o=null,e},ce.fn.uniqueSort=function(){return this.pushStack(ce.uniqueSort(ae.apply(this)))},(b=ce.expr={cacheLength:50,createPseudo:F,match:D,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(O,P),e[3]=(e[3]||e[4]||e[5]||"").replace(O,P),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||I.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&I.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return D.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&j.test(n)&&(t=Y(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(O,P).toLowerCase();return"*"===e?function(){return!0}:function(e){return fe(e,t)}},CLASS:function(e){var t=s[e+" "];return t||(t=new RegExp("(^|"+ge+")"+e+"("+ge+"|$)"))&&s(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=I.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(v," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,e,t,h,g){var v="nth"!==d.slice(0,3),y="last"!==d.slice(-4),m="of-type"===e;return 1===h&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u=v!==y?"nextSibling":"previousSibling",l=e.parentNode,c=m&&e.nodeName.toLowerCase(),f=!n&&!m,p=!1;if(l){if(v){while(u){o=e;while(o=o[u])if(m?fe(o,c):1===o.nodeType)return!1;s=u="only"===d&&!s&&"nextSibling"}return!0}if(s=[y?l.firstChild:l.lastChild],y&&f){p=(a=(r=(i=l[S]||(l[S]={}))[d]||[])[0]===E&&r[1])&&r[2],o=a&&l.childNodes[a];while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if(1===o.nodeType&&++p&&o===e){i[d]=[E,a,p];break}}else if(f&&(p=a=(r=(i=e[S]||(e[S]={}))[d]||[])[0]===E&&r[1]),!1===p)while(o=++a&&o&&o[u]||(p=a=0)||s.pop())if((m?fe(o,c):1===o.nodeType)&&++p&&(f&&((i=o[S]||(o[S]={}))[d]=[E,p]),o===e))break;return(p-=g)===h||p%h==0&&0<=p/h}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||I.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?F(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=se.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:F(function(e){var r=[],i=[],s=ne(e.replace(ve,"$1"));return s[S]?F(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:F(function(t){return function(e){return 0<I(t,e).length}}),contains:F(function(t){return t=t.replace(O,P),function(e){return-1<(e.textContent||ce.text(e)).indexOf(t)}}),lang:F(function(n){return A.test(n||"")||I.error("unsupported lang: "+n),n=n.replace(O,P).toLowerCase(),function(e){var t;do{if(t=C?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=ie.location&&ie.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===function(){try{return T.activeElement}catch(e){}}()&&T.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:z(!1),disabled:z(!0),checked:function(e){return fe(e,"input")&&!!e.checked||fe(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return fe(e,"input")&&"button"===e.type||fe(e,"button")},text:function(e){var t;return fe(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:X(function(){return[0]}),last:X(function(e,t){return[t-1]}),eq:X(function(e,t,n){return[n<0?n+t:n]}),even:X(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:X(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:X(function(e,t,n){var r;for(r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:X(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=B(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=_(e);function G(){}function Y(e,t){var n,r,i,o,a,s,u,l=c[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=y.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=m.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ve," ")}),a=a.slice(n.length)),b.filter)!(r=D[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?I.error(e):c(e,s).slice(0)}function Q(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function J(a,e,t){var s=e.dir,u=e.next,l=u||s,c=t&&"parentNode"===l,f=n++;return e.first?function(e,t,n){while(e=e[s])if(1===e.nodeType||c)return a(e,t,n);return!1}:function(e,t,n){var r,i,o=[E,f];if(n){while(e=e[s])if((1===e.nodeType||c)&&a(e,t,n))return!0}else while(e=e[s])if(1===e.nodeType||c)if(i=e[S]||(e[S]={}),u&&fe(e,u))e=e[s]||e;else{if((r=i[l])&&r[0]===E&&r[1]===f)return o[2]=r[2];if((i[l]=o)[2]=a(e,t,n))return!0}return!1}}function K(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Z(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function ee(d,h,g,v,y,e){return v&&!v[S]&&(v=ee(v)),y&&!y[S]&&(y=ee(y,e)),F(function(e,t,n,r){var i,o,a,s,u=[],l=[],c=t.length,f=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)I(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),p=!d||!e&&h?f:Z(f,u,d,n,r);if(g?g(p,s=y||(e?d:c||v)?[]:t,n,r):s=p,v){i=Z(s,l),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(s[l[o]]=!(p[l[o]]=a))}if(e){if(y||d){if(y){i=[],o=s.length;while(o--)(a=s[o])&&i.push(p[o]=a);y(null,s=[],i,r)}o=s.length;while(o--)(a=s[o])&&-1<(i=y?se.call(e,a):u[o])&&(e[i]=!(t[i]=a))}}else s=Z(s===t?s.splice(c,s.length):s),y?y(null,t,s,r):k.apply(t,s)})}function te(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=J(function(e){return e===i},a,!0),l=J(function(e){return-1<se.call(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!=w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[J(K(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return ee(1<s&&K(c),1<s&&Q(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ve,"$1"),t,s<n&&te(e.slice(s,n)),n<r&&te(e=e.slice(n)),n<r&&Q(e))}c.push(t)}return K(c)}function ne(e,t){var n,v,y,m,x,r,i=[],o=[],a=u[e+" "];if(!a){t||(t=Y(e)),n=t.length;while(n--)(a=te(t[n]))[S]?i.push(a):o.push(a);(a=u(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=E+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==T||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==T||(V(o),n=!C);while(s=v[a++])if(s(o,t||T,n)){k.call(r,o);break}i&&(E=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=pe.call(r));f=Z(f)}k.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&ce.uniqueSort(r)}return i&&(E=h,w=p),c},m?F(r):r))).selector=e}return a}function re(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&Y(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&C&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(O,P),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=D.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(O,P),H.test(o[0].type)&&U(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&Q(o)))return k.apply(n,r),n;break}}}return(l||ne(e,c))(r,t,!C,n,!t||H.test(e)&&U(t.parentNode)||t),n}G.prototype=b.filters=b.pseudos,b.setFilters=new G,le.sortStable=S.split("").sort(l).join("")===S,V(),le.sortDetached=$(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),ce.find=I,ce.expr[":"]=ce.expr.pseudos,ce.unique=ce.uniqueSort,I.compile=ne,I.select=re,I.setDocument=V,I.tokenize=Y,I.escape=ce.escapeSelector,I.getText=ce.text,I.isXML=ce.isXMLDoc,I.selectors=ce.expr,I.support=ce.support,I.uniqueSort=ce.uniqueSort}();var d=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&ce(e).is(n))break;r.push(e)}return r},h=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},b=ce.expr.match.needsContext,w=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(e,n,r){return v(n)?ce.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?ce.grep(e,function(e){return e===n!==r}):"string"!=typeof n?ce.grep(e,function(e){return-1<se.call(n,e)!==r}):ce.filter(n,e,r)}ce.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},ce.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;t<r;t++)if(ce.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)ce.find(e,i[t],n);return 1<r?ce.uniqueSort(n):n},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&b.test(e)?ce(e):e||[],!1).length}});var k,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ce.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||k,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ce?t[0]:t,ce.merge(this,ce.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),w.test(r[1])&&ce.isPlainObject(t))for(r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=C.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(ce):ce.makeArray(e,this)}).prototype=ce.fn,k=ce(C);var E=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){while((e=e[t])&&1!==e.nodeType);return e}ce.fn.extend({has:function(e){var t=ce(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ce.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&ce(e);if(!b.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&ce.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?ce.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?se.call(ce(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t,n){return d(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return d(e,"nextSibling")},prevAll:function(e){return d(e,"previousSibling")},nextUntil:function(e,t,n){return d(e,"nextSibling",n)},prevUntil:function(e,t,n){return d(e,"previousSibling",n)},siblings:function(e){return h((e.parentNode||{}).firstChild,e)},children:function(e){return h(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(fe(e,"template")&&(e=e.content||e),ce.merge([],e.childNodes))}},function(r,i){ce.fn[r]=function(e,t){var n=ce.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=ce.filter(t,n)),1<this.length&&(j[r]||ce.uniqueSort(n),E.test(r)&&n.reverse()),this.pushStack(n)}});var D=/[^\x20\t\r\n\f]+/g;function N(e){return e}function q(e){throw e}function L(e,t,n,r){var i;try{e&&v(i=e.promise)?i.call(e).done(t).fail(n):e&&v(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}ce.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},ce.each(e.match(D)||[],function(e,t){n[t]=!0}),n):ce.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){ce.each(e,function(e,t){v(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==x(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return ce.each(arguments,function(e,t){var n;while(-1<(n=ce.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<ce.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ce.extend({Deferred:function(e){var o=[["notify","progress",ce.Callbacks("memory"),ce.Callbacks("memory"),2],["resolve","done",ce.Callbacks("once memory"),ce.Callbacks("once memory"),0,"resolved"],["reject","fail",ce.Callbacks("once memory"),ce.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return ce.Deferred(function(r){ce.each(o,function(e,t){var n=v(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,l(u,o,N,s),l(u,o,q,s)):(u++,t.call(e,l(u,o,N,s),l(u,o,q,s),l(u,o,N,o.notifyWith))):(a!==N&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(e,t.error),u<=i+1&&(a!==q&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(ce.Deferred.getErrorHook?t.error=ce.Deferred.getErrorHook():ce.Deferred.getStackHook&&(t.error=ce.Deferred.getStackHook()),ie.setTimeout(t))}}return ce.Deferred(function(e){o[0][3].add(l(0,e,v(r)?r:N,e.notifyWith)),o[1][3].add(l(0,e,v(t)?t:N)),o[2][3].add(l(0,e,v(n)?n:q))}).promise()},promise:function(e){return null!=e?ce.extend(e,a):a}},s={};return ce.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=ae.call(arguments),o=ce.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?ae.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(L(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||v(i[t]&&i[t].then)))return o.then();while(t--)L(i[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(e,t){ie.console&&ie.console.warn&&e&&H.test(e.name)&&ie.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ce.readyException=function(e){ie.setTimeout(function(){throw e})};var O=ce.Deferred();function P(){C.removeEventListener("DOMContentLoaded",P),ie.removeEventListener("load",P),ce.ready()}ce.fn.ready=function(e){return O.then(e)["catch"](function(e){ce.readyException(e)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ce.readyWait:ce.isReady)||(ce.isReady=!0)!==e&&0<--ce.readyWait||O.resolveWith(C,[ce])}}),ce.ready.then=O.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?ie.setTimeout(ce.ready):(C.addEventListener("DOMContentLoaded",P),ie.addEventListener("load",P));var M=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n))for(s in i=!0,n)M(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,v(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ce(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},R=/^-ms-/,I=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function F(e){return e.replace(R,"ms-").replace(I,W)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function B(){this.expando=ce.expando+B.uid++}B.uid=1,B.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[F(t)]=n;else for(r in t)i[F(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][F(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(F):(t=F(t))in r?[t]:t.match(D)||[]).length;while(n--)delete r[t[n]]}(void 0===t||ce.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ce.isEmptyObject(t)}};var _=new B,z=new B,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/[A-Z]/g;function V(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(U,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:X.test(i)?JSON.parse(i):i)}catch(e){}z.set(e,t,n)}else n=void 0;return n}ce.extend({hasData:function(e){return z.hasData(e)||_.hasData(e)},data:function(e,t,n){return z.access(e,t,n)},removeData:function(e,t){z.remove(e,t)},_data:function(e,t,n){return _.access(e,t,n)},_removeData:function(e,t){_.remove(e,t)}}),ce.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=z.get(o),1===o.nodeType&&!_.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=F(r.slice(5)),V(o,r,i[r]));_.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){z.set(this,n)}):M(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=z.get(o,n))?t:void 0!==(t=V(o,n))?t:void 0;this.each(function(){z.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){z.remove(this,e)})}}),ce.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=_.get(e,t),n&&(!r||Array.isArray(n)?r=_.access(e,t,ce.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){ce.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _.get(e,n)||_.access(e,n,{empty:ce.Callbacks("once memory").add(function(){_.remove(e,[t+"queue",n])})})}}),ce.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ce.queue(this[0],t):void 0===n?this:this.each(function(){var e=ce.queue(this,t,n);ce._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ce.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=_.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Y=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),Q=["Top","Right","Bottom","Left"],J=C.documentElement,K=function(e){return ce.contains(e.ownerDocument,e)},Z={composed:!0};J.getRootNode&&(K=function(e){return ce.contains(e.ownerDocument,e)||e.getRootNode(Z)===e.ownerDocument});var ee=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&K(e)&&"none"===ce.css(e,"display")};function te(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return ce.css(e,t,"")},u=s(),l=n&&n[3]||(ce.cssNumber[t]?"":"px"),c=e.nodeType&&(ce.cssNumber[t]||"px"!==l&&+u)&&Y.exec(ce.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)ce.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,ce.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ne={};function re(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=_.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ee(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ne[s])||(o=a.body.appendChild(a.createElement(s)),u=ce.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ne[s]=u)))):"none"!==n&&(l[c]="none",_.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}ce.fn.extend({show:function(){return re(this,!0)},hide:function(){return re(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ee(this)?ce(this).show():ce(this).hide()})}});var xe,be,we=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;xe=C.createDocumentFragment().appendChild(C.createElement("div")),(be=C.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),xe.appendChild(be),le.checkClone=xe.cloneNode(!0).cloneNode(!0).lastChild.checked,xe.innerHTML="<textarea>x</textarea>",le.noCloneChecked=!!xe.cloneNode(!0).lastChild.defaultValue,xe.innerHTML="<option></option>",le.option=!!xe.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Se(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&fe(e,t)?ce.merge([e],n):n}function Ee(e,t){for(var n=0,r=e.length;n<r;n++)_.set(e[n],"globalEval",!t||_.get(t[n],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,le.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var je=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))ce.merge(p,o.nodeType?[o]:o);else if(je.test(o)){a=a||f.appendChild(t.createElement("div")),s=(Te.exec(o)||["",""])[1].toLowerCase(),u=ke[s]||ke._default,a.innerHTML=u[1]+ce.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;ce.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<ce.inArray(o,r))i&&i.push(o);else if(l=K(o),a=Se(f.appendChild(o),"script"),l&&Ee(a),n){c=0;while(o=a[c++])Ce.test(o.type||"")&&n.push(o)}return f}var De=/^([^.]*)(?:\.(.+)|)/;function Ne(){return!0}function qe(){return!1}function Le(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=qe;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return ce().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ce.guid++)),e.each(function(){ce.event.add(this,t,i,r,n)})}function He(e,r,t){t?(_.set(e,r,!1),ce.event.add(e,r,{namespace:!1,handler:function(e){var t,n=_.get(this,r);if(1&e.isTrigger&&this[r]){if(n)(ce.event.special[r]||{}).delegateType&&e.stopPropagation();else if(n=ae.call(arguments),_.set(this,r,n),this[r](),t=_.get(this,r),_.set(this,r,!1),n!==t)return e.stopImmediatePropagation(),e.preventDefault(),t}else n&&(_.set(this,r,ce.event.trigger(n[0],n.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Ne)}})):void 0===_.get(e,r)&&ce.event.add(e,r,Ne)}ce.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.get(t);if($(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&ce.find.matchesSelector(J,i),n.guid||(n.guid=ce.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof ce&&ce.event.triggered!==e.type?ce.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(D)||[""]).length;while(l--)d=g=(s=De.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=ce.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ce.event.special[d]||{},c=ce.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ce.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),ce.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=_.hasData(e)&&_.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(D)||[""]).length;while(l--)if(d=g=(s=De.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=ce.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||ce.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(u)&&_.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=ce.event.fix(e),l=(_.get(this,"events")||Object.create(null))[u.type]||[],c=ce.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=ce.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((ce.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<ce(i,this).index(l):ce.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(ce.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ce.expando]?e:new ce.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&fe(t,"input")&&He(t,"click"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&fe(t,"input")&&_.get(t,"click")||fe(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ce.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ce.Event=function(e,t){if(!(this instanceof ce.Event))return new ce.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ne:qe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:qe,isPropagationStopped:qe,isImmediatePropagationStopped:qe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ne,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ne,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ne,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:"focusin",blur:"focusout"},function(r,i){function o(e){if(C.documentMode){var t=_.get(this,"handle"),n=ce.event.fix(e);n.type="focusin"===e.type?"focus":"blur",n.isSimulated=!0,t(e),n.target===n.currentTarget&&t(n)}else ce.event.simulate(i,e.target,ce.event.fix(e))}ce.event.special[r]={setup:function(){var e;if(He(this,r,!0),!C.documentMode)return!1;(e=_.get(this,i))||this.addEventListener(i,o),_.set(this,i,(e||0)+1)},trigger:function(){return He(this,r),!0},teardown:function(){var e;if(!C.documentMode)return!1;(e=_.get(this,i)-1)?_.set(this,i,e):(this.removeEventListener(i,o),_.remove(this,i))},_default:function(e){return _.get(e.target,r)},delegateType:i},ce.event.special[i]={setup:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i);n||(C.documentMode?this.addEventListener(i,o):e.addEventListener(r,o,!0)),_.set(t,i,(n||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=C.documentMode?this:e,n=_.get(t,i)-1;n?_.set(t,i,n):(C.documentMode?this.removeEventListener(i,o):e.removeEventListener(r,o,!0),_.remove(t,i))}}}),ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){ce.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||ce.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ce.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ce(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=qe),this.each(function(){ce.event.remove(this,e,n,t)})}});var Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return fe(e,"table")&&fe(11!==t.nodeType?t:t.firstChild,"tr")&&ce(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(_.hasData(e)&&(s=_.get(e).events))for(i in _.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)ce.event.add(t,i,s[i][n]);z.hasData(e)&&(o=z.access(e),a=ce.extend({},o),z.set(t,a))}}function $e(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=v(d);if(h||1<f&&"string"==typeof d&&!le.checkClone&&Pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),$e(t,r,i,o)});if(f&&(t=(e=Ae(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=ce.map(Se(e,"script"),Ie)).length;c<f;c++)u=e,c!==p&&(u=ce.clone(u,!0,!0),s&&ce.merge(a,Se(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,ce.map(a,We),c=0;c<s;c++)u=a[c],Ce.test(u.type||"")&&!_.access(u,"globalEval")&&ce.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?ce._evalUrl&&!u.noModule&&ce._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):m(u.textContent.replace(Me,""),u,l))}return n}function Be(e,t,n){for(var r,i=t?ce.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ce.cleanData(Se(r)),r.parentNode&&(n&&K(r)&&Ee(Se(r,"script")),r.parentNode.removeChild(r));return e}ce.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=K(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(a=Se(c),r=0,i=(o=Se(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&we.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||Se(e),a=a||Se(c),r=0,i=o.length;r<i;r++)Fe(o[r],a[r]);else Fe(e,c);return 0<(a=Se(c,"script")).length&&Ee(a,!f&&Se(e,"script")),c},cleanData:function(e){for(var t,n,r,i=ce.event.special,o=0;void 0!==(n=e[o]);o++)if($(n)){if(t=n[_.expando]){if(t.events)for(r in t.events)i[r]?ce.event.remove(n,r):ce.removeEvent(n,r,t.handle);n[_.expando]=void 0}n[z.expando]&&(n[z.expando]=void 0)}}}),ce.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return M(this,function(e){return void 0===e?ce.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return $e(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return $e(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $e(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ce.cleanData(Se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!ke[(Te.exec(e)||["",""])[1].toLowerCase()]){e=ce.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ce.cleanData(Se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return $e(this,arguments,function(e){var t=this.parentNode;ce.inArray(this,n)<0&&(ce.cleanData(Se(this)),t&&t.replaceChild(e,this))},n)}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){ce.fn[e]=function(e){for(var t,n=[],r=ce(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),ce(r[o])[a](t),s.apply(n,t.get());return this.pushStack(n)}});var _e=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),ze=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=ie),t.getComputedStyle(e)},Ue=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ve=new RegExp(Q.join("|"),"i");function Ge(e,t,n){var r,i,o,a,s=ze.test(t),u=e.style;return(n=n||Xe(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(ve,"$1")||void 0),""!==a||K(e)||(a=ce.style(e,t)),!le.pixelBoxStyles()&&_e.test(a)&&Ve.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Ye(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",J.appendChild(u).appendChild(l);var e=ie.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),J.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=C.createElement("div"),l=C.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",le.clearCloneStyle="content-box"===l.style.backgroundClip,ce.extend(le,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=C.createElement("table"),t=C.createElement("tr"),n=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",J.appendChild(e).appendChild(t).appendChild(n),r=ie.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,J.removeChild(e)),a}}))}();var Qe=["Webkit","Moz","ms"],Je=C.createElement("div").style,Ke={};function Ze(e){var t=ce.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--)if((e=Qe[n]+t)in Je)return e}(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=Y.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function it(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=ce.css(e,n+Q[a],!0,i)),r?("content"===n&&(u-=ce.css(e,"padding"+Q[a],!0,i)),"margin"!==n&&(u-=ce.css(e,"border"+Q[a]+"Width",!0,i))):(u+=ce.css(e,"padding"+Q[a],!0,i),"padding"!==n?u+=ce.css(e,"border"+Q[a]+"Width",!0,i):s+=ce.css(e,"border"+Q[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ot(e,t,n){var r=Xe(e),i=(!le.boxSizingReliable()||n)&&"border-box"===ce.css(e,"boxSizing",!1,r),o=i,a=Ge(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(_e.test(a)){if(!n)return a;a="auto"}return(!le.boxSizingReliable()&&i||!le.reliableTrDimensions()&&fe(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===ce.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===ce.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(i?"border":"content"),o,r,a)+"px"}function at(e,t,n,r,i){return new at.prototype.init(e,t,n,r,i)}ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=F(t),u=ze.test(t),l=e.style;if(u||(t=Ze(s)),a=ce.cssHooks[t]||ce.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=Y.exec(n))&&i[1]&&(n=te(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(ce.cssNumber[s]?"":"px")),le.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=F(t);return ze.test(t)||(t=Ze(s)),(a=ce.cssHooks[t]||ce.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ge(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ce.each(["height","width"],function(e,u){ce.cssHooks[u]={get:function(e,t,n){if(t)return!et.test(ce.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ot(e,u,n):Ue(e,tt,function(){return ot(e,u,n)})},set:function(e,t,n){var r,i=Xe(e),o=!le.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===ce.css(e,"boxSizing",!1,i),s=n?it(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-it(e,u,"border",!1,i)-.5)),s&&(r=Y.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=ce.css(e,u)),rt(0,t,s)}}}),ce.cssHooks.marginLeft=Ye(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ce.each({margin:"",padding:"",border:"Width"},function(i,o){ce.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+Q[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(ce.cssHooks[i+o].set=rt)}),ce.fn.extend({css:function(e,t){return M(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=ce.css(e,t[a],!1,r);return o}return void 0!==n?ce.style(e,t,n):ce.css(e,t)},e,t,1<arguments.length)}}),((ce.Tween=at).prototype={constructor:at,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ce.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,n=at.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):at.propHooks._default.set(this),this}}).init.prototype=at.prototype,(at.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ce.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):1!==e.elem.nodeType||!ce.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:ce.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=at.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ce.fx=at.prototype.init,ce.fx.step={};var st,ut,lt,ct,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function dt(){ut&&(!1===C.hidden&&ie.requestAnimationFrame?ie.requestAnimationFrame(dt):ie.setTimeout(dt,ce.fx.interval),ce.fx.tick())}function ht(){return ie.setTimeout(function(){st=void 0}),st=Date.now()}function gt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Q[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function yt(o,e,t){var n,a,r=0,i=yt.prefilters.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=st||ht(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},t),originalProperties:e,originalOptions:t,startTime:st||ht(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ce.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=F(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ce.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=yt.prefilters[r].call(l,o,c,l.opts))return v(n.stop)&&(ce._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return ce.map(c,vt,l),v(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ce.fx.timer(ce.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}ce.Animation=ce.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return te(n.elem,e,Y.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ee(e),v=_.get(e,"fxshow");for(r in n.queue||(null==(a=ce._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ce.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||ce.style(e,r)}if((u=!ce.isEmptyObject(t))||!ce.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=_.get(e,"display")),"none"===(c=ce.css(e,"display"))&&(l?c=l:(re([e],!0),l=e.style.display||l,c=ce.css(e,"display"),re([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===ce.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=_.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&re([e],!0),p.done(function(){for(r in g||re([e]),_.remove(e,"fxshow"),d)ce.style(e,r,d[r])})),u=vt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),ce.speed=function(e,t,n){var r=e&&"object"==typeof e?ce.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return ce.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in ce.fx.speeds?r.duration=ce.fx.speeds[r.duration]:r.duration=ce.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ee).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ce.isEmptyObject(t),o=ce.speed(e,n,r),a=function(){var e=yt(this,ce.extend({},t),o);(i||_.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=ce.timers,r=_.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ce.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=_.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=ce.timers,o=n?n.length:0;for(t.finish=!0,ce.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),ce.each(["toggle","show","hide"],function(e,r){var i=ce.fn[r];ce.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),ce.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){ce.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ce.timers=[],ce.fx.tick=function(){var e,t=0,n=ce.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ce.fx.stop(),st=void 0},ce.fx.timer=function(e){ce.timers.push(e),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){ut||(ut=!0,dt())},ce.fx.stop=function(){ut=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(r,e){return r=ce.fx&&ce.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=ie.setTimeout(e,r);t.stop=function(){ie.clearTimeout(n)}})},lt=C.createElement("input"),ct=C.createElement("select").appendChild(C.createElement("option")),lt.type="checkbox",le.checkOn=""!==lt.value,le.optSelected=ct.selected,(lt=C.createElement("input")).value="t",lt.type="radio",le.radioValue="t"===lt.value;var mt,xt=ce.expr.attrHandle;ce.fn.extend({attr:function(e,t){return M(this,ce.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})}}),ce.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ce.prop(e,t,n):(1===o&&ce.isXMLDoc(e)||(i=ce.attrHooks[t.toLowerCase()]||(ce.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void ce.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=ce.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&"radio"===t&&fe(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?ce.removeAttr(e,n):e.setAttribute(n,n),n}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,t){var a=xt[t]||ce.find.attr;xt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=xt[o],xt[o]=r,r=null!=a(e,t,n)?o:null,xt[o]=i),r}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;function Tt(e){return(e.match(D)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}ce.fn.extend({prop:function(e,t){return M(this,ce.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ce.propFix[e]||e]})}}),ce.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ce.isXMLDoc(e)||(t=ce.propFix[t]||t,i=ce.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),le.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).addClass(t.call(this,e,Ct(this)))}):(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this},removeClass:function(t){var e,n,r,i,o,a;return v(t)?this.each(function(e){ce(this).removeClass(t.call(this,e,Ct(this)))}):arguments.length?(e=kt(t)).length?this.each(function(){if(r=Ct(this),n=1===this.nodeType&&" "+Tt(r)+" "){for(o=0;o<e.length;o++){i=e[o];while(-1<n.indexOf(" "+i+" "))n=n.replace(" "+i+" "," ")}a=Tt(n),r!==a&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(t,n){var e,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return v(t)?this.each(function(e){ce(this).toggleClass(t.call(this,e,Ct(this),n),n)}):"boolean"==typeof n&&s?n?this.addClass(t):this.removeClass(t):(e=kt(t),this.each(function(){if(s)for(o=ce(this),i=0;i<e.length;i++)r=e[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=Ct(this))&&_.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":_.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+Tt(Ct(n))+" ").indexOf(t))return!0;return!1}});var St=/\r/g;ce.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=v(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,ce(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ce.map(t,function(e){return null==e?"":e+""})),(r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=ce.valHooks[t.type]||ce.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(St,""):null==e?"":e:void 0}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:Tt(ce.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!fe(n.parentNode,"optgroup"))){if(t=ce(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=ce.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<ce.inArray(ce.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ce.inArray(ce(e).val(),t)}},le.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Et=ie.location,jt={guid:Date.now()},At=/\?/;ce.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new ie.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||ce.error("Invalid XML: "+(n?ce.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Dt=/^(?:focusinfocus|focusoutblur)$/,Nt=function(e){e.stopPropagation()};ce.extend(ce.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||C],d=ue.call(e,"type")?e.type:e,h=ue.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||C,3!==n.nodeType&&8!==n.nodeType&&!Dt.test(d+ce.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[ce.expando]?e:new ce.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:ce.makeArray(t,[e]),c=ce.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!y(n)){for(s=c.delegateType||d,Dt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||C)&&p.push(a.defaultView||a.parentWindow||ie)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(_.get(o,"events")||Object.create(null))[e.type]&&_.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&$(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!$(n)||u&&v(n[d])&&!y(n)&&((a=n[u])&&(n[u]=null),ce.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Nt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Nt),ce.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=ce.extend(new ce.Event,n,{type:e,isSimulated:!0});ce.event.trigger(r,null,t)}}),ce.fn.extend({trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ce.event.trigger(e,t,n,!0)}});var qt=/\[\]$/,Lt=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;function Pt(n,e,r,i){var t;if(Array.isArray(e))ce.each(e,function(e,t){r||qt.test(n)?i(n,t):Pt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==x(e))i(n,e);else for(t in e)Pt(n+"["+t+"]",e[t],r,i)}ce.param=function(e,t){var n,r=[],i=function(e,t){var n=v(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join("&")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&Ot.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:Array.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}}):{name:t.name,value:n.replace(Lt,"\r\n")}}).get()}});var Mt=/%20/g,Rt=/#.*$/,It=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,$t=/^\/\//,Bt={},_t={},zt="*/".concat("*"),Xt=C.createElement("a");function Ut(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(D)||[];if(v(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Vt(t,i,o,a){var s={},u=t===_t;function l(e){var r;return s[e]=!0,ce.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Gt(e,t){var n,r,i=ce.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ce.extend(!0,e,r),e}Xt.href=Et.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,ce.ajaxSettings),t):Gt(ce.ajaxSettings,e)},ajaxPrefilter:Ut(Bt),ajaxTransport:Ut(_t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=ce.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?ce(y):ce.event,x=ce.Deferred(),b=ce.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Wt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace($t,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(D)||[""],null==v.crossDomain){r=C.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Xt.protocol+"//"+Xt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=ce.param(v.data,v.traditional)),Vt(Bt,v,t,T),h)return T;for(i in(g=ce.event&&v.global)&&0==ce.active++&&ce.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ft.test(v.type),f=v.url.replace(Rt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Mt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(At.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(It,"$1"),o=(At.test(f)?"&":"?")+"_="+jt.guid+++o),v.url=f+o),v.ifModified&&(ce.lastModified[f]&&T.setRequestHeader("If-Modified-Since",ce.lastModified[f]),ce.etag[f]&&T.setRequestHeader("If-None-Match",ce.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+zt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Vt(_t,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=ie.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&ie.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<ce.inArray("script",v.dataTypes)&&ce.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(ce.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(ce.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--ce.active||ce.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return ce.get(e,t,n,"json")},getScript:function(e,t){return ce.get(e,void 0,t,"script")}}),ce.each(["get","post"],function(e,i){ce[i]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),ce.ajax(ce.extend({url:e,type:i,dataType:r,data:t,success:n},ce.isPlainObject(e)&&e))}}),ce.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),ce._evalUrl=function(e,t,n){return ce.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){ce.globalEval(e,t,n)}})},ce.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=ce(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){ce(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ce(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){ce(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(e){return!ce.expr.pseudos.visible(e)},ce.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Qt=ce.ajaxSettings.xhr();le.cors=!!Qt&&"withCredentials"in Qt,le.ajax=Qt=!!Qt,ce.ajaxTransport(function(i){var o,a;if(le.cors||Qt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Yt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&ie.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),ce.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ce.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=ce("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(r[0])},abort:function(){i&&i()}}});var Jt,Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||ce.expando+"_"+jt.guid++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Zt,"$1"+r):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ce.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=ie[r],ie[r]=function(){o=arguments},n.always(function(){void 0===i?ce(ie).removeProp(r):ie[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(r)),o&&v(i)&&i(o[0]),o=i=void 0}),"script"}),le.createHTMLDocument=((Jt=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Jt.childNodes.length),ce.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((r=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(r)):t=C),o=!n&&[],(i=w.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,o),o&&o.length&&ce(o).remove(),ce.merge([],i.childNodes)));var r,i,o},ce.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=Tt(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&ce.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?ce("<div>").append(ce.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ce.expr.pseudos.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length},ce.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=ce.css(e,"position"),c=ce(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=ce.css(e,"top"),u=ce.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),v(t)&&(t=t.call(e,n,ce.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},ce.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===ce.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===ce.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=ce(e).offset()).top+=ce.css(e,"borderTopWidth",!0),i.left+=ce.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-ce.css(r,"marginTop",!0),left:t.left-i.left-ce.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===ce.css(e,"position"))e=e.offsetParent;return e||J})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;ce.fn[t]=function(e){return M(this,function(e,t,n){var r;if(y(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),ce.each(["top","left"],function(e,n){ce.cssHooks[n]=Ye(le.pixelPosition,function(e,t){if(t)return t=Ge(e,n),_e.test(t)?ce(e).position()[n]+"px":t})}),ce.each({Height:"height",Width:"width"},function(a,s){ce.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){ce.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return M(this,function(e,t,n){var r;return y(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?ce.css(e,t,i):ce.style(e,t,n,i)},s,n?e:void 0,n)}})}),ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),ce.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){ce.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ce.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return r=ae.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(ae.call(arguments)))}).guid=e.guid=e.guid||ce.guid++,i},ce.holdReady=function(e){e?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=fe,ce.isFunction=v,ce.isWindow=y,ce.camelCase=F,ce.type=x,ce.now=Date.now,ce.isNumeric=function(e){var t=ce.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},ce.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce});var tn=ie.jQuery,nn=ie.$;return ce.noConflict=function(e){return ie.$===ce&&(ie.$=nn),e&&ie.jQuery===ce&&(ie.jQuery=tn),ce},"undefined"==typeof e&&(ie.jQuery=ie.$=ce),ce});
</script>
<script>!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function r(n){return null===n?0/0:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function o(n){return n.length}function a(n){for(var t=1;n*t%1;)t*=10;return t}function c(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function l(){this._=Object.create(null)}function s(n){return(n+="")===pa||n[0]===va?va+n:n}function f(n){return(n+="")[0]===va?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=da.length;r>e;++e){var u=da[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new l;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){ta.event.preventDefault()}function k(){for(var n,t=ta.event;n=t.sourceEvent;)t=n;return t}function E(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=ta.event;u.target=n,ta.event=u,t[u.type].apply(e,r)}finally{ta.event=i}}},t}function A(n){return ya(n,_a),n}function N(n){return"function"==typeof n?n:function(){return Ma(n,this)}}function C(n){return"function"==typeof n?n:function(){return xa(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ta.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function q(n){return n.trim().replace(/\s+/g," ")}function L(n){return new RegExp("(?:^|\\s+)"+ta.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=T(n).map(D);var u=n.length;return"function"==typeof t?r:e}function D(n){var t=L(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",q(u+" "+n))):e.setAttribute("class",q(u.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=ta.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return ba(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function Z(n){return ya(n,Sa),n}function V(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function X(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,ra(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+ta.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=$;a>0&&(n=n.slice(0,a));var l=ka.get(n);return l&&(n=l,c=B),a?t?u:r:t?b:i}function $(n,t){return function(e){var r=ta.event;ta.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ta.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Aa,u="click"+r,i=ta.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ea&&(Ea="onselectstart"in e?!1:x(e.style,"userSelect")),Ea){var o=n(e).style,a=o[Ea];o[Ea]="none"}return function(n){if(i.on(r,null),Ea&&(o[Ea]=a),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(0>Na){var i=t(n);if(i.scrollX||i.scrollY){r=ta.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Na=!(o.f||o.e),r.remove()}}return Na?(u.x=e.pageX,u.y=e.pageY):(u.x=e.clientX,u.y=e.clientY),u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}function G(){return ta.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nt(n){return n>1?0:-1>n?qa:Math.acos(n)}function tt(n){return n>1?Ra:-1>n?-Ra:Math.asin(n)}function et(n){return((n=Math.exp(n))-1/n)/2}function rt(n){return((n=Math.exp(n))+1/n)/2}function ut(n){return((n=Math.exp(2*n))-1)/(n+1)}function it(n){return(n=Math.sin(n/2))*n}function ot(){}function at(n,t,e){return this instanceof at?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof at?new at(n.h,n.s,n.l):bt(""+n,_t,at):new at(n,t,e)}function ct(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new mt(u(n+120),u(n),u(n-120))}function lt(n,t,e){return this instanceof lt?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof lt?new lt(n.h,n.c,n.l):n instanceof ft?gt(n.l,n.a,n.b):gt((n=wt((n=ta.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new lt(n,t,e)}function st(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new ft(e,Math.cos(n*=Da)*t,Math.sin(n)*t)}function ft(n,t,e){return this instanceof ft?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof ft?new ft(n.l,n.a,n.b):n instanceof lt?st(n.h,n.c,n.l):wt((n=mt(n)).r,n.g,n.b):new ft(n,t,e)}function ht(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=pt(u)*Xa,r=pt(r)*$a,i=pt(i)*Ba,new mt(dt(3.2404542*u-1.5371385*r-.4985314*i),dt(-.969266*u+1.8760108*r+.041556*i),dt(.0556434*u-.2040259*r+1.0572252*i))}function gt(n,t,e){return n>0?new lt(Math.atan2(e,t)*Pa,Math.sqrt(t*t+e*e),n):new lt(0/0,0/0,n)}function pt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function vt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function dt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mt(n,t,e){return this instanceof mt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mt?new mt(n.r,n.g,n.b):bt(""+n,mt,ct):new mt(n,t,e)}function yt(n){return new mt(n>>16,n>>8&255,255&n)}function Mt(n){return yt(n)+""}function xt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function bt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(kt(u[0]),kt(u[1]),kt(u[2]))}return(i=Ga.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function _t(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),new at(r,u,c)}function wt(n,t,e){n=St(n),t=St(t),e=St(e);var r=vt((.4124564*n+.3575761*t+.1804375*e)/Xa),u=vt((.2126729*n+.7151522*t+.072175*e)/$a),i=vt((.0193339*n+.119192*t+.9503041*e)/Ba);return ft(116*u-16,500*(r-u),200*(u-i))}function St(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function kt(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function Et(n){return"function"==typeof n?n:function(){return n}}function At(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Nt(t,e,n,r)}}function Nt(n,t,e,r){function u(){var n,t=c.status;if(!t&&zt(c)||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return void o.error.call(i,r)}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=ta.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=ta.event;ta.event=n;try{o.progress.call(i,c)}finally{ta.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(l=n,i):l},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ra(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var s in a)c.setRequestHeader(s,a[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},ta.rebind(i,o,"on"),null==r?i:i.get(Ct(r))}function Ct(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function zt(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qt(){var n=Lt(),t=Tt()-n;t>24?(isFinite(t)&&(clearTimeout(tc),tc=setTimeout(qt,t)),nc=0):(nc=1,rc(qt))}function Lt(){var n=Date.now();for(ec=Ka;ec;)n>=ec.t&&(ec.f=ec.c(n-ec.t)),ec=ec.n;return n}function Tt(){for(var n,t=Ka,e=1/0;t;)t.f?t=n?n.n=t.n:Ka=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Qa=n,e}function Rt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Dt(n,t){var e=Math.pow(10,3*ga(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Pt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],o=0,a=r[0],c=0;u>0&&a>0&&(c+a+1>t&&(a=Math.max(1,t-c)),i.push(n.substring(u-=a,u+a)),!((c+=a+1)>t));)a=r[o=(o+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=ic.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",c=e[4]||"",l=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=oc.get(g)||Ut;var M=l&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>p){var c=ta.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!l&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===o?u+n+k:">"===o?k+u+n:"^"===o?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function Ut(n){return n+""}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new cc(e-1)),1),e}function i(n,e){return t(n=new cc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{cc=jt;var r=new jt;return r._=n,o(r,t,e)}finally{cc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ht(n);return c.floor=c,c.round=Ht(r),c.ceil=Ht(u),c.offset=Ht(i),c.range=a,n}function Ht(n){return function(t,e){try{cc=jt;var r=new jt;return r._=t,n(r,e)._}finally{cc=Date}}}function Ot(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(c,a)),null!=(u=sc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=N[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.slice(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&cc!==jt,o=new(i?jt:cc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,l=e.length;c>a;){if(r>=l)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=C[o in sc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.slice(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,N.c.toString(),t,r)}function c(n,t,r){return e(n,N.x.toString(),t,r)}function l(n,t,r){return e(n,N.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{cc=jt;var t=new cc;return t._=n,r(t)}finally{cc=Date}}var r=t(n);return e.parse=function(n){try{cc=jt;var t=r.parse(n);return t&&t._}finally{cc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ae;var M=ta.map(),x=Yt(v),b=Zt(v),_=Yt(d),w=Zt(d),S=Yt(m),k=Zt(m),E=Yt(y),A=Zt(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var N={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return It(n.getDate(),t,2)},e:function(n,t){return It(n.getDate(),t,2)},H:function(n,t){return It(n.getHours(),t,2)},I:function(n,t){return It(n.getHours()%12||12,t,2)},j:function(n,t){return It(1+ac.dayOfYear(n),t,3)},L:function(n,t){return It(n.getMilliseconds(),t,3)},m:function(n,t){return It(n.getMonth()+1,t,2)},M:function(n,t){return It(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return It(n.getSeconds(),t,2)},U:function(n,t){return It(ac.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return It(ac.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return It(n.getFullYear()%100,t,2)},Y:function(n,t){return It(n.getFullYear()%1e4,t,4)},Z:ie,"%":function(){return"%"}},C={a:r,A:u,b:i,B:o,c:a,d:Qt,e:Qt,H:te,I:te,j:ne,L:ue,m:Kt,M:ee,p:s,S:re,U:Xt,w:Vt,W:$t,x:c,X:l,y:Wt,Y:Bt,Z:Jt,"%":oe};return t}function It(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Yt(n){return new RegExp("^(?:"+n.map(ta.requote).join("|")+")","i")}function Zt(n){for(var t=new l,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Vt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Xt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function $t(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Bt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Wt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.y=Gt(+r[0]),e+r[0].length):-1}function Jt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Gt(n){return n+(n>68?1900:2e3)}function Kt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Qt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ne(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function te(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ee(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function re(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ue(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ie(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=ga(t)/60|0,u=ga(t)%60;return e+It(r,"0",2)+It(u,"0",2)}function oe(n,t,e){hc.lastIndex=0;var r=hc.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ae(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ce(){}function le(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function se(n,t){n&&dc.hasOwnProperty(n.type)&&dc[n.type](n,t)}function fe(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)fe(n[e],t,1);t.polygonEnd()}function ge(){function n(n,t){n*=Da,t=t*Da/2+qa/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),l=Math.sin(t),s=i*l,f=u*c+s*Math.cos(a),h=s*o*Math.sin(a);yc.add(Math.atan2(h,f)),r=n,u=c,i=l}var t,e,r,u,i;Mc.point=function(o,a){Mc.point=n,r=(t=o)*Da,u=Math.cos(a=(e=a)*Da/2+qa/4),i=Math.sin(a)},Mc.lineEnd=function(){n(t,e)}}function pe(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ve(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function de(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function me(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ye(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Me(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function xe(n){return[Math.atan2(n[1],n[0]),tt(n[2])]}function be(n,t){return ga(n[0]-t[0])<Ca&&ga(n[1]-t[1])<Ca}function _e(n,t){n*=Da;var e=Math.cos(t*=Da);we(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function we(n,t,e){++xc,_c+=(n-_c)/xc,wc+=(t-wc)/xc,Sc+=(e-Sc)/xc}function Se(){function n(n,u){n*=Da;var i=Math.cos(u*=Da),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);bc+=l,kc+=l*(t+(t=o)),Ec+=l*(e+(e=a)),Ac+=l*(r+(r=c)),we(t,e,r)}var t,e,r;qc.point=function(u,i){u*=Da;var o=Math.cos(i*=Da);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),qc.point=n,we(t,e,r)}}function ke(){qc.point=_e}function Ee(){function n(n,t){n*=Da;var e=Math.cos(t*=Da),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=u*c-i*a,s=i*o-r*c,f=r*a-u*o,h=Math.sqrt(l*l+s*s+f*f),g=r*o+u*a+i*c,p=h&&-nt(g)/h,v=Math.atan2(h,g);Nc+=p*l,Cc+=p*s,zc+=p*f,bc+=v,kc+=v*(r+(r=o)),Ec+=v*(u+(u=a)),Ac+=v*(i+(i=c)),we(r,u,i)}var t,e,r,u,i;qc.point=function(o,a){t=o,e=a,qc.point=n,o*=Da;var c=Math.cos(a*=Da);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),we(r,u,i)},qc.lineEnd=function(){n(t,e),qc.lineEnd=ke,qc.point=_e}}function Ae(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ne(){return!0}function Ce(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(be(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return void u.lineEnd()}var c=new qe(e,n,null,!0),l=new qe(e,null,c,!1);c.o=l,i.push(c),o.push(l),c=new qe(r,n,null,!1),l=new qe(r,null,c,!0),c.o=l,i.push(c),o.push(l)}}),o.sort(t),ze(i),ze(o),i.length){for(var a=0,c=e,l=o.length;l>a;++a)o[a].e=c=!c;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,l=s.length;l>a;++a)u.point((f=s[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var a=s.length-1;a>=0;--a)u.point((f=s[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function ze(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function qe(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Le(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function l(){y.point=o,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Te))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,g=ta.merge(g);var n=Fe(m,p);g.length?(b||(i.polygonStart(),b=!0),Ce(g,De,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Re(),x=t(M),b=!1;return y}}function Te(n){return n.length>1}function Re(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function De(n,t){return((n=n.x)[0]<0?n[1]-Ra-Ca:Ra-n[1])-((t=t.x)[0]<0?t[1]-Ra-Ca:Ra-t[1])}function Pe(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?qa:-qa,c=ga(i-e);ga(c-qa)<Ca?(n.point(e,r=(r+o)/2>0?Ra:-Ra),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=qa&&(ga(e-u)<Ca&&(e-=u*Ca),ga(i-a)<Ca&&(i-=a*Ca),r=Ue(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function Ue(n,t,e,r){var u,i,o=Math.sin(n-e);return ga(o)>Ca?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function je(n,t,e,r){var u;if(null==n)u=e*Ra,r.point(-qa,u),r.point(0,u),r.point(qa,u),r.point(qa,0),r.point(qa,-u),r.point(0,-u),r.point(-qa,-u),r.point(-qa,0),r.point(-qa,u);else if(ga(n[0]-t[0])>Ca){var i=n[0]<t[0]?qa:-qa;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function Fe(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;yc.reset();for(var a=0,c=t.length;c>a;++a){var l=t[a],s=l.length;if(s)for(var f=l[0],h=f[0],g=f[1]/2+qa/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=l[d];var m=n[0],y=n[1]/2+qa/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>qa,k=p*M;if(yc.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*La:b,S^h>=e^m>=e){var E=de(pe(f),pe(n));Me(E);var A=de(u,E);Me(A);var N=(S^b>=0?-1:1)*tt(A[2]);(r>N||r===N&&(E[0]||E[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Ca>i||Ca>i&&0>yc)^1&o}function He(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?qa:-qa),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(be(e,g)||be(p,g))&&(p[0]+=Ca,p[1]+=Ca,v=t(p[0],p[1]))),v!==c)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(s=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&be(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return s|(l&&c)<<1}}}function r(n,t,e){var r=pe(n),u=pe(t),o=[1,0,0],a=de(r,u),c=ve(a,a),l=a[0],s=c-l*l;if(!s)return!e&&n;var f=i*c/s,h=-i*l/s,g=de(o,a),p=ye(o,f),v=ye(a,h);me(p,v);var d=g,m=ve(p,d),y=ve(d,d),M=m*m-y*(ve(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=ye(d,(-m-x)/y);if(me(b,p),b=xe(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(_=w,w=S,S=_);var A=S-w,N=ga(A-qa)<Ca,C=N||Ca>A;if(!N&&k>E&&(_=k,k=E,E=_),C?N?k+E>0^b[1]<(ga(b[0]-w)<Ca?k:E):k<=b[1]&&b[1]<=E:A>qa^(w<=b[0]&&b[0]<=S)){var z=ye(d,(-m+x)/y);return me(z,p),[b,xe(z)]}}}function u(t,e){var r=o?n:qa-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=ga(i)>Ca,c=gr(n,6*Da);return Le(t,e,c,o?[0,-n]:[-qa,n-qa])}function Oe(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,l=o.y,s=a.x,f=a.y,h=0,g=1,p=s-c,v=f-l;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-l,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-l,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:l+h*v}),1>g&&(u.b={x:c+g*p,y:l+g*v}),u}}}}}}function Ie(n,t,e,r){function u(r,u){return ga(r[0]-n)<Ca?u>0?0:3:ga(r[0]-e)<Ca?u>0?2:1:ga(r[1]-t)<Ca?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,l=a[0];c>o;++o)i=a[o],l[1]<=r?i[1]>r&&Q(l,i,n)>0&&++t:i[1]<=r&&Q(l,i,n)<0&&--t,l=i;return 0!==t}function l(i,a,c,l){var s=0,f=0;if(null==i||(s=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do l.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+c+4)%4)!==f)}else l.point(a[0],a[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&a.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=0/0}function g(){v&&(p(y,M),x&&w&&A.rejoin(),v.push(A.buffer())),C.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Tc,Math.min(Tc,n)),t=Math.max(-Tc,Math.min(Tc,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};N(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,E=a,A=Re(),N=Oe(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=ta.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),u&&Ce(v,i,t,l,a),a.polygonEnd()),v=d=m=null}};return C}}function Ye(n){var t=0,e=qa/3,r=ir(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*qa/180,e=n[1]*qa/180):[t/qa*180,e/qa*180]},u}function Ze(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,tt((i-(n*n+e*e)*u*u)/(2*u))]},e}function Ve(){function n(n,t){Dc+=u*n-r*t,r=n,u=t}var t,e,r,u;Hc.point=function(i,o){Hc.point=n,t=r=i,e=u=o},Hc.lineEnd=function(){n(t,e)}}function Xe(n,t){Pc>n&&(Pc=n),n>jc&&(jc=n),Uc>t&&(Uc=t),t>Fc&&(Fc=t)}function $e(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=Be(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Be(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Be(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function We(n,t){_c+=n,wc+=t,++Sc}function Je(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);kc+=o*(t+n)/2,Ec+=o*(e+r)/2,Ac+=o,We(t=n,e=r)}var t,e;Ic.point=function(r,u){Ic.point=n,We(t=r,e=u)}}function Ge(){Ic.point=We}function Ke(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);kc+=o*(r+n)/2,Ec+=o*(u+t)/2,Ac+=o,o=u*n-r*t,Nc+=o*(r+n),Cc+=o*(u+t),zc+=3*o,We(r=n,u=t)}var t,e,r,u;Ic.point=function(i,o){Ic.point=n,We(t=r=i,e=u=o)},Ic.lineEnd=function(){n(t,e)}}function Qe(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,La)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:b};return a}function nr(n){function t(n){return(a?r:e)(n)}function e(t){return rr(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=0/0,S.point=i,t.lineStart()}function i(e,r){var i=pe([e,r]),o=n(e,r);u(M,x,y,b,_,w,M=o[0],x=o[1],y=e,b=i[0],_=i[1],w=i[2],a,t),t.point(M,x)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=l,S.lineEnd=s}function l(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c
},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,l,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=a+g,_=c+p,w=l+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),E=ga(ga(w)-1)<Ca||ga(r-h)<Ca?(r+h)/2:Math.atan2(_,b),A=n(E,k),N=A[0],C=A[1],z=N-t,q=C-e,L=M*z-y*q;(L*L/x>i||ga((y*z+M*q)/x-.5)>.3||o>a*g+c*p+l*v)&&(u(t,e,r,a,c,l,N,C,E,b/=S,_/=S,w,d,m),m.point(N,C),u(N,C,E,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*Da),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function tr(n){var t=nr(function(t,e){return n([t*Pa,e*Pa])});return function(n){return or(t(n))}}function er(n){this.stream=n}function rr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ur(n){return ir(function(){return n})()}function ir(n){function t(n){return n=a(n[0]*Da,n[1]*Da),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Pa,n[1]*Pa]}function r(){a=Ae(o=lr(m,M,x),i);var n=i(v,d);return c=g-n[0]*h,l=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,o,a,c,l,s,f=nr(function(n,t){return n=i(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,M=0,x=0,b=Lc,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),s=or(b(o,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Lc):He((w=+n)*Da),u()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Ie(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Da,d=n[1]%360*Da,r()):[v*Pa,d*Pa]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Da,M=n[1]%360*Da,x=n.length>2?n[2]%360*Da:0,r()):[m*Pa,M*Pa,x*Pa]},ta.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function or(n){return rr(n,function(t,e){n.point(t*Da,e*Da)})}function ar(n,t){return[n,t]}function cr(n,t){return[n>qa?n-La:-qa>n?n+La:n,t]}function lr(n,t,e){return n?t||e?Ae(fr(n),hr(t,e)):fr(n):t||e?hr(t,e):cr}function sr(n){return function(t,e){return t+=n,[t>qa?t-La:-qa>t?t+La:t,e]}}function fr(n){var t=sr(n);return t.invert=sr(-n),t}function hr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*r+a*u;return[Math.atan2(c*i-s*o,a*r-l*u),tt(s*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*i-c*o;return[Math.atan2(c*i+l*o,a*r+s*u),tt(s*r-a*u)]},e}function gr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=pr(e,u),i=pr(e,i),(o>0?i>u:u>i)&&(u+=o*La)):(u=n+o*La,i=n-.5*c);for(var l,s=u;o>0?s>i:i>s;s-=c)a.point((l=xe([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],l[1])}}function pr(n,t){var e=pe(t);e[0]-=n,Me(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ca)%(2*Math.PI)}function vr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function dr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function mr(n){return n.source}function yr(n){return n.target}function Mr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),l=u*Math.sin(n),s=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(it(r-t)+u*o*it(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*s,u=e*l+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Pa,Math.atan2(o,Math.sqrt(r*r+u*u))*Pa]}:function(){return[n*Pa,t*Pa]};return p.distance=h,p}function xr(){function n(n,u){var i=Math.sin(u*=Da),o=Math.cos(u),a=ga((n*=Da)-t),c=Math.cos(a);Yc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Zc.point=function(u,i){t=u*Da,e=Math.sin(i*=Da),r=Math.cos(i),Zc.point=n},Zc.lineEnd=function(){Zc.point=Zc.lineEnd=b}}function br(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function _r(n,t){function e(n,t){o>0?-Ra+Ca>t&&(t=-Ra+Ca):t>Ra-Ca&&(t=Ra-Ca);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(qa/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ra]},e):Sr}function wr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return ga(u)<Ca?ar:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Sr(n,t){return[n,Math.log(Math.tan(qa/4+t/2))]}function kr(n){var t,e=ur(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=qa*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Er(n,t){return[Math.log(Math.tan(qa/4+t/2)),-n]}function Ar(n){return n[0]}function Nr(n){return n[1]}function Cr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function zr(n,t){return n[0]-t[0]||n[1]-t[1]}function qr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Lr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],l=e[1],s=t[1]-c,f=r[1]-l,h=(a*(c-l)-f*(u-i))/(f*o-a*s);return[u+h*o,c+h*s]}function Tr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Rr(){tu(this),this.edge=this.site=this.circle=null}function Dr(n){var t=el.pop()||new Rr;return t.site=n,t}function Pr(n){Xr(n),Qc.remove(n),el.push(n),tu(n)}function Ur(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Pr(n);for(var c=i;c.circle&&ga(e-c.circle.x)<Ca&&ga(r-c.circle.cy)<Ca;)i=c.P,a.unshift(c),Pr(c),c=i;a.unshift(c),Xr(c);for(var l=o;l.circle&&ga(e-l.circle.x)<Ca&&ga(r-l.circle.cy)<Ca;)o=l.N,a.push(l),Pr(l),l=o;a.push(l),Xr(l);var s,f=a.length;for(s=1;f>s;++s)l=a[s],c=a[s-1],Kr(l.edge,c.site,l.site,u);c=a[0],l=a[f-1],l.edge=Jr(c.site,l.site,null,u),Vr(c),Vr(l)}function jr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Qc._;a;)if(r=Fr(a,o)-i,r>Ca)a=a.L;else{if(u=i-Hr(a,o),!(u>Ca)){r>-Ca?(t=a.P,e=a):u>-Ca?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Dr(n);if(Qc.insert(t,c),t||e){if(t===e)return Xr(t),e=Dr(t.site),Qc.insert(c,e),c.edge=e.edge=Jr(t.site,c.site),Vr(t),void Vr(e);if(!e)return void(c.edge=Jr(t.site,c.site));Xr(t),Xr(e);var l=t.site,s=l.x,f=l.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};Kr(e.edge,l,p,x),c.edge=Jr(l,n,null,x),e.edge=Jr(n,p,null,x),Vr(t),Vr(e)}}function Fr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var s=a-r,f=1/i-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+u-i/2)))/f+r:(r+a)/2}function Hr(n,t){var e=n.N;if(e)return Fr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Or(n){this.site=n,this.edges=[]}function Ir(n){for(var t,e,r,u,i,o,a,c,l,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Kc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)s=a[o].end(),r=s.x,u=s.y,l=a[++o%c].start(),t=l.x,e=l.y,(ga(r-t)>Ca||ga(u-e)>Ca)&&(a.splice(o,0,new Qr(Gr(i.site,s,ga(r-f)<Ca&&p-u>Ca?{x:f,y:ga(t-f)<Ca?e:p}:ga(u-p)<Ca&&h-r>Ca?{x:ga(e-p)<Ca?t:h,y:p}:ga(r-h)<Ca&&u-g>Ca?{x:h,y:ga(t-h)<Ca?e:g}:ga(u-g)<Ca&&r-f>Ca?{x:ga(e-g)<Ca?t:f,y:g}:null),i.site,null)),++c)}function Yr(n,t){return t.angle-n.angle}function Zr(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,l=r.y-a,s=i.x-o,f=i.y-a,h=2*(c*f-l*s);if(!(h>=-za)){var g=c*c+l*l,p=s*s+f*f,v=(f*g-l*p)/h,d=(c*p-s*g)/h,f=d+a,m=rl.pop()||new Zr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=tl._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}tl.insert(y,m),y||(nl=m)}}}}function Xr(n){var t=n.circle;t&&(t.P||(nl=t.N),tl.remove(t),rl.push(t),tu(t),n.circle=null)}function $r(n){for(var t,e=Gc,r=Oe(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Br(t,n)||!r(t)||ga(t.a.x-t.b.x)<Ca&&ga(t.a.y-t.b.y)<Ca)&&(t.a=t.b=null,e.splice(u,1))}function Br(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=l)return}else i={x:d,y:c};e={x:d,y:l}}else{if(i){if(i.y<c)return}else i={x:d,y:l};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else{if(i){if(i.y<c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Wr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Jr(n,t,e,r){var u=new Wr(n,t);return Gc.push(u),e&&Kr(u,n,t,e),r&&Kr(u,t,n,r),Kc[n.i].edges.push(new Qr(u,n,t)),Kc[t.i].edges.push(new Qr(u,t,n)),u}function Gr(n,t,e){var r=new Wr(n,null);return r.a=t,r.b=e,Gc.push(r),r}function Kr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Qr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nu(){this._=null}function tu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ru(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function uu(n){for(;n.L;)n=n.L;return n}function iu(n,t){var e,r,u,i=n.sort(ou).pop();for(Gc=[],Kc=new Array(n.length),Qc=new nu,tl=new nu;;)if(u=nl,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Kc[i.i]=new Or(i),jr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Ur(u.arc)}t&&($r(t),Ir(t));var o={cells:Kc,edges:Gc};return Qc=tl=Gc=Kc=null,o}function ou(n,t){return t.y-n.y||t.x-n.x}function au(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function cu(n){return n.x}function lu(n){return n.y}function su(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&fu(n,c[0],e,r,o,a),c[1]&&fu(n,c[1],o,r,u,a),c[2]&&fu(n,c[2],e,a,o,i),c[3]&&fu(n,c[3],o,a,u,i)}}function hu(n,t,e,r,u,i,o){var a,c=1/0;return function l(n,s,f,h,g){if(!(s>i||f>o||r>h||u>g)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(c>m){var y=Math.sqrt(c=m);r=t-y,u=e-y,i=t+y,o=e+y,a=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:l(n,s,f,x,b);break;case 1:l(n,x,f,h,b);break;case 2:l(n,s,b,x,g);break;case 3:l(n,x,b,h,g)}}}(n,r,u,i,o),a}function gu(n,t){n=ta.rgb(n),t=ta.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+xt(Math.round(e+i*n))+xt(Math.round(r+o*n))+xt(Math.round(u+a*n))}}function pu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=mu(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function vu(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function du(n,t){var e,r,u,i=il.lastIndex=ol.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=il.exec(n))&&(r=ol.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:vu(e,r)})),i=ol.lastIndex;return i<t.length&&(u=t.slice(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function mu(n,t){for(var e,r=ta.interpolators.length;--r>=0&&!(e=ta.interpolators[r](n,t)););return e}function yu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(mu(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function Mu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function xu(n){return function(t){return 1-n(1-t)}}function bu(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function _u(n){return n*n}function wu(n){return n*n*n}function Su(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function ku(n){return function(t){return Math.pow(t,n)}}function Eu(n){return 1-Math.cos(n*Ra)}function Au(n){return Math.pow(2,10*(n-1))}function Nu(n){return 1-Math.sqrt(1-n*n)}function Cu(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/La*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*La/t)}}function zu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function qu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Lu(n,t){n=ta.hcl(n),t=ta.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return st(e+i*n,r+o*n,u+a*n)+""}}function Tu(n,t){n=ta.hsl(n),t=ta.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ct(e+i*n,r+o*n,u+a*n)+""}}function Ru(n,t){n=ta.lab(n),t=ta.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ht(e+i*n,r+o*n,u+a*n)+""}}function Du(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Pu(n){var t=[n.a,n.b],e=[n.c,n.d],r=ju(t),u=Uu(t,e),i=ju(Fu(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Pa,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Pa:0}function Uu(n,t){return n[0]*t[0]+n[1]*t[1]}function ju(n){var t=Math.sqrt(Uu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Fu(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Hu(n,t){var e,r=[],u=[],i=ta.transform(n),o=ta.transform(t),a=i.translate,c=o.translate,l=i.rotate,s=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:vu(a[0],c[0])},{i:3,x:vu(a[1],c[1])})):r.push(c[0]||c[1]?"translate("+c+")":""),l!=s?(l-s>180?s+=360:s-l>180&&(l+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:vu(l,s)})):s&&r.push(r.pop()+"rotate("+s+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:vu(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:vu(g[0],p[0])},{i:e-2,x:vu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Ou(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Iu(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Yu(n){for(var t=n.source,e=n.target,r=Vu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Zu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Vu(n,t){if(n===t)return n;for(var e=Zu(n),r=Zu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Xu(n){n.fixed|=2}function $u(n){n.fixed&=-7}function Bu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Wu(n){n.fixed&=-5}function Ju(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Ju(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,u+=l*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Gu(n,t){return ta.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=ri,n}function Ku(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function Qu(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function ni(n){return n.children}function ti(n){return n.value}function ei(n,t){return t.value-n.value}function ri(n){return ta.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ui(n){return n.x}function ii(n){return n.y}function oi(n,t,e){n.y0=t,n.y=e}function ai(n){return ta.range(n.length)}function ci(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function li(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function si(n){return n.reduce(fi,0)}function fi(n,t){return n+t[1]}function hi(n,t){return gi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function gi(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function pi(n){return[ta.min(n),ta.max(n)]}function vi(n,t){return n.value-t.value}function di(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function mi(n,t){n._pack_next=t,t._pack_prev=n}function yi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Mi(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(l=e.length)){var e,r,u,i,o,a,c,l,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(xi),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(u=e[1],u.x=u.r,u.y=0,t(u),l>2))for(i=e[2],wi(r,u,i),t(i),di(r,i),r._pack_prev=i,di(i,u),u=r._pack_next,o=3;l>o;o++){wi(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(yi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!yi(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?mi(r,u=a):mi(r=c,u),o--):(di(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(o=0;l>o;o++)i=e[o],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(bi)}}function xi(n){n._pack_next=n._pack_prev=n}function bi(n){delete n._pack_next,delete n._pack_prev}function _i(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)_i(u[i],t,e,r)}function wi(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+l*i,e.y=n.y+c*i-l*u}else e.x=n.x+r,e.y=n.y}function Si(n,t){return n.parent==t.parent?1:2}function ki(n){var t=n.children;return t.length?t[0]:n.t}function Ei(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ai(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Ni(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Ci(n,t,e){return n.a.parent===t.parent?n.a:e}function zi(n){return 1+ta.max(n,function(n){return n.y})}function qi(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Li(n){var t=n.children;return t&&t.length?Li(t[0]):n}function Ti(n){var t,e=n.children;return e&&(t=e.length)?Ti(e[t-1]):n}function Ri(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Di(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Pi(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Ui(n){return n.rangeExtent?n.rangeExtent():Pi(n.range())}function ji(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Fi(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Hi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ml}function Oi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=ta.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Ii(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Oi:ji,c=r?Iu:Ou;return o=u(n,t,c,e),a=u(t,n,c,mu),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Du)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Xi(n,t)},i.tickFormat=function(t,e){return $i(n,t,e)},i.nice=function(t){return Zi(n,t),u()},i.copy=function(){return Ii(n,t,e,r)},u()}function Yi(n,t){return ta.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Zi(n,t){return Fi(n,Hi(Vi(n,t)[2]))}function Vi(n,t){null==t&&(t=10);var e=Pi(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Xi(n,t){return ta.range.apply(ta,Vi(n,t))}function $i(n,t,e){var r=Vi(n,t);if(e){var u=ic.exec(e);if(u.shift(),"s"===u[8]){var i=ta.formatPrefix(Math.max(ga(r[0]),ga(r[1])));return u[7]||(u[7]="."+Bi(i.scale(r[2]))),u[8]="f",e=ta.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Wi(u[8],r)),e=u.join("")}else e=",."+Bi(r[2])+"f";return ta.format(e)}function Bi(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Wi(n,t){var e=Bi(t[2]);return n in yl?Math.abs(e-Bi(Math.max(ga(t[0]),ga(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Ji(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=Fi(r.map(u),e?Math:xl);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Pi(r),o=[],a=n[0],c=n[1],l=Math.floor(u(a)),s=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(s-l)){if(e){for(;s>l;l++)for(var h=1;f>h;h++)o.push(i(l)*h);o.push(i(l))}else for(o.push(i(l));l++<s;)for(var h=f-1;h>0;h--)o.push(i(l)*h);for(l=0;o[l]<a;l++);for(s=o.length;o[s-1]>c;s--);o=o.slice(l,s)}return o},o.tickFormat=function(n,t){if(!arguments.length)return Ml;arguments.length<2?t=Ml:"function"!=typeof t&&(t=ta.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Ji(n.copy(),t,e,r)},Yi(o,n)}function Gi(n,t,e){function r(t){return n(u(t))}var u=Ki(t),i=Ki(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Xi(e,n)},r.tickFormat=function(n,t){return $i(e,n,t)},r.nice=function(n){return r.domain(Zi(e,n))},r.exponent=function(o){return arguments.length?(u=Ki(t=o),i=Ki(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Gi(n.copy(),t,e)},Yi(r,n)}function Ki(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function Qi(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return ta.range(n.length).map(function(n){return t+e*n})}var u,i,o;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new l;for(var i,o=-1,a=r.length;++o<a;)u.has(i=r[o])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,o=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=(c+l)/2,0):(l-c)/(n.length-1+a);return i=r(c+s*a/2,s),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=l=Math.round((c+l)/2),0):(l-c)/(n.length-1+a)|0;return i=r(c+Math.round(s*a/2+(l-c-(n.length-1+a)*s)/2),s),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=(f-s)/(n.length-a+2*c);return i=r(s+h*c,h),l&&i.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=Math.floor((f-s)/(n.length-a+2*c));return i=r(s+Math.round((f-s-(n.length-a)*h)/2),h),l&&i.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Pi(t.a[0])},e.copy=function(){return Qi(n,t)},e.domain(n)}function no(n,t){function i(){var e=0,r=t.length;for(a=[];++e<r;)a[e-1]=ta.quantile(n,e/r);return o}function o(n){return isNaN(n=+n)?void 0:t[ta.bisect(a,n)]}var a;return o.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},o.range=function(n){return arguments.length?(t=n,i()):t},o.quantiles=function(){return a},o.invertExtent=function(e){return e=t.indexOf(e),0>e?[0/0,0/0]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return no(n,t)},i()}function to(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return to(n,t,e)},u()}function eo(n,t){function e(e){return e>=e?t[ta.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return eo(n,t)},e}function ro(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Xi(n,t)},t.tickFormat=function(t,e){return $i(n,t,e)},t.copy=function(){return ro(n)},t}function uo(){return 0}function io(n){return n.innerRadius}function oo(n){return n.outerRadius}function ao(n){return n.startAngle}function co(n){return n.endAngle}function lo(n){return n&&n.padAngle}function so(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function fo(n,t,e,r,u){var i=n[0]-t[0],o=n[1]-t[1],a=(u?r:-r)/Math.sqrt(i*i+o*o),c=a*o,l=-a*i,s=n[0]+c,f=n[1]+l,h=t[0]+c,g=t[1]+l,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(M*M*y-x*x),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,E=_-p,A=w-v,N=S-p,C=k-v;return E*E+A*A>N*N+C*C&&(_=S,w=k),[[_-c,w-l],[_*e/M,w*e/M]]}function ho(n){function t(t){function o(){l.push("M",i(n(s),a))}for(var c,l=[],s=[],f=-1,h=t.length,g=Et(e),p=Et(r);++f<h;)u.call(this,c=t[f],f)?s.push([+g.call(this,c,f),+p.call(this,c,f)]):s.length&&(o(),s=[]);return s.length&&o(),l.length?l.join(""):null}var e=Ar,r=Nr,u=Ne,i=go,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=El.get(n)||go).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function go(n){return n.join("L")}function po(n){return go(n)+"Z"}function vo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function mo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function yo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function Mo(n,t){return n.length<4?go(n):n[1]+_o(n.slice(1,-1),wo(n,t))}function xo(n,t){return n.length<3?go(n):n[0]+_o((n.push(n[0]),n),wo([n[n.length-2]].concat(n,[n[1]]),t))}function bo(n,t){return n.length<3?go(n):n[0]+_o(n,wo(n,t))}function _o(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return go(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,c++)i=n[c],a=t[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var s=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+s[0]+","+s[1]}return r}function wo(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function So(n){if(n.length<3)return go(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",No(Cl,o),",",No(Cl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Co(c,o,a);return n.pop(),c.push("L",r),c.join("")}function ko(n){if(n.length<4)return go(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(No(Cl,i)+","+No(Cl,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),Co(e,i,o);return e.join("")}function Eo(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[No(Cl,o),",",No(Cl,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Co(t,o,a);return t.join("")}function Ao(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],u=l/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return So(n)}function No(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Co(n,t,e){n.push("C",No(Al,t),",",No(Al,e),",",No(Nl,t),",",No(Nl,e),",",No(Cl,t),",",No(Cl,e))}function zo(n,t){return(t[1]-n[1])/(t[0]-n[0])}function qo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=zo(u,i);++t<e;)r[t]=(o+(o=zo(u=i,i=n[t+1])))/2;return r[t]=o,r}function Lo(n){for(var t,e,r,u,i=[],o=qo(n),a=-1,c=n.length-1;++a<c;)t=zo(n[a],n[a+1]),ga(t)<Ca?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function To(n){return n.length<3?go(n):n[0]+_o(n,Lo(n))}function Ro(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-Ra,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Do(n){function t(t){function c(){v.push("M",a(n(m),f),s,l(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=Et(e),b=Et(u),_=e===r?function(){return g}:Et(r),w=u===i?function(){return p}:Et(i);++y<M;)o.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=Ar,r=Ar,u=0,i=Nr,o=Ne,a=go,c=a.key,l=a,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r
},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=El.get(n)||go).key,l=a.reverse||a,s=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Po(n){return n.radius}function Uo(n){return[n.x,n.y]}function jo(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Ra;return[e*Math.cos(r),e*Math.sin(r)]}}function Fo(){return 64}function Ho(){return"circle"}function Oo(n){var t=Math.sqrt(n/qa);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Io(n){return function(){var t,e;(t=this[n])&&(e=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Yo(n,t,e){return ya(n,Pl),n.namespace=t,n.id=e,n}function Zo(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,o,a){n[i][u].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Vo(n){return null==n&&(n=""),function(){this.textContent=n}}function Xo(n){return null==n?"__transition__":"__transition_"+n+"__"}function $o(n,t,e,r,u){var i=n[e]||(n[e]={active:0,count:0}),o=i[r];if(!o){var a=u.time;o=i[r]={tween:new l,time:a,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++i.count,ta.timer(function(u){function c(e){if(i.active>r)return s();var u=i[i.active];u&&(--i.count,delete i[i.active],u.event&&u.event.interrupt.call(n,n.__data__,u.index)),i.active=r,o.event&&o.event.start.call(n,n.__data__,t),o.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&v.push(r)}),h=o.ease,f=o.duration,ta.timer(function(){return p.c=l(e||1)?Ne:l,1},0,a)}function l(e){if(i.active!==r)return 1;for(var u=e/f,a=h(u),c=v.length;c>0;)v[--c].call(n,a);return u>=1?(o.event&&o.event.end.call(n,n.__data__,t),s()):void 0}function s(){return--i.count?delete i[r]:delete n[e],1}var f,h,g=o.delay,p=ec,v=[];return p.t=g+a,u>=g?c(u-g):void(p.c=c)},0,a)}}function Bo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function Wo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Jo(n){return n.toISOString()}function Go(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=ta.bisect(Vl,u);return i==Vl.length?[t.year,Vi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Vl[i-1]<Vl[i]/u?i-1:i]:[Bl,Vi(n,e)[2]]}return r.invert=function(t){return Ko(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Ko)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Ko(+e+1),t).length}var i=r.domain(),o=Pi(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(Fi(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Ko(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Ko(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Pi(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Ko(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Go(n.copy(),t,e)},Yi(r,n)}function Ko(n){return new Date(n)}function Qo(n){return JSON.parse(n.responseText)}function na(n){var t=ua.createRange();return t.selectNode(ua.body),t.createContextualFragment(n.responseText)}var ta={version:"3.5.6"},ea=[].slice,ra=function(n){return ea.call(n)},ua=this.document;if(ua)try{ra(ua.documentElement.childNodes)[0].nodeType}catch(ia){ra=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),ua)try{ua.createElement("DIV").style.setProperty("opacity",0,"")}catch(oa){var aa=this.Element.prototype,ca=aa.setAttribute,la=aa.setAttributeNS,sa=this.CSSStyleDeclaration.prototype,fa=sa.setProperty;aa.setAttribute=function(n,t){ca.call(this,n,t+"")},aa.setAttributeNS=function(n,t,e){la.call(this,n,t,e+"")},sa.setProperty=function(n,t,e){fa.call(this,n,t+"",e)}}ta.ascending=e,ta.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},ta.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},ta.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},ta.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},ta.sum=function(n,t){var e,r=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)u(e=+n[o])&&(r+=e);else for(;++o<i;)u(e=+t.call(n,n[o],o))&&(r+=e);return r},ta.mean=function(n,t){var e,i=0,o=n.length,a=-1,c=o;if(1===arguments.length)for(;++a<o;)u(e=r(n[a]))?i+=e:--c;else for(;++a<o;)u(e=r(t.call(n,n[a],a)))?i+=e:--c;return c?i/c:void 0},ta.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},ta.median=function(n,t){var i,o=[],a=n.length,c=-1;if(1===arguments.length)for(;++c<a;)u(i=r(n[c]))&&o.push(i);else for(;++c<a;)u(i=r(t.call(n,n[c],c)))&&o.push(i);return o.length?ta.quantile(o.sort(e),.5):void 0},ta.variance=function(n,t){var e,i,o=n.length,a=0,c=0,l=-1,s=0;if(1===arguments.length)for(;++l<o;)u(e=r(n[l]))&&(i=e-a,a+=i/++s,c+=i*(e-a));else for(;++l<o;)u(e=r(t.call(n,n[l],l)))&&(i=e-a,a+=i/++s,c+=i*(e-a));return s>1?c/(s-1):void 0},ta.deviation=function(){var n=ta.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ha=i(e);ta.bisectLeft=ha.left,ta.bisect=ta.bisectRight=ha.right,ta.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},ta.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},ta.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ta.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},ta.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=ta.min(arguments,o),e=new Array(t);++n<t;)for(var r,u=-1,i=e[n]=new Array(r);++u<r;)i[u]=arguments[u][n];return e},ta.transpose=function(n){return ta.zip.apply(ta,n)},ta.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ta.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ta.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ta.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var ga=Math.abs;ta.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,u=[],i=a(ga(e)),o=-1;if(n*=i,t*=i,e*=i,0>e)for(;(r=n+e*++o)>t;)u.push(r/i);else for(;(r=n+e*++o)<t;)u.push(r/i);return u},ta.map=function(n,t){var e=new l;if(n instanceof l)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var o in n)e.set(o,n[o]);return e};var pa="__proto__",va="\x00";c(l,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),ta.nest=function(){function n(t,o,a){if(a>=i.length)return r?r.call(u,o):e?o.sort(e):o;for(var c,s,f,h,g=-1,p=o.length,v=i[a++],d=new l;++g<p;)(h=d.get(c=v(s=o[g])))?h.push(s):d.set(c,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,a))}):(s={},f=function(e,r){s[e]=n(t,r,a)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=o[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],o=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(ta.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return o[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},ta.set=function(n){var t=new m;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},c(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),ta.behavior={},ta.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var da=["webkit","ms","moz","Moz","o","O"];ta.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ta.event=null,ta.requote=function(n){return n.replace(ma,"\\$&")};var ma=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ya={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},Ma=function(n,t){return t.querySelector(n)},xa=function(n,t){return t.querySelectorAll(n)},ba=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(ba=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(Ma=function(n,t){return Sizzle(n,t)[0]||null},xa=Sizzle,ba=Sizzle.matchesSelector),ta.selection=function(){return ta.select(ua.documentElement)};var _a=ta.selection.prototype=[];_a.select=function(n){var t,e,r,u,i=[];n=N(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return A(i)},_a.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=ra(n.call(e,e.__data__,a,u))),t.parentNode=e);return A(r)};var wa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ta.ns={prefix:wa,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.slice(0,t),n=n.slice(t+1)),wa.hasOwnProperty(e)?{space:wa[e],local:n}:n}},_a.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ta.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},_a.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!L(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},_a.style=function(n,e,r){var u=arguments.length;if(3>u){if("string"!=typeof n){2>u&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>u){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},_a.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},_a.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},_a.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},_a.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},_a.insert=function(n,t){return n=j(n),t=N(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},_a.remove=function(){return this.each(F)},_a.data=function(n,t){function e(n,e){var r,u,i,o=n.length,f=e.length,h=Math.min(o,f),g=new Array(f),p=new Array(f),v=new Array(o);if(t){var d,m=new l,y=new Array(o);for(r=-1;++r<o;)m.has(d=t.call(u=n[r],u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d;for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;f>r;++r)p[r]=H(e[r]);for(;o>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,a.push(p),c.push(g),s.push(v)}var r,u,i=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++i<o;)(u=r[i])&&(n[i]=u.__data__);return n}var a=Z([]),c=A([]),s=A([]);if("function"==typeof n)for(;++i<o;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],n);return c.enter=function(){return a},c.exit=function(){return s},c},_a.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},_a.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return A(u)},_a.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},_a.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},_a.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},_a.call=function(n){var t=ra(arguments);return n.apply(t[0]=this,t),this},_a.empty=function(){return!this.node()},_a.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},_a.size=function(){var n=0;return Y(this,function(){++n}),n};var Sa=[];ta.selection.enter=Z,ta.selection.enter.prototype=Sa,Sa.append=_a.append,Sa.empty=_a.empty,Sa.node=_a.node,Sa.call=_a.call,Sa.size=_a.size,Sa.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var l=-1,s=u.length;++l<s;)(i=u[l])?(t.push(r[l]=e=n.call(u.parentNode,i.__data__,l,a)),e.__data__=i.__data__):t.push(null)}return A(o)},Sa.insert=function(n,t){return arguments.length<2&&(t=V(this)),_a.insert.call(this,n,t)},ta.select=function(t){var e;return"string"==typeof t?(e=[Ma(t,ua)],e.parentNode=ua.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ta.selectAll=function(n){var t;return"string"==typeof n?(t=ra(xa(n,ua)),t.parentNode=ua.documentElement):(t=n,t.parentNode=null),A([t])},_a.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var ka=ta.map({mouseenter:"mouseover",mouseleave:"mouseout"});ua&&ka.forEach(function(n){"on"+n in ua&&ka.remove(n)});var Ea,Aa=0;ta.mouse=function(n){return J(n,k())};var Na=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ta.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return J(n,r)},ta.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(n,t,e,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&ta.event.target===f),g({type:"dragend"}))}var l,s=this,f=ta.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=ta.select(e(f)).on(i+d,a).on(o+d,c),y=W(f),M=t(h,v);u?(l=u.apply(s,arguments),l=[l.x-M[0],l.y-M[1]]):l=[0,0],g({type:"dragstart"})}}var r=E(n,"drag","dragstart","dragend"),u=null,i=e(b,ta.mouse,t,"mousemove","mouseup"),o=e(G,ta.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},ta.rebind(n,r,"on")},ta.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ra(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Ca=1e-6,za=Ca*Ca,qa=Math.PI,La=2*qa,Ta=La-Ca,Ra=qa/2,Da=qa/180,Pa=180/qa,Ua=Math.SQRT2,ja=2,Fa=4;ta.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=rt(v),o=i/(ja*h)*(e*ut(Ua*t+v)-et(v));return[r+o*l,u+o*s,i*e/rt(Ua*t+v)]}return[r+n*l,u+n*s,i*Math.exp(Ua*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],l=o-r,s=a-u,f=l*l+s*s,h=Math.sqrt(f),g=(c*c-i*i+Fa*f)/(2*i*ja*h),p=(c*c-i*i-Fa*f)/(2*c*ja*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/Ua;return e.duration=1e3*y,e},ta.behavior.zoom=function(){function n(n){n.on(q,f).on(Oa+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function u(n){k.k=Math.max(N[0],Math.min(N[1],n))}function i(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,e,r,o){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,o)),i(d=e,r),t=ta.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function a(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function c(n){z++||n({type:"zoomstart"})}function l(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||(n({type:"zoomend"}),d=null)}function f(){function n(){f=1,i(ta.mouse(u),g),l(a)}function r(){h.on(L,null).on(T,null),p(f&&ta.event.target===o),s(a)}var u=this,o=ta.event.target,a=D.of(u,arguments),f=0,h=ta.select(t(u)).on(L,n).on(T,r),g=e(ta.mouse(u)),p=W(u);Dl.call(u),c(a)}function h(){function n(){var n=ta.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=ta.event.target;ta.select(t).on(x,r).on(b,a),_.push(t);for(var e=ta.event.changedTouches,u=0,i=e.length;i>u;++u)d[e[u].identifier]=null;var c=n(),l=Date.now();if(1===c.length){if(500>l-M){var s=c[0];o(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=l}else if(c.length>1){var s=c[0],f=c[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,o=ta.touches(p);Dl.call(p);for(var a=0,c=o.length;c>a;++a,r=null)if(e=o[a],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),l(v)}function a(){if(ta.event.touches.length){for(var t=ta.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}ta.selectAll(_).on(y,null),w.on(q,f).on(R,h),E(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+ta.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=ta.select(p),E=W(p);t(),c(v),w.on(q,null).on(R,t)}function g(){var n=D.of(this,arguments);y?clearTimeout(y):(Dl.call(this),v=e(d=m||ta.mouse(this)),c(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*Ha())*k.k),i(d,v),l(n)}function p(){var n=ta.mouse(this),t=Math.log(k.k)/Math.LN2;o(this,n,e(n),ta.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},A=[960,500],N=Ia,C=250,z=0,q="mousedown.zoom",L="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=E(n,"zoomstart","zoom","zoomend");return Oa||(Oa="onwheel"in ua?(Ha=function(){return-ta.event.deltaY*(ta.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ua?(Ha=function(){return ta.event.wheelDelta},"mousewheel"):(Ha=function(){return-ta.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Tl?ta.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},c(n)}).tween("zoom:zoom",function(){var e=A[0],r=A[1],u=d?d[0]:e/2,i=d?d[1]:r/2,o=ta.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:u-r[0]*a,y:i-r[1]*a,k:a},l(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,c(n),l(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:+t},a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(N=null==t?Ia:[+t[0],+t[1]],n):N},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(A=t&&[+t[0],+t[1]],n):A},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},ta.rebind(n,D,"on")};var Ha,Oa,Ia=[0,1/0];ta.color=ot,ot.prototype.toString=function(){return this.rgb()+""},ta.hsl=at;var Ya=at.prototype=new ot;Ya.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,this.l/n)},Ya.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,n*this.l)},Ya.rgb=function(){return ct(this.h,this.s,this.l)},ta.hcl=lt;var Za=lt.prototype=new ot;Za.brighter=function(n){return new lt(this.h,this.c,Math.min(100,this.l+Va*(arguments.length?n:1)))},Za.darker=function(n){return new lt(this.h,this.c,Math.max(0,this.l-Va*(arguments.length?n:1)))},Za.rgb=function(){return st(this.h,this.c,this.l).rgb()},ta.lab=ft;var Va=18,Xa=.95047,$a=1,Ba=1.08883,Wa=ft.prototype=new ot;Wa.brighter=function(n){return new ft(Math.min(100,this.l+Va*(arguments.length?n:1)),this.a,this.b)},Wa.darker=function(n){return new ft(Math.max(0,this.l-Va*(arguments.length?n:1)),this.a,this.b)},Wa.rgb=function(){return ht(this.l,this.a,this.b)},ta.rgb=mt;var Ja=mt.prototype=new ot;Ja.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new mt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mt(u,u,u)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mt(n*this.r,n*this.g,n*this.b)},Ja.hsl=function(){return _t(this.r,this.g,this.b)},Ja.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var Ga=ta.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ga.forEach(function(n,t){Ga.set(n,yt(t))}),ta.functor=Et,ta.xhr=At(y),ta.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Nt(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=l)return o;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>s;){var r=n.charCodeAt(s++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++a);else if(r!==c)continue;return n.slice(t,s-a)}return n.slice(t)}for(var r,u,i={},o={},a=[],l=n.length,s=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,f++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},ta.csv=ta.dsv(",","text/csv"),ta.tsv=ta.dsv("	","text/tab-separated-values");var Ka,Qa,nc,tc,ec,rc=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ta.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Qa?Qa.n=i:Ka=i,Qa=i,nc||(tc=clearTimeout(tc),nc=1,rc(qt))},ta.timer.flush=function(){Lt(),Tt()},ta.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var uc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ta.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=ta.round(n,Rt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),uc[8+e/3]};var ic=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,oc=ta.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ta.round(n,Rt(n,t))).toFixed(Math.max(0,Math.min(20,Rt(n*(1+1e-15),t))))}}),ac=ta.time={},cc=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){lc.setUTCDate.apply(this._,arguments)},setDay:function(){lc.setUTCDay.apply(this._,arguments)},setFullYear:function(){lc.setUTCFullYear.apply(this._,arguments)},setHours:function(){lc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){lc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){lc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){lc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){lc.setUTCSeconds.apply(this._,arguments)},setTime:function(){lc.setTime.apply(this._,arguments)}};var lc=Date.prototype;ac.year=Ft(function(n){return n=ac.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ac.years=ac.year.range,ac.years.utc=ac.year.utc.range,ac.day=Ft(function(n){var t=new cc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ac.days=ac.day.range,ac.days.utc=ac.day.utc.range,ac.dayOfYear=function(n){var t=ac.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=ac[n]=Ft(function(n){return(n=ac.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ac[n+"s"]=e.range,ac[n+"s"].utc=e.utc.range,ac[n+"OfYear"]=function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)}}),ac.week=ac.sunday,ac.weeks=ac.sunday.range,ac.weeks.utc=ac.sunday.utc.range,ac.weekOfYear=ac.sundayOfYear;var sc={"-":"",_:" ",0:"0"},fc=/^\s*\d+/,hc=/^%/;ta.locale=function(n){return{numberFormat:Pt(n),timeFormat:Ot(n)}};var gc=ta.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ta.format=gc.numberFormat,ta.geo={},ce.prototype={s:0,t:0,add:function(n){le(n,this.t,pc),le(pc.s,this.s,this),this.s?this.t+=pc.t:this.s=pc.t
},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pc=new ce;ta.geo.stream=function(n,t){n&&vc.hasOwnProperty(n.type)?vc[n.type](n,t):se(n,t)};var vc={Feature:function(n,t){se(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)se(e[r].geometry,t)}},dc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fe(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)fe(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)se(e[r],t)}};ta.geo.area=function(n){return mc=0,ta.geo.stream(n,Mc),mc};var mc,yc=new ce,Mc={sphere:function(){mc+=4*qa},point:b,lineStart:b,lineEnd:b,polygonStart:function(){yc.reset(),Mc.lineStart=ge},polygonEnd:function(){var n=2*yc;mc+=0>n?4*qa+n:n,Mc.lineStart=Mc.lineEnd=Mc.point=b}};ta.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=pe([t*Da,e*Da]);if(m){var u=de(m,r),i=[u[1],-u[0],0],o=de(i,u);Me(o),o=xe(o);var c=t-p,l=c>0?1:-1,v=o[0]*Pa*l,d=ga(c)>180;if(d^(v>l*p&&l*t>v)){var y=o[1]*Pa;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>l*p&&l*t>v)){var y=-o[1]*Pa;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=ga(r)>180?r+(r>0?360:-360):r}else v=n,d=e;Mc.point(n,e),t(n,e)}function i(){Mc.lineStart()}function o(){u(v,d),Mc.lineEnd(),ga(y)>Ca&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=o,y=0,Mc.polygonStart()},polygonEnd:function(){Mc.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>yc?(s=-(h=180),f=-(g=90)):y>Ca?g=90:-Ca>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],ta.geo.stream(n,b);var t=M.length;if(t){M.sort(c);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],l(e[0],u)||l(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,s=e[0],h=u[1])}return M=x=null,1/0===s||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[s,f],[h,g]]}}(),ta.geo.centroid=function(n){xc=bc=_c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,qc);var t=Nc,e=Cc,r=zc,u=t*t+e*e+r*r;return za>u&&(t=kc,e=Ec,r=Ac,Ca>bc&&(t=_c,e=wc,r=Sc),u=t*t+e*e+r*r,za>u)?[0/0,0/0]:[Math.atan2(e,t)*Pa,tt(r/Math.sqrt(u))*Pa]};var xc,bc,_c,wc,Sc,kc,Ec,Ac,Nc,Cc,zc,qc={sphere:b,point:_e,lineStart:Se,lineEnd:ke,polygonStart:function(){qc.lineStart=Ee},polygonEnd:function(){qc.lineStart=Se}},Lc=Le(Ne,Pe,je,[-qa,-qa/2]),Tc=1e9;ta.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Ie(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ta.geo.conicEqualArea=function(){return Ye(Ze)}).raw=Ze,ta.geo.albers=function(){return ta.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ta.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=ta.geo.albers(),o=ta.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ta.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var l=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*l,f-.238*l],[s+.455*l,f+.238*l]]).stream(c).point,r=o.translate([s-.307*l,f+.201*l]).clipExtent([[s-.425*l+Ca,f+.12*l+Ca],[s-.214*l-Ca,f+.234*l-Ca]]).stream(c).point,u=a.translate([s-.205*l,f+.212*l]).clipExtent([[s-.214*l+Ca,f+.166*l+Ca],[s-.115*l-Ca,f+.234*l-Ca]]).stream(c).point,n},n.scale(1070)};var Rc,Dc,Pc,Uc,jc,Fc,Hc={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Dc=0,Hc.lineStart=Ve},polygonEnd:function(){Hc.lineStart=Hc.lineEnd=Hc.point=b,Rc+=ga(Dc/2)}},Oc={point:Xe,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Ic={point:We,lineStart:Je,lineEnd:Ge,polygonStart:function(){Ic.lineStart=Ke},polygonEnd:function(){Ic.point=We,Ic.lineStart=Je,Ic.lineEnd=Ge}};ta.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),ta.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return Rc=0,ta.geo.stream(n,u(Hc)),Rc},n.centroid=function(n){return _c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,u(Ic)),zc?[Nc/zc,Cc/zc]:Ac?[kc/Ac,Ec/Ac]:Sc?[_c/Sc,wc/Sc]:[0/0,0/0]},n.bounds=function(n){return jc=Fc=-(Pc=Uc=1/0),ta.geo.stream(n,u(Oc)),[[Pc,Uc],[jc,Fc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||tr(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new $e:new Qe(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(ta.geo.albersUsa()).context(null)},ta.geo.transform=function(n){return{stream:function(t){var e=new er(t);for(var r in n)e[r]=n[r];return e}}},er.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ta.geo.projection=ur,ta.geo.projectionMutator=ir,(ta.geo.equirectangular=function(){return ur(ar)}).raw=ar.invert=ar,ta.geo.rotation=function(n){function t(t){return t=n(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t}return n=lr(n[0]%360*Da,n[1]*Da,n.length>2?n[2]*Da:0),t.invert=function(t){return t=n.invert(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t},t},cr.invert=ar,ta.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=lr(-n[0]*Da,-n[1]*Da,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Pa,n[1]*=Pa}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gr((t=+r)*Da,u*Da),n):t},n.precision=function(r){return arguments.length?(e=gr(t*Da,(u=+r)*Da),n):u},n.angle(90)},ta.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Da,u=n[1]*Da,i=t[1]*Da,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),l=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=l*s-c*f*a)*e),c*s+l*f*a)},ta.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ta.range(Math.ceil(i/d)*d,u,d).map(h).concat(ta.range(Math.ceil(l/m)*m,c,m).map(g)).concat(ta.range(Math.ceil(r/p)*p,e,p).filter(function(n){return ga(n%d)>Ca}).map(s)).concat(ta.range(Math.ceil(a/v)*v,o,v).filter(function(n){return ga(n%m)>Ca}).map(f))}var e,r,u,i,o,a,c,l,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],l=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),l>c&&(t=l,l=c,c=t),n.precision(y)):[[i,l],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=vr(a,o,90),f=dr(r,e,y),h=vr(l,c,90),g=dr(i,u,y),n):y},n.majorExtent([[-180,-90+Ca],[180,90-Ca]]).minorExtent([[-180,-80-Ca],[180,80+Ca]])},ta.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=mr,u=yr;return n.distance=function(){return ta.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},ta.geo.interpolate=function(n,t){return Mr(n[0]*Da,n[1]*Da,t[0]*Da,t[1]*Da)},ta.geo.length=function(n){return Yc=0,ta.geo.stream(n,Zc),Yc};var Yc,Zc={sphere:b,point:b,lineStart:xr,lineEnd:b,polygonStart:b,polygonEnd:b},Vc=br(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ta.geo.azimuthalEqualArea=function(){return ur(Vc)}).raw=Vc;var Xc=br(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(ta.geo.azimuthalEquidistant=function(){return ur(Xc)}).raw=Xc,(ta.geo.conicConformal=function(){return Ye(_r)}).raw=_r,(ta.geo.conicEquidistant=function(){return Ye(wr)}).raw=wr;var $c=br(function(n){return 1/n},Math.atan);(ta.geo.gnomonic=function(){return ur($c)}).raw=$c,Sr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Ra]},(ta.geo.mercator=function(){return kr(Sr)}).raw=Sr;var Bc=br(function(){return 1},Math.asin);(ta.geo.orthographic=function(){return ur(Bc)}).raw=Bc;var Wc=br(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ta.geo.stereographic=function(){return ur(Wc)}).raw=Wc,Er.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Ra]},(ta.geo.transverseMercator=function(){var n=kr(Er),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Er,ta.geom={},ta.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=Et(e),i=Et(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(zr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var l=Cr(a),s=Cr(c),f=s[0]===l[0],h=s[s.length-1]===l[l.length-1],g=[];for(t=l.length-1;t>=0;--t)g.push(n[a[l[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[a[s[t]][2]]);return g}var e=Ar,r=Nr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ta.geom.polygon=function(n){return ya(n,Jc),n};var Jc=ta.geom.polygon.prototype=[];Jc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Jc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Jc.clip=function(n){for(var t,e,r,u,i,o,a=Tr(n),c=-1,l=this.length-Tr(this),s=this[l-1];++c<l;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],qr(o,s,u)?(qr(i,s,u)||n.push(Lr(i,o,s,u)),n.push(o)):qr(i,s,u)&&n.push(Lr(i,o,s,u)),i=o;a&&n.push(n[0]),s=u}return n};var Gc,Kc,Qc,nl,tl,el=[],rl=[];Or.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Yr),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=uu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(eu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,eu(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?uu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,eu(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ru(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,eu(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ru(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},ta.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return iu(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,s=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=i&&l.y>=u&&l.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];s.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Ca)*Ca,y:Math.round(o(n,t)/Ca)*Ca,i:t}})}var r=Ar,u=Nr,i=r,o=u,a=ul;return n?t(n):(t.links=function(n){return iu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return iu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Yr),c=-1,l=a.length,s=a[l-1].edge,f=s.l===o?s.r:s.l;++c<l;)u=s,i=f,s=a[c].edge,f=s.l===o?s.r:s.l,r<i.i&&r<f.i&&au(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=Et(r=n),t):r},t.y=function(n){return arguments.length?(o=Et(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?ul:n,t):a===ul?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===ul?null:a&&a[1]},t)};var ul=[[-1e6,-1e6],[1e6,1e6]];ta.geom.delaunay=function(n){return ta.geom.voronoi().triangles(n)},ta.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,s=n.y;if(null!=c)if(ga(c-e)+ga(s-r)<.01)l(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,c,s,u,i,o,a),l(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,u,i,o,a)}function l(n,t,e,r,u,o,a,c){var l=.5*(u+a),s=.5*(o+c),f=e>=l,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=su()),f?u=l:a=l,h?o=s:c=s,i(n,t,e,r,u,o,a,c)}var s,f,h,g,p,v,d,m,y,M=Et(a),x=Et(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=su();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){fu(n,k,v,d,m,y)},k.find=function(n){return hu(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var o,a=Ar,c=Nr;return(o=arguments.length)?(a=cu,c=lu,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},ta.interpolateRgb=gu,ta.interpolateObject=pu,ta.interpolateNumber=vu,ta.interpolateString=du;var il=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ol=new RegExp(il.source,"g");ta.interpolate=mu,ta.interpolators=[function(n,t){var e=typeof t;return("string"===e?Ga.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gu:du:t instanceof ot?gu:Array.isArray(t)?yu:"object"===e&&isNaN(t)?pu:vu)(n,t)}],ta.interpolateArray=yu;var al=function(){return y},cl=ta.map({linear:al,poly:ku,quad:function(){return _u},cubic:function(){return wu},sin:function(){return Eu},exp:function(){return Au},circle:function(){return Nu},elastic:Cu,back:zu,bounce:function(){return qu}}),ll=ta.map({"in":y,out:xu,"in-out":bu,"out-in":function(n){return bu(xu(n))}});ta.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=cl.get(e)||al,r=ll.get(r)||y,Mu(r(e.apply(null,ea.call(arguments,1))))},ta.interpolateHcl=Lu,ta.interpolateHsl=Tu,ta.interpolateLab=Ru,ta.interpolateRound=Du,ta.transform=function(n){var t=ua.createElementNS(ta.ns.prefix.svg,"g");return(ta.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Pu(e?e.matrix:sl)})(n)},Pu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sl={a:1,b:0,c:0,d:1,e:0,f:0};ta.interpolateTransform=Hu,ta.layout={},ta.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Yu(n[e]));return t}},ta.layout.chord=function(){function n(){var n,l,f,h,g,p={},v=[],d=ta.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(l=0,g=-1;++g<i;)l+=u[h][g];v.push(l),m.push(ta.range(i)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(La-s*i)/n,l=0,h=-1;++h<i;){for(f=l,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=l,_=l+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/n},l+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,l={},s=0;return l.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,l):u},l.padding=function(n){return arguments.length?(s=n,e=r=null,l):s},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},ta.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var l=t.charge/c;n.px-=i*l,n.py-=o*l}return!0}if(t.point&&c&&p>c){var l=t.pointCharge/c;n.px-=i*l,n.py-=o*l}}return!t.charge}}function t(n){n.px=ta.event.x,n.py=ta.event.y,a.resume()}var e,r,u,i,o,a={},c=ta.dispatch("start","tick","end"),l=[1,1],s=.9,f=fl,h=hl,g=-30,p=gl,v=.1,d=.64,m=[],M=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,y,x,b=m.length,_=M.length;for(e=0;_>e;++e)a=M[e],f=a.source,h=a.target,y=h.x-f.x,x=h.y-f.y,(p=y*y+x*x)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,y*=p,x*=p,h.x-=y*(d=f.weight/(h.weight+f.weight)),h.y-=x*d,f.x+=y*(d=1-d),f.y+=x*d);if((d=r*v)&&(y=l[0]/2,x=l[1]/2,e=-1,d))for(;++e<b;)a=m[e],a.x+=(y-a.x)*d,a.y+=(x-a.y)*d;if(g)for(Ju(t=ta.geom.quadtree(m),r,o),e=-1;++e<b;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<b;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*s,a.y-=(a.py-(a.py=a.y))*s);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(M=n,a):M},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(s=+n,a):s},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),ta.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;s>a;++a){var u=M[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,s=M.length,p=l[0],v=l[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;s>t;++t)r=M[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;s>t;++t)u[t]=+f.call(this,M[t],t);else for(t=0;s>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;s>t;++t)i[t]=+h.call(this,M[t],t);else for(t=0;s>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=ta.behavior.drag().origin(y).on("dragstart.force",Xu).on("drag.force",t).on("dragend.force",$u)),arguments.length?void this.on("mouseover.force",Bu).on("mouseout.force",Wu).call(e):e},ta.rebind(a,c,"on")};var fl=20,hl=1,gl=1/0;ta.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(l=e.call(n,i,i.depth))&&(c=l.length)){for(var c,l,s;--c>=0;)o.push(s=l[c]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Qu(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=ei,e=ni,r=ti;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Ku(t,function(n){n.children&&(n.value=0)}),Qu(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ta.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=i[l],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=ta.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Gu(e,r)},ta.layout.pie=function(){function n(o){var a,c=o.length,l=o.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=(f-c*g)/ta.sum(l),v=ta.range(c),d=[];return null!=e&&v.sort(e===pl?function(n,t){return l[t]-l[n]}:function(n,t){return e(o[n],o[t])}),v.forEach(function(n){d[n]={data:o[n],value:a=l[n],startAngle:s,endAngle:s+=a*p+g,padAngle:h}}),d}var t=Number,e=pl,r=0,u=La,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var pl={};ta.layout.stack=function(){function n(a,c){if(!(h=a.length))return a;var l=a.map(function(e,r){return t.call(n,e,r)}),s=l.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,s,c);l=ta.permute(l,f),s=ta.permute(s,f);var h,g,p,v,d=r.call(n,s,c),m=l[0].length;for(p=0;m>p;++p)for(u.call(n,l[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,l[g][p],v+=s[g-1][p][1],s[g][p][1]);return a}var t=y,e=ai,r=ci,u=oi,i=ui,o=ii;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:vl.get(t)||ai,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:dl.get(t)||ci,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var vl=ta.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(li),i=n.map(si),o=ta.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,l=[],s=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],l.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(l)},reverse:function(n){return ta.range(n.length).reverse()},"default":ai}),dl=ta.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,l,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=l=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];s>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,l>c&&(l=c)}for(e=0;h>e;++e)g[e]-=l;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ci});ta.layout.histogram=function(){function n(n,i){for(var o,a,c=[],l=n.map(e,this),s=r.call(this,l,i),f=u.call(this,s,l,i),i=-1,h=l.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=l[i],a>=s[0]&&a<=s[1]&&(o=c[ta.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=pi,u=hi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=Et(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return gi(n,t)}:Et(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ta.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],l=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Qu(a,function(n){n.r=+s(n.value)}),Qu(a,Mi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Qu(a,function(n){n.r+=f}),Qu(a,Mi),Qu(a,function(n){n.r-=f})}return _i(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=ta.layout.hierarchy().sort(vi),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Gu(n,e)},ta.layout.tree=function(){function n(n,u){var s=o.call(this,n,u),f=s[0],h=t(f);if(Qu(h,e),h.parent.m=-h.z,Ku(h,r),l)Ku(f,i);else{var g=f,p=f,v=f;Ku(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);Ku(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Ni(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],l=u.m,s=i.m,f=o.m,h=c.m;o=Ei(o),u=ki(u),o&&u;)c=ki(c),i=Ei(i),i.a=n,r=o.z+f-u.z-l+a(o._,u._),r>0&&(Ai(Ci(o,n,e),n,r),l+=r,s+=r),f+=o.m,l+=u.m,h+=c.m,s+=i.m;o&&!Ei(i)&&(i.t=o,i.m+=f-s),u&&!ki(c)&&(c.t=u,c.m+=l-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=ta.layout.hierarchy().sort(null).value(null),a=Si,c=[1,1],l=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(l=null==(c=t)?i:null,n):l?null:c},n.nodeSize=function(t){return arguments.length?(l=null==(c=t)?null:i,n):l?c:null},Gu(n,o)},ta.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],l=0;Qu(c,function(n){var t=n.children;t&&t.length?(n.x=qi(t),n.y=zi(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var s=Li(c),f=Ti(c),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return Qu(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=ta.layout.hierarchy().sort(null).value(null),e=Si,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Gu(n,t)},ta.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,l=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),s.area=0;(c=h.length)>0;)s.push(o=h[c-1]),s.area+=o.area,"squarify"!==g||(a=r(s,v))<=p?(h.pop(),p=a):(s.area-=s.pop().area,u(s,v,l,!1),v=Math.min(l.dx,l.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,l,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,l=e.y,s=t?c(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<o;)u=n[i],u.x=a,u.y=l,u.dy=s,a+=u.dx=Math.min(e.x+e.dx-a,s?c(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<o;)u=n[i],u.x=a,u.y=l,u.dx=s,l+=u.dy=Math.min(e.y+e.dy-l,s?c(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=l[0],i.dy=l[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=ta.layout.hierarchy(),c=Math.round,l=[1,1],s=null,f=Ri,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));
return i.size=function(n){return arguments.length?(l=n,i):l},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ri(t):Di(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Di(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Ri:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Gu(i,a)},ta.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=ta.random.normal.apply(ta,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ta.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ta.scale={};var ml={floor:y,ceil:y};ta.scale.linear=function(){return Ii([0,1],[0,1],mu,!1)};var yl={s:1,g:1,p:1,r:1,e:1};ta.scale.log=function(){return Ji(ta.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ta.format(".0e"),xl={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ta.scale.pow=function(){return Gi(ta.scale.linear(),1,[0,1])},ta.scale.sqrt=function(){return ta.scale.pow().exponent(.5)},ta.scale.ordinal=function(){return Qi([],{t:"range",a:[[]]})},ta.scale.category10=function(){return ta.scale.ordinal().range(bl)},ta.scale.category20=function(){return ta.scale.ordinal().range(_l)},ta.scale.category20b=function(){return ta.scale.ordinal().range(wl)},ta.scale.category20c=function(){return ta.scale.ordinal().range(Sl)};var bl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),_l=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),wl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Sl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);ta.scale.quantile=function(){return no([],[])},ta.scale.quantize=function(){return to(0,1,[0,1])},ta.scale.threshold=function(){return eo([.5],[0,1])},ta.scale.identity=function(){return ro([0,1])},ta.svg={},ta.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),s=o.apply(this,arguments)-Ra,f=a.apply(this,arguments)-Ra,h=Math.abs(f-s),g=s>f?0:1;if(n>l&&(p=l,l=n,n=p),h>=Ta)return t(l,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,E=0,A=0,N=[];if((m=(+c.apply(this,arguments)||0)/2)&&(d=i===kl?Math.sqrt(n*n+l*l):+i.apply(this,arguments),g||(A*=-1),l&&(A=tt(d/l*Math.sin(m))),n&&(E=tt(d/n*Math.sin(m)))),l){y=l*Math.cos(s+A),M=l*Math.sin(s+A),x=l*Math.cos(f-A),b=l*Math.sin(f-A);var C=Math.abs(f-s-2*A)<=qa?0:1;if(A&&so(y,M,x,b)===g^C){var z=(s+f)/2;y=l*Math.cos(z),M=l*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-E),w=n*Math.sin(f-E),S=n*Math.cos(s+E),k=n*Math.sin(s+E);var q=Math.abs(s-f+2*E)<=qa?0:1;if(E&&so(_,w,S,k)===1-g^q){var L=(s+f)/2;_=n*Math.cos(L),w=n*Math.sin(L),S=k=null}}else _=w=0;if((p=Math.min(Math.abs(l-n)/2,+u.apply(this,arguments)))>.001){v=l>n^g?0:1;var T=null==S?[_,w]:null==x?[y,M]:Lr([y,M],[S,k],[x,b],[_,w]),R=y-T[0],D=M-T[1],P=x-T[0],U=b-T[1],j=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),F=Math.sqrt(T[0]*T[0]+T[1]*T[1]);if(null!=x){var H=Math.min(p,(l-F)/(j+1)),O=fo(null==S?[_,w]:[S,k],[y,M],l,H,g),I=fo([x,b],[_,w],l,H,g);p===H?N.push("M",O[0],"A",H,",",H," 0 0,",v," ",O[1],"A",l,",",l," 0 ",1-g^so(O[1][0],O[1][1],I[1][0],I[1][1]),",",g," ",I[1],"A",H,",",H," 0 0,",v," ",I[0]):N.push("M",O[0],"A",H,",",H," 0 1,",v," ",I[0])}else N.push("M",y,",",M);if(null!=S){var Y=Math.min(p,(n-F)/(j-1)),Z=fo([y,M],[S,k],n,-Y,g),V=fo([_,w],null==x?[y,M]:[x,b],n,-Y,g);p===Y?N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^so(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",Y,",",Y," 0 0,",v," ",Z[0]):N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",Z[0])}else N.push("L",_,",",w)}else N.push("M",y,",",M),null!=x&&N.push("A",l,",",l," 0 ",C,",",g," ",x,",",b),N.push("L",_,",",w),null!=S&&N.push("A",n,",",n," 0 ",q,",",1-g," ",S,",",k);return N.push("Z"),N.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=io,r=oo,u=uo,i=kl,o=ao,a=co,c=lo;return n.innerRadius=function(t){return arguments.length?(e=Et(t),n):e},n.outerRadius=function(t){return arguments.length?(r=Et(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=Et(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==kl?kl:Et(t),n):i},n.startAngle=function(t){return arguments.length?(o=Et(t),n):o},n.endAngle=function(t){return arguments.length?(a=Et(t),n):a},n.padAngle=function(t){return arguments.length?(c=Et(t),n):c},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Ra;return[Math.cos(t)*n,Math.sin(t)*n]},n};var kl="auto";ta.svg.line=function(){return ho(y)};var El=ta.map({linear:go,"linear-closed":po,step:vo,"step-before":mo,"step-after":yo,basis:So,"basis-open":ko,"basis-closed":Eo,bundle:Ao,cardinal:bo,"cardinal-open":Mo,"cardinal-closed":xo,monotone:To});El.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Al=[0,2/3,1/3,0],Nl=[0,1/3,2/3,0],Cl=[0,1/6,2/3,1/6];ta.svg.line.radial=function(){var n=ho(Ro);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},mo.reverse=yo,yo.reverse=mo,ta.svg.area=function(){return Do(y)},ta.svg.area.radial=function(){var n=Do(Ro);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ta.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)-Ra,s=l.call(n,u,r)-Ra;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>qa)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=mr,o=yr,a=Po,c=ao,l=co;return n.radius=function(t){return arguments.length?(a=Et(t),n):a},n.source=function(t){return arguments.length?(i=Et(t),n):i},n.target=function(t){return arguments.length?(o=Et(t),n):o},n.startAngle=function(t){return arguments.length?(c=Et(t),n):c},n.endAngle=function(t){return arguments.length?(l=Et(t),n):l},n},ta.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=mr,e=yr,r=Uo;return n.source=function(e){return arguments.length?(t=Et(e),n):t},n.target=function(t){return arguments.length?(e=Et(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ta.svg.diagonal.radial=function(){var n=ta.svg.diagonal(),t=Uo,e=n.projection;return n.projection=function(n){return arguments.length?e(jo(t=n)):t},n},ta.svg.symbol=function(){function n(n,r){return(zl.get(t.call(this,n,r))||Oo)(e.call(this,n,r))}var t=Ho,e=Fo;return n.type=function(e){return arguments.length?(t=Et(e),n):t},n.size=function(t){return arguments.length?(e=Et(t),n):e},n};var zl=ta.map({circle:Oo,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ll)),e=t*Ll;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ta.svg.symbolTypes=zl.keys();var ql=Math.sqrt(3),Ll=Math.tan(30*Da);_a.transition=function(n){for(var t,e,r=Tl||++Ul,u=Xo(n),i=[],o=Rl||{time:Date.now(),ease:Su,delay:0,duration:250},a=-1,c=this.length;++a<c;){i.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(e=l[s])&&$o(e,s,u,r,o),t.push(e)}return Yo(i,u,r)},_a.interrupt=function(n){return this.each(null==n?Dl:Io(Xo(n)))};var Tl,Rl,Dl=Io(Xo()),Pl=[],Ul=0;Pl.call=_a.call,Pl.empty=_a.empty,Pl.node=_a.node,Pl.size=_a.size,ta.transition=function(n,t){return n&&n.transition?Tl?n.transition(t):n:ta.selection().transition(n)},ta.transition.prototype=Pl,Pl.select=function(n){var t,e,r,u=this.id,i=this.namespace,o=[];n=N(n);for(var a=-1,c=this.length;++a<c;){o.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(r=l[s])&&(e=n.call(r,r.__data__,s,a))?("__data__"in r&&(e.__data__=r.__data__),$o(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Yo(o,i,u)},Pl.selectAll=function(n){var t,e,r,u,i,o=this.id,a=this.namespace,c=[];n=C(n);for(var l=-1,s=this.length;++l<s;)for(var f=this[l],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[a][o],e=n.call(r,r.__data__,h,l),c.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&$o(u,p,a,o,i),t.push(u)}return Yo(c,a,o)},Pl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Yo(u,this.namespace,this.id)},Pl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Pl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Hu:mu,a=ta.ns.qualify(n);return Zo(this,"attr."+n,t,a.local?i:u)},Pl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=ta.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Pl.style=function(n,e,r){function u(){this.style.removeProperty(n)}function i(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=mu(i,e),function(t){this.style.setProperty(n,u(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof n){2>o&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Zo(this,"style."+n,e,i)},Pl.styleTween=function(n,e,r){function u(u,i){var o=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return o&&function(t){this.style.setProperty(n,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,u)},Pl.text=function(n){return Zo(this,"text",n,Vo)},Pl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Pl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ta.ease.apply(ta,arguments)),Y(this,function(r){r[e][t].ease=n}))},Pl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Pl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Pl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Rl,i=Tl;try{Tl=e,Y(this,function(t,u,i){Rl=t[r][e],n.call(t,t.__data__,u,i)})}finally{Rl=u,Tl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=ta.dispatch("start","end","interrupt"))).on(n,t)});return this},Pl.transition=function(){for(var n,t,e,r,u=this.id,i=++Ul,o=this.namespace,a=[],c=0,l=this.length;l>c;c++){a.push(n=[]);for(var t=this[c],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[o][u],$o(e,s,o,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Yo(a,o,i)},ta.svg.axis=function(){function n(n){n.each(function(){var n,l=ta.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):y:t,p=l.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ca),d=ta.transition(p.exit()).style("opacity",Ca).remove(),m=ta.transition(p.order()).style("opacity",1),M=Math.max(u,0)+o,x=Ui(f),b=l.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),ta.transition(b));v.append("line"),v.append("text");var w,S,k,E,A=v.select("line"),N=m.select("line"),C=p.select("text").text(g),z=v.select("text"),q=m.select("text"),L="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Bo,w="x",k="y",S="x2",E="y2",C.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+L*i+"V0H"+x[1]+"V"+L*i)):(n=Wo,w="y",k="x",S="y2",E="x2",C.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),_.attr("d","M"+L*i+","+x[0]+"H0V"+x[1]+"H"+L*i)),A.attr(E,L*u),z.attr(k,L*M),N.attr(S,0).attr(E,L*u),q.attr(w,0).attr(k,L*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=ta.scale.linear(),r=jl,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Fl?t+"":jl,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var jl="bottom",Fl={top:1,right:1,bottom:1,left:1};ta.svg.brush=function(){function n(t){t.each(function(){var t=ta.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=t.selectAll(".resize").data(v,y);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Hl[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var c,f=ta.transition(t),h=ta.transition(o);l&&(c=Ui(l),h.attr("x",c[0]).attr("width",c[1]-c[0]),r(f)),s&&(c=Ui(s),h.attr("y",c[0]).attr("height",c[1]-c[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==ta.event.keyCode&&(C||(M=null,q[0]-=f[1],q[1]-=h[1],C=2),S())}function v(){32==ta.event.keyCode&&2==C&&(q[0]+=f[1],q[1]+=h[1],C=0,S())}function d(){var n=ta.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(ta.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),q[0]=f[+(n[0]<M[0])],q[1]=h[+(n[1]<M[1])]):M=null),A&&m(n,l,0)&&(r(k),t=!0),N&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Ui(t),c=i[0],l=i[1],s=q[e],v=e?h:f,d=v[1]-v[0];return C&&(c-=s,l-=d+s),r=(e?p:g)?Math.max(c,Math.min(l,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(c,Math.min(l,2*M[e]-r))),r>s?(u=r,r=s):u=s),v[0]!=r||v[1]!=u?(e?a=null:o=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ta.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=ta.select(ta.event.target),w=c.of(b,arguments),k=ta.select(b),E=_.datum(),A=!/^(n|s)$/.test(E)&&l,N=!/^(e|w)$/.test(E)&&s,C=_.classed("extent"),z=W(b),q=ta.mouse(b),L=ta.select(t(b)).on("keydown.brush",i).on("keyup.brush",v);if(ta.event.changedTouches?L.on("touchmove.brush",d).on("touchend.brush",y):L.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)q[0]=f[0]-q[0],q[1]=h[0]-q[1];else if(E){var T=+/w$/.test(E),R=+/^n/.test(E);x=[f[1-T]-q[0],h[1-R]-q[1]],q[0]=f[T],q[1]=h[R]}else ta.event.altKey&&(M=q.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ta.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var o,a,c=E(n,"brushstart","brush","brushend"),l=null,s=null,f=[0,0],h=[0,0],g=!0,p=!0,v=Ol[0];return n.event=function(n){n.each(function(){var n=c.of(this,arguments),t={x:f,y:h,i:o,j:a},e=this.__chart__||t;this.__chart__=t,Tl?ta.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=yu(f,t.x),r=yu(h,t.y);return o=a=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(l=t,v=Ol[!l<<1|!s],n):l},n.y=function(t){return arguments.length?(s=t,v=Ol[!l<<1|!s],n):s},n.clamp=function(t){return arguments.length?(l&&s?(g=!!t[0],p=!!t[1]):l?g=!!t:s&&(p=!!t),n):l&&s?[g,p]:l?g:s?p:null},n.extent=function(t){var e,r,u,i,c;return arguments.length?(l&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),o=[e,r],l.invert&&(e=l(e),r=l(r)),e>r&&(c=e,e=r,r=c),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],l&&(u=u[1],i=i[1]),a=[u,i],s.invert&&(u=s(u),i=s(i)),u>i&&(c=u,u=i,i=c),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(l&&(o?(e=o[0],r=o[1]):(e=f[0],r=f[1],l.invert&&(e=l.invert(e),r=l.invert(r)),e>r&&(c=e,e=r,r=c))),s&&(a?(u=a[0],i=a[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),u>i&&(c=u,u=i,i=c))),l&&s?[[e,u],[r,i]]:l?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],o=a=null),n},n.empty=function(){return!!l&&f[0]==f[1]||!!s&&h[0]==h[1]},ta.rebind(n,c,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ol=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Il=ac.format=gc.timeFormat,Yl=Il.utc,Zl=Yl("%Y-%m-%dT%H:%M:%S.%LZ");Il.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jo:Zl,Jo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Jo.toString=Zl.toString,ac.second=Ft(function(n){return new cc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ac.seconds=ac.second.range,ac.seconds.utc=ac.second.utc.range,ac.minute=Ft(function(n){return new cc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ac.minutes=ac.minute.range,ac.minutes.utc=ac.minute.utc.range,ac.hour=Ft(function(n){var t=n.getTimezoneOffset()/60;return new cc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ac.hours=ac.hour.range,ac.hours.utc=ac.hour.utc.range,ac.month=Ft(function(n){return n=ac.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ac.months=ac.month.range,ac.months.utc=ac.month.utc.range;var Vl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xl=[[ac.second,1],[ac.second,5],[ac.second,15],[ac.second,30],[ac.minute,1],[ac.minute,5],[ac.minute,15],[ac.minute,30],[ac.hour,1],[ac.hour,3],[ac.hour,6],[ac.hour,12],[ac.day,1],[ac.day,2],[ac.week,1],[ac.month,1],[ac.month,3],[ac.year,1]],$l=Il.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",Ne]]),Bl={range:function(n,t,e){return ta.range(Math.ceil(n/e)*e,+t,e).map(Ko)},floor:y,ceil:y};Xl.year=ac.year,ac.scale=function(){return Go(ta.scale.linear(),Xl,$l)};var Wl=Xl.map(function(n){return[n[0].utc,n[1]]}),Jl=Yl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",Ne]]);Wl.year=ac.year.utc,ac.scale.utc=function(){return Go(ta.scale.linear(),Wl,Jl)},ta.text=At(function(n){return n.responseText}),ta.json=function(n,t){return Nt(n,"application/json",Qo,t)},ta.html=function(n,t){return Nt(n,"text/html",na,t)},ta.xml=At(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define(ta):"object"==typeof module&&module.exports&&(module.exports=ta),this.d3=ta}();</script>
<style type="text/css">.profvis {
position: relative;
}
.profvis * {

-webkit-box-sizing: content-box;
-moz-box-sizing: content-box;
box-sizing: content-box;
}
.profvis-footer .info-label {
cursor: default;
}
.profvis-panel1 {
left: 0px;
top: 23px;
position: absolute;
}
.profvis-panel1-vertical {
bottom: 0px;
width: 500px;
margin-bottom: 20px;
}
.profvis-panel1-horizontal {
height: 378px;
right: 0px;
}
.profvis-panel2 {
position: absolute;
right: 0px;
bottom: 0px;
}
.profvis-panel2-vertical {
top: 23px;
left: 508px;
margin-bottom: 20px;
}
.profvis-panel2-horizontal {
left: 0px;
top: 408px;
margin-bottom: 20px;
}
.profvis-splitbar {
position: absolute;
background-color: rgb(224, 224, 224);
border-color: #ddd;
border-style: solid;
background-repeat: no-repeat;
background-position: center;
}
.profvis-splitbar-vertical {
cursor: col-resize;
left: 500px;
width: 8px;
top: 23px;
bottom: 0px;
border-width: 0 1px;
background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAHCAYAAADNufepAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAADdJREFUeNpMi7ENADAIwwz/H8TEhMQz/JAupWqmyHGI7JoZIrscxMbBbhX+MMbTpG+x/UgCgzMA+a4RzyZ2yIIAAAAASUVORK5CYII=');
}
.profvis-splitbar-horizontal {
cursor: row-resize;
top: 400px;
height: 8px;
left: 0px;
right: 0px;
border-width: 0px 0;
background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAADCAYAAABfwxXFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAADZJREFUeNpi3LHv+BEGBgYGBob/EIqBkQEGGN+8ecOADfz//5+B5cylW0cgqjF1AgAAAP//AwCtfA4GqIXcdgAAAABJRU5ErkJggg==');
}
.profvis-status-bar {
position: absolute;
padding: 0px 0px;
top: 0;
left: 0;
right: 0;
height: 22px;
line-height: 18px;
border-bottom: 1px solid rgb(196, 201, 204);
background-color: rgb(248, 249, 248);
color: #444;
font-family: "Lucida Sans", "DejaVu Sans", "Lucida Grande", "Segoe UI", Verdana, Helvetica, sans-serif;
font-size: 11px;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
overflow: hidden;
}
.profvis-footer {
position: absolute;
padding: 0px 0px;
bottom: 0px;
left: 0;
right: 0;
height: 19px;
line-height: 18px;
border-top: 1px solid rgb(196, 201, 204);
background-color: rgb(248, 249, 248);
color: #444;
font-family: "Lucida Sans", "DejaVu Sans", "Lucida Grande", "Segoe UI", Verdana, Helvetica, sans-serif;
font-size: 11px;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
overflow: hidden;
}
.profvis-status-bar .info-block {
display: inline-block;
vertical-align: top;
width: 140px;
padding: 2px 11px 2px 11px;
}
.profvis-footer .info-block {
display: inline-block;
vertical-align: top;
padding: 1px 11px 1px 11px;
}
.profvis-footer .info-block-right {
display: inline-block;
vertical-align: top;
padding: 1px 11px 1px 11px;
float: right;
}
.profvis-status-bar .result-block {
width: auto;
cursor: pointer;
}
.profvis-status-bar .result-block-active {
width: auto;
background: rgb(227, 229, 230);
}
.profvis-status-bar .spacing-block {
display: inline-block;
width: 25px;
}
.profvis-status-bar .separator-block {
display: inline-block;
width: 1px;
text-align: center;
}
.profvis-status-bar .separator-block .separator-image {
width: 2px;
height: 26px;
margin-top: -2px;
}
.profvis-status-bar .options-button {
float: right;
color: #444;
text-decoration: none;
cursor: pointer;
padding: 2px 11px 2px 11px;
}
.profvis-options-panel {
float: left;
position: absolute;
right: 0;
top: 21px;
padding: 3px 6px;
border: 1px solid #999;
background-color: #fff;
font-family: "Lucida Sans", "DejaVu Sans", "Lucida Grande", "Segoe UI", Verdana, Helvetica, sans-serif;
font-size: 11px;
line-height: 170%;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
cursor: pointer;
}
.profvis-code {
position: absolute;
top: 0px;
left: 0;
bottom: 0;
right: 0;
overflow-y: auto;
border: 0px solid #ddd;
}
.profvis-flamegraph {
position: absolute;
right: 0;
top: 0;
bottom: 0;
left: 0;
overflow: hidden;
border: 0px solid #ddd;
background: rgb(249, 249, 250);
}
table.profvis-table {
border-collapse: collapse;
font-family: "Lucida Sans", "DejaVu Sans", "Lucida Grande", "Segoe UI", Verdana, Helvetica, sans-serif;
font-size: 11px;
width: 100%;
text-align: left;
cursor: default;
}
table.profvis-table th {
background-color: rgb(249, 249, 250);
width: 14%;
}
table.profvis-table th.spacing {
width: 20px;
}
table.profvis-table th.filename {
font-family: monospace;
padding-left: 10px;
width: auto;
}
table.profvis-table th.percent {
text-align: center;
}
table.profvis-table tr {
border-top: 1px solid transparent;
border-bottom: 1px solid transparent;
vertical-align: top;
}

table.profvis-table tr.locked > td {
border-top: 1px solid #444;
border-bottom: 1px solid #444;
}
table.profvis-table tr > td {
padding-top: 0;
padding-bottom: 0;
}
table.profvis-table tr.active {
background-color: #fdb;
}
table.profvis-table .linenum {
color: #aaa;
padding: 0 15px;
font-family: monospace;
width: 25px;
}

table.profvis-table [data-pseudo-content]::before {
content: attr(data-pseudo-content);
}
table.profvis-table .code {
white-space: pre-wrap;
margin: 0;
min-height: 1.25em;
line-height: 1.25;
width: auto;
font-family: monospace;
background: transparent;
}
table.profvis-table .time, table.profvis-table .percent {
padding: 0 5px;
text-align: right;
min-width: 2em;
max-width: 2em;
overflow: hidden;
padding-right: 10px;
}
table.profvis-table .memory {
padding-right: 5px;
}
table.profvis-table th.time {
text-align: center;
}
table.profvis-table .memory {
padding: 0 5px;
text-align: right;
min-width: 2em;
max-width: 4em;
overflow: hidden;
padding-right: 10px;
}
table.profvis-table .memory-right {
text-align: left;
}
table.profvis-table th.memory {
text-align: center;
}
table.profvis-table .timebar-cell {
padding-left: 0;
border-left: 1px solid #444;
min-width: 3em;
width: 3em;
}
table.profvis-table .timebar-cell > .timebar {
background-color: #5A5A5A;
border-radius: 0px 2px 2px 0px;
line-height: 15px;
}
table.profvis-table .membar-left-cell {
padding-left: 0;
padding-right: 0;
border-left: 0px solid black;
min-width: 0.5em;
width: 0.5em;
}
table.profvis-table .membar-left-cell > .membar {
background-color: #A7A7A7;
float: right;
border-radius: 2px 0px 0px 2px;
line-height: 15px;
}
table.profvis-table .membar-right-cell {
padding-left: 0;
border-left: 1px solid black;
min-width: 1em;
width: 1em;
}
table.profvis-table .membar-right-cell > .membar {
background-color: #5A5A5A;
border-radius: 0px 2px 2px 0px;
line-height: 15px;
}
.profvis-flamegraph .background {
fill: rgb(249, 249, 250);
}
.profvis-flamegraph .cell .rect {
stroke: #000;
stroke-width: 0.25px;
fill: #fff;
}
.profvis-flamegraph .cell.active .rect {
stroke-width: 0.75px;
fill: #ddd;
}
.profvis-flamegraph .cell.highlighted .rect {
fill: #ffc;
}
.profvis-flamegraph .cell.highlighted.active .rect {
fill: #fdb;
}
.profvis-flamegraph .cell.output .rect {
fill: #eef;
}
.profvis-flamegraph .cell.gc .rect {
fill: #ccc;
}
.profvis-flamegraph .cell.stacktrace .rect {
fill: #eee;
}
.profvis-flamegraph .cell.stacktrace .profvis-label {
fill: #666;
}
.profvis-flamegraph .cell.locked {
font-weight: bold;
}
.profvis-flamegraph .cell.locked .rect {
stroke-width: 2px;
}
.profvis-flamegraph .cell .profvis-label {
font-family: monospace;
font-size: 11px;
cursor: default;
}
.profvis-flamegraph .axis text {
font: 10px sans-serif;
}
.profvis-flamegraph .axis path,
.profvis-flamegraph .axis line {
fill: none;
stroke: #000;
shape-rendering: crispEdges;
}
.profvis-flamegraph .profvis-tooltip rect {
fill: rgb(249, 249, 250);
stroke: #000;
opacity: 0.75;
stroke-opacity: 0.75;
stroke-width: 0.5;
}
.profvis-flamegraph .profvis-tooltip text {
text-anchor: middle;
font-family: monospace;
font-size: 11px;
}
.profvis-infobox {
position: absolute;
left: 8px;
top: 8px;
opacity: 0.8;
border-radius: 3px;
color: #f8f8f8;
background-color: #333;
padding: 5px 10px;
font-family: "Lucida Sans", "DejaVu Sans", "Lucida Grande", "Segoe UI", Verdana, Helvetica, sans-serif;
font-size: 11px;
line-height: 100%;
pointer-events: none;
min-width: 280px;
}
.profvis-infobox table {
border-collapse: separate;
border-spacing: 2px;
}
.profvis-infobox table td {
padding: 1px;
}
.profvis-infobox .infobox-title {
font-weight: bold;
}
.profvis-message {
width: 100%;
height: 100%;
display: -ms-flexbox;
display: -webkit-flex;
display: flex;
-ms-flex-pack: center;
-webkit-justify-content: center;
justify-content: center;
-ms-flex-align: center;
-webkit-align-items: center;
align-items: center;
font-family: "Lucida Sans", "DejaVu Sans", "Lucida Grande", "Segoe UI", Verdana, Helvetica, sans-serif;
font-size: 11px;
}
.profvis-message div {
color: #444;
height: 25%;
}
.profvis-treetable {
top: 0px;
bottom: 0px;
left: 0px;
right: 0px;
position: absolute;
margin-top: 23px;
margin-bottom: 21px;
margin-right: 0px;
overflow: hidden;
font: 10px sans-serif;
color: #161616;
font-family: "Lucida Sans", "DejaVu Sans", "Lucida Grande", "Segoe UI", Verdana, Helvetica, sans-serif;
font-size: 11px;
overflow-y: auto;
}
.profvis-treetable .results {
width: 100%;
table-layout: fixed;
}
.profvis-treetable th {
font-weight: normal;
height: 18px;
background-color: #F8F9F8;
border-bottom: solid 1px #E4E4E4;
border-right: solid 1px #E4E4E4;
padding-left: 3px;
padding-right: 3px;
}
.profvis-treetable td {
height: 18px;
border-bottom: solid 1px #E4E4E4;
border-right: solid 1px #E4E4E4;
padding-left: 3px;
padding-right: 3px;
overflow: hidden;
text-overflow: ellipsis;
}
.profvis-treetable .action {
width: 18px;
}
.profvis-treetable .memory {
width: 100px;
text-align: right;
}
.profvis-treetable th {
cursor: default;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
overflow: hidden;
}
.profvis-treetable th.memory {
text-align: center;
}
.profvis-treetable .time {
width: 100px;
text-align: right;
}
.profvis-treetable th.time {
text-align: center;
}
.profvis-treetable .count {
text-align: right;
}
.profvis-treetable th.count {
text-align: center;
}
.profvis-treetable th.code-label {
text-align: left;
padding-left: 5px;
}
.profvis-treetable td.label-pointer {
cursor: pointer;
}
.profvis-treetable .label-text {
display: inline-block;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.profvis-treetable .path {
text-align: left;
}
.profvis-treetable .treetable-expand > div {
display: inline-block;
width: 15px;
}
.profvis-treetable .treetable-expand > div > div{
width: 0px;
height: 0px;
margin-left: 3px;
margin-right: 6px;
border-top: 4px solid transparent;
border-left: 6px solid #161616;
border-bottom: 4px solid transparent;
}
.profvis-treetable .treetable-collapse > div {
display: inline-block;
width: 15px;
}
.profvis-treetable .treetable-collapse > div > div {
width: 0px;
height: 0px;
margin-left: 3px;
margin-right: 6px;
border-right: 4px solid transparent;
border-top: 6px solid #161616;
border-left: 4px solid transparent;
display: inline-block;
}
.profvis-treetable .time-info {
padding: 0px;
padding-right: 2px;
text-align: right;
}
.profvis-treetable .timebar {
width: 0px;
height: 14px;
background-color: #5A5A5A;
float: left;
border-radius: 2px 2px 2px 2px;
padding-top: 0px;
margin-top: 1px;
}
.profvis-treetable .timecell {
padding-top: 2px;
padding-right: 3px;
}
.profvis-treetable .memory-info {
padding-left: 0px;
padding-right: 2px;
text-align: right;
}
.profvis-treetable .memory-info-right {
padding-left: 2px;
padding-right: 0px;
text-align: left;
}
.profvis-treetable .memory-leftbar-wrapper {
float: left;
height: 14px;
width: 5px;
}
.profvis-treetable .memory-leftbar {
width: 2px;
height: 14px;
background-color: #A7A7A7;
float: right;
border-radius: 1px 0px 0px 1px;
}
.profvis-treetable .memory-rightbar {
width: 2px;
float: left;
height: 14px;
background-color: #5A5A5A;
border-radius: 0px 1px 1px 0px;
}
.profvis-treetable .memory-cell {
}
.profvis-treetable .memory-bar-container {
margin-right: 3px;
}
.profvis-treetable .time-bar-container {
margin-right: 3px;
}
</style>
<script>/*jshint
  undef:true,
  browser:true,
  devel: true,
  jquery:true,
  strict:false,
  curly:false,
  indent:2
*/
/*global profvis:true, d3, hljs */

profvis = (function() {
  var profvis = {};

  profvis.render = function(el, message) {

    function generateStatusBarButton(id, caption, active) {
      var spacerImage = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAUCAYAAACnOeyiAAAAXklEQVR42mNgAIL///8zMYSGhjIDGYIMIiIMvECGMwMDN4M4kFEDUqIIZKwDMdSBjAsghj6Q8QPEMAAy/lOBoQekv4AYKkDGfgZeXl4RICOLQUtLiw3IUAJJMQIZ7AC2tU2tXJxOYgAAAABJRU5ErkJggg==';

      var buttonHtml =
        '<div id="' + id  + '" class="info-block ' +
        (active ? 'result-block-active' : 'result-block') +
        '"><span class="info-label">' + caption + '</span></div>' +
        '<div class="separator-block"><img class="separator-image" src="' + spacerImage + '"></div>';

      return buttonHtml;
    }

    function generateStatusBar(el, onToogle) {
      var $el = $(el);

      el.innerHTML =
        generateStatusBarButton('flameGraphButton', 'Flame Graph', true) +
        generateStatusBarButton('treetableButton', 'Data', false) +
        '<span role="button" class="options-button">Options &#x25BE;</span>';

      $el.find("span.options-button").on("click", function(e) {
        e.preventDefault();
        e.stopPropagation();

        vis.optionsPanel.toggleVisibility();
      });

      var setStatusBarButtons = function(e) {
        $(".info-block").removeClass("result-block-active");
        $(".info-block").addClass("result-block");
        e.addClass("result-block-active");
      };

      $el.find("#flameGraphButton").on("click", function() {
        setStatusBarButtons($(this));
        onToogle("flamegraph");
      });

      $el.find("#treetableButton").on("click", function() {
        setStatusBarButtons($(this));
        onToogle("treetable");
      });

      return {
        el: el
      };
    }

    function generateFooter(el, onToogle) {
      var $el = $(el);

      el.innerHTML =
        '<div class="info-block"><span class="info-label">Sample Interval: ' +
          vis.interval + 'ms</span></div>' +
        '<div class="info-block-right">' +
        // '<span class="info-label" title="Peak memory allocation">' + (Math.round(vis.totalMem * 100) / 100) + 'MB</span>' +
        // ' / ' +
        '<span class="info-label" title="Total time">' + vis.totalTime + 'ms</span>' +
        '</div>';

      return {
        el: el
      };
    }

    function generateOptionsPanel(el, onOptionsChange) {
      var $el = $(el);

      el.innerHTML =
        '<div role="button" class="split-horizontal">' +
          '<span class="options-checkbox" data-checked="1">' +
          (vis.splitDir === "h" ? '&#x2612;' : '&#x2610;') +
          '</span> Split horizontally' +
        '</div>' +
        '<div role="button" class="hide-internal">' +
          '<span class="options-checkbox" data-checked="1">&#x2612;</span> Hide internal function calls' +
        '</div>' +
        '<div role="button" class="hide-zero-row">' +
          '<span class="options-checkbox" data-checked="0">&#x2610;</span> Hide lines of code with zero time' +
        '</div>' +
        '<div role="button" class="hide-memory">' +
          '<span class="options-checkbox" data-checked="0">&#x2610;</span> Hide memory results' +
        '</div>';

      // Toggle the appearance of a checkbox and return the new checked state.
      function toggleCheckbox($checkbox) {
        // Use attr() instead of data(), because the latter tries to coerce to
        // numbers, which complicates our comparisons.
        var checked = $checkbox.attr("data-checked");

        if (checked === "0") {
          $checkbox.attr("data-checked", "1");
          $checkbox.html("&#x2612;");
          return true;

        } else {
          $checkbox.attr("data-checked", "0");
          $checkbox.html("&#x2610;");
          return false;
        }
      }

      $el.find(".split-horizontal")
        .on("click", function() {
          var checked = toggleCheckbox($(this).find(".options-checkbox"));
          onOptionsChange("split", checked);
        });

      $el.find(".hide-internal")
        .on("click", function() {
          var checked = toggleCheckbox($(this).find(".options-checkbox"));
          onOptionsChange("internals", checked);
        });

      $el.find(".hide-memory")
        .on("click", function() {
          var checked = toggleCheckbox($(this).find(".options-checkbox"));
          onOptionsChange("memory", checked);
        });

      // Make the "hide internal" option available or unavailable to users
      function enableHideInternal() {
        $el.find(".hide-internal").css("display", "");
      }
      function disableHideInternal() {
        $el.find(".hide-internal").css("display", "none");
      }
      // By default, start with it unavailable; it's only relevant for Shiny
      // apps.
      disableHideInternal();


      $el.find(".hide-zero-row")
        .on("click", function() {
          var checked = toggleCheckbox($(this).find(".options-checkbox"));

          if (checked) {
            vis.codeTable.hideZeroTimeRows();
          } else {
            vis.codeTable.showZeroTimeRows();
          }
        });

      el.style.visibility = "hidden";
      function toggleVisibility(offset) {
        if (el.style.visibility === "visible") {
          el.style.visibility = "hidden";
        } else {
          el.style.visibility = "visible";
          $(document).on("click", hideOnClickOutside);
        }
      }

      // Hide the panel when a click happens outside. This handler also removes
      // itself after it fires.
      function hideOnClickOutside(e) {
        var $el = $(el);
        if (!$el.is(e.target) && $el.has(e.target).length === 0) {
          el.style.visibility = "hidden";
          // Unregister this event listener
          $(document).off("click", hideOnClickOutside);
        }
      }

      return {
        el: el,
        toggleVisibility: toggleVisibility,
        enableHideInternal: enableHideInternal,
        disableHideInternal: disableHideInternal
      };
    }

    function notifySourceFileMessage(d, details) {
      if (window.parent.postMessage) {
        window.parent.postMessage({
          source: "profvis",
          message: "sourcefile",
          file: d.filename,
          normpath: d.normpath ? d.normpath : getNormPath(vis.files, d.filename),
          line: d.linenum,
          details: details
        }, window.location.origin);
      }
    }

    function roundOneDecimalNum(number, decimals) {
      return Math.round(number * 10) / 10;
    }

    function roundOneDecimal(number, decimals) {
      if (!number) return 0;
      return roundOneDecimalNum(number).toFixed(1);
    }

    // Generate the code table ----------------------------------------
    function generateCodeTable(el) {
      var useMemory = false;
      var content = d3.select(el);

      if (vis.fileLineStats.length === 0) {
        content.append("div")
          .attr("class", "profvis-message")
          .append("div")
            .text("(Sources not available)");
      }

      // One table for each file
      var tables = content.selectAll("table")
          .data(vis.fileLineStats)
        .enter()
          .append("table")
          .attr("class", "profvis-table");

      // Table headers
      var headerRows = tables.append("tr");
      headerRows.append("th")
        .attr("colspan", "2")
        .attr("class", "filename")
        .text(function(d) { return d.filename; });

      var percentTooltip = "Percentage of tracked execution time";
      var percentMemTooltip = "Percentage of peak memory deallocation and allocation";

      headerRows.append("th")
        .attr("class", "table-memory memory")
        .attr("colspan", "4")
        .text("Memory");

      headerRows.append("th")
        .attr("class", "time")
        .attr("colspan", "2")
        .text("Time");

      headerRows.append("th")
        .attr("class", "spacing")
        .attr("data-pseudo-content", "\u00a0");

      // Insert each line of code
      var rows = tables.selectAll("tr.code-row")
          .data(function(d) { return d.lineData; })
        .enter()
          .append("tr")
          .attr("class", "code-row");

      // Use pseudo-content and CSS content rule to make text unselectable and
      // uncopyable. See https://danoc.me/blog/css-prevent-copy/
      rows.append("td")
        .attr("class", "linenum")
        .attr("data-pseudo-content", function(d) { return d.linenum; });

      rows.append("td")
        .attr("class", "code r")
        .text(function(d) { return d.content; })
        .each(function() { hljs.highlightElement(this); });

      rows.append("td")
        .attr("class", "table-memory memory")
        .attr("title", "Memory deallocation (MB)")
        .attr("data-pseudo-content",
              function(d) { return roundOneDecimalNum(d.sumMemDealloc) !== 0 ? roundOneDecimal(d.sumMemDealloc) : ""; });

      rows.append("td")
        .attr("class", "table-memory membar-left-cell")
        .append("div")
          .attr("class", "membar")
          .attr("title", percentMemTooltip)
          .style("width", function(d) {
            var p = Math.min(Math.abs(Math.min(Math.round(d.propMemDealloc * 100), 0)), 100);

            // 8% is the minimal size that looks visually appealing while drawing an almost empty bar
            p = roundOneDecimalNum(d.sumMemDealloc) !== 0 ? Math.max(p, 8) : 0;
            return p + "%";
          })
          // Add the equivalent of &nbsp; to be added with CSS content
          .attr("data-pseudo-content", "\u00a0");

      rows.append("td")
        .attr("class", "table-memory membar-right-cell")
        .append("div")
          .attr("class", "membar")
          .attr("title", percentMemTooltip)
          .style("width", function(d) {
            var p = Math.min(Math.max(Math.round(d.propMemAlloc * 100), 0), 100);

            // 4% is the minimal size that looks visually appealing while drawing an almost empty bar
            p = roundOneDecimalNum(d.sumMemAlloc) !== 0 ? Math.max(p, 4) : 0;
            return p + "%";
          })
          // Add the equivalent of &nbsp; to be added with CSS content
          .attr("data-pseudo-content", "\u00a0");

      rows.append("td")
        .attr("class", "table-memory memory memory-right")
        .attr("title", "Memory allocation (MB)")
        .attr("data-pseudo-content",
              function(d) { return roundOneDecimalNum(d.sumMemAlloc) !== 0 ? roundOneDecimal(d.sumMemAlloc) : ""; });

      rows.append("td")
        .attr("class", "time")
        .attr("title", "Total time (ms)")
        .attr("data-pseudo-content",
              function(d) { return Math.round(d.sumTime * 100) !== 0 ? (Math.round(d.sumTime * 100) / 100) : ""; });

      rows.append("td")
        .attr("class", "timebar-cell")
        .append("div")
          .attr("class", "timebar")
          .attr("title", percentTooltip)
          .style("width", function(d) {
            return Math.round(d.propTime * 100) + "%";
          })
          // Add the equivalent of &nbsp; to be added with CSS content
          .attr("data-pseudo-content", "\u00a0");

      rows.append("td")
        .attr("class", "spacing")
        .attr("data-pseudo-content", "\u00a0");

      rows
        .on("click", function(d) {
          // Info box is only relevant when mousing over flamegraph
          vis.infoBox.hide();
          highlighter.click(d);
          notifySourceFileMessage(d, "select");
        })
        .on("mouseover", function(d) {
          if (highlighter.isLocked()) return;

          // Info box is only relevant when mousing over flamegraph
          vis.infoBox.hide();
          highlighter.hover(d);
        })
        .on("mouseout", function(d) {
          if (highlighter.isLocked()) return;

          highlighter.hover(null);
        })
        .on("dblclick", function(d) {
          notifySourceFileMessage(d, "open");
        });

      function hideZeroTimeRows() {
        rows
          .filter(function(d) { return d.sumTime === 0; })
          .style("display", "none");
      }

      function showZeroTimeRows() {
        rows
          .filter(function(d) { return d.sumTime === 0; })
          .style("display", "");
      }

      function addLockHighlight(d) {
        var target = d;
        rows
          .filter(function(d) { return d === target; } )
          .classed({ locked: true });
      }

      function clearLockHighlight() {
        rows
          .filter(".locked")
          .classed({ locked: false });
      }

      function addActiveHighlight(d) {
        // If we have filename and linenum, search for cells that match, and
        // set them as "active".
        var target = d;
        if (target.filename && target.linenum) {
          var tr = rows
            .filter(function(d) {
              return d.linenum === target.linenum &&
                     d.filename === target.filename;
            })
            .classed({ active: true });

          tr.node().scrollIntoViewIfNeeded();
        }
      }

      function clearActiveHighlight() {
        rows
          .filter(".active")
          .classed({ active: false });
      }

      function enableScroll() {
        // TODO: implement this
      }

      function disableScroll() {
      }

      function useMemoryResults() {
        d3.selectAll(".table-memory").style("display", vis.hideMemory ? "none" : "");
      }

      return {
        el: el,
        hideZeroTimeRows: hideZeroTimeRows,
        showZeroTimeRows: showZeroTimeRows,
        addLockHighlight: addLockHighlight,
        clearLockHighlight: clearLockHighlight,
        addActiveHighlight: addActiveHighlight,
        clearActiveHighlight: clearActiveHighlight,
        enableScroll: enableScroll,
        disableScroll: disableScroll,
        useMemoryResults: useMemoryResults
      };
    }


    var highlighter = (function() {
      // D3 data objects for the currently locked and active items
      var lockItem = null;
      var activeItem = null;

      function isLocked() {
        return lockItem !== null;
      }

      function currentLock() {
        return lockItem;
      }

      function currentActive() {
        return activeItem;
      }


      // This is called when a flamegraph cell or a line of code is clicked on.
      // Clicks also should trigger hover events.
      function click(d) {
        // If d is null (background is clicked), or if locked and this click
        // is on the currently locked selection, just unlock and return.
        if (d === null || (lockItem && d === lockItem)) {
          lockItem = null;
          vis.flameGraph.clearLockHighlight();
          vis.codeTable.clearLockHighlight();
          return;
        }

        // If nothing currently locked, or if locked and this click is on
        // something other than the currently locked selection, then lock the
        // current selection.
        lockItem = d;

        vis.flameGraph.clearLockHighlight();
        vis.codeTable.clearLockHighlight();
        hover(null);

        vis.flameGraph.addLockHighlight(d);
        vis.codeTable.addLockHighlight(d);
        hover(d);
      }


      function hover(d) {
        activeItem = d;

        if (activeItem) {
          vis.flameGraph.addActiveHighlight(activeItem);
          vis.codeTable.addActiveHighlight(activeItem);
          return;
        }

        vis.flameGraph.clearActiveHighlight();
        vis.codeTable.clearActiveHighlight();
      }

      return {
        isLocked: isLocked,
        currentLock: currentLock,
        currentActive: currentActive,

        click: click,
        hover: hover
      };
    })();


    // Generate the flame graph -----------------------------------------------
    function generateFlameGraph(el) {
      el.innerHTML = "";

      var stackHeight = 15;   // Height of each layer on the stack, in pixels
      var zoomMargin = 0.02;  // Extra margin on sides when zooming to fit

      // Dimensions -----------------------------------------------------------

      // Margin inside the svg where the plotting occurs
      var dims = {
        margin: { top: 0, right: 0, left: 0, bottom: 30 }
      };
      dims.width = el.clientWidth - dims.margin.left - dims.margin.right;
      dims.height = el.clientHeight - dims.margin.top - dims.margin.bottom;

      var domains = {
        x: [
          d3.min(vis.prof, function(d) { return d.startTime; }),
          d3.max(vis.prof, function(d) { return d.endTime; })
        ],
        y: [
          d3.min(vis.prof, function(d) { return d.depth; }) - 1,
          d3.max(vis.prof, function(d) { return d.depth; })
        ]
      };
      // Slightly expand x domain
      domains.x = expandRange(domains.x, zoomMargin);

      // Scales ---------------------------------------------------------------
      var scales = {
        x: d3.scale.linear()
            .domain(domains.x)
            .range([0, dims.width]),

        y: d3.scale.linear()
            .domain(domains.y)
            .range([dims.height, dims.height - (domains.y[1] - domains.y[0]) * stackHeight]),

        // This will be a function that, given a data point, returns the depth.
        // This function can change; sometimes it returns the original depth,
        // and sometimes it returns the collapsed depth. This isn't exactly a
        // scale function, but it's close enough for our purposes.
        getDepth: null
      };

      function useCollapsedDepth() {
        scales.getDepth = function(d) { return d.depthCollapsed; };
      }
      function useUncollapsedDepth() {
        scales.getDepth = function(d) { return d.depth; };
      }

      useCollapsedDepth();

      // SVG container objects ------------------------------------------------
      var svg = d3.select(el).append('svg');

      var clipRect = svg.append("clipPath")
          .attr("id", "clip-" + vis.el.id)
        .append("rect");

      var container = svg.append('g')
        .attr("transform", "translate(" + dims.margin.left + "," + dims.margin.top + ")")
        .attr("clip-path", "url(" + urlNoHash() + "#clip-" + vis.el.id + ")");

      // Add a background rect so we have something to grab for zooming/panning
      var backgroundRect = container.append("rect")
        .attr("class", "background");

      // Axes ------------------------------------------------------------
      var xAxis = d3.svg.axis()
        .scale(scales.x)
        .orient("bottom");

      svg.append("g")
        .attr("class", "x axis")
        .call(xAxis);

      // Container sizing -----------------------------------------------------
      // Update dimensions of various container elements, based on the overall
      // dimensions of the containing div.
      function updateContainerSize() {
        dims.width = el.clientWidth - dims.margin.left - dims.margin.right;
        dims.height = el.clientHeight - dims.margin.top - dims.margin.bottom;

        svg
          .attr('width', dims.width + dims.margin.left + dims.margin.right)
          .attr('height', dims.height + dims.margin.top + dims.margin.bottom);

        clipRect
          .attr("x", dims.margin.left)
          .attr("y", dims.margin.top)
          .attr("width", dims.width)
          .attr("height", dims.height);

        backgroundRect
          .attr("width", dims.width)
          .attr("height", dims.height);

        svg.select(".x.axis")
          .attr("transform", "translate(" + dims.margin.left + "," + dims.height + ")");
      }


      // Redrawing ------------------------------------------------------------

      // Redrawing is a little complicated. For performance reasons, the
      // flamegraph cells that are offscreen aren't rendered; they're removed
      // from the D3 selection of cells. However, when transitions are
      // involved, it may be necssary to add objects in their correct
      // off-screen starting locations before the transition, and then do the
      // transition. Similarly, it may be necssary to transition objects to
      // their correct off-screen ending positions.
      //
      // In order to handle this, whenever there's a transition, we need to
      // have the scales for before the transition, and after. When a function
      // invokes a transition, it will generally do the following: (1) save the
      // previous scales, (2) modify the current scales, (3) call a redraw
      // function. The redraw functions are customized for different types of
      // transitions, and they will use the saved previous scales to position
      // objects correctly for the transition. When there's no transition, the
      // previous scales aren't needed, and the redrawImmediate() function
      // should be used.

      // Cache cells for faster access (avoid a d3.select())
      var cells;

      // For a data element, return identifying key
      function dataKey(d) {
        return d.depth + "-" + d.startTime + "-" + d.endTime;
      }

      // For transitions with animation, we need to have a copy of the previous
      // scales in addition to the current ones.
      var prevScales = {};
      function savePrevScales() {
        prevScales = {
          x:        scales.x.copy(),
          y:        scales.y.copy(),
          getDepth: scales.getDepth
        };
      }
      savePrevScales();


      // Returns a D3 selection of the cells that are within the plotting
      // region, using a set of scales.
      function selectActiveCells(scales) {
        var xScale = scales.x;
        var yScale = scales.y;
        var depth = scales.getDepth;
        var width = dims.width;
        var height = dims.height;

        var data = vis.prof.filter(function(d) {
          var depthVal = depth(d);
          return !(xScale(d.endTime)    < 0      ||
                   xScale(d.startTime)  > width  ||
                   depthVal           === null   ||
                   yScale(depthVal - 1) < 0      ||
                   yScale(depthVal)     > height);
        });

        cells = container.selectAll("g.cell").data(data, dataKey);

        return cells;
      }

      // Given an enter selection, add the rect and text objects, but don't
      // position them. Returns a selection of the new <g> elements.
      // This should usually be called with addItems(sel.enter()) instead
      // of sel.enter().call(addItems), because the latter returns the original
      // enter selection, not the selection of <g> elements, and can't be
      // used for chaining more function calls on the <g> selection.
      function addItems(enterSelection) {
        var cells = enterSelection.append("g")
          .attr("class", "cell")
          .classed("highlighted", function(d) { return d.filename !== null; })
          .call(addMouseEventHandlers);

        // Add CSS classes for highlighting cells with labels that match particular
        // regex patterns.
        var highlightPatterns = d3.entries(message.highlight);
        highlightPatterns.map(function(item) {
          var cssClass = item.key;
          var regexp = new RegExp(item.value);

          cells.classed(cssClass, function(d) {
            return d.label.search(regexp) !== -1;
          });
        });

        cells.append("rect")
          .attr("class", "rect");

        cells.append("text")
          .attr("class", "profvis-label")
          .text(function(d) { return d.label; });

        return cells;
      }

      // Given a selection, position the rects and labels, using a set of
      // scales.
      function positionItems(cells, scales) {
        var xScale = scales.x;
        var yScale = scales.y;
        var depth = scales.getDepth;

        cells.select("rect")
          .attr("width", function(d) {
            return xScale(d.endTime) - xScale(d.startTime);
          })
          .attr("height", yScale(0) - yScale(1))
          .attr("x", function(d) { return xScale(d.startTime); })
          .attr("y", function(d) { return yScale(depth(d)); });

        cells.select("text")
          .attr("x", function(d) {
            // To place the labels, check if there's enough space to fit the
            // label plus padding in the rect. (We already know the label fits
            // without padding if we got here.)
            // * If there's not enough space, simply center the label in the
            //   rect.
            // * If there is enough space, keep the label within the rect, with
            //   padding. Try to left-align, keeping the label within the
            //   viewing area if possible.

            // Padding on left and right
            var pad = 2;

            var textWidth = getLabelWidth(this, d.label.length);
            var rectWidth = xScale(d.endTime) - xScale(d.startTime);

            if (textWidth + pad*2 > rectWidth) {
              return xScale(d.startTime) + (rectWidth - textWidth) / 2;
            } else {
              return Math.min(
                Math.max(0, xScale(d.startTime)) + pad,
                xScale(d.endTime) - textWidth - pad
              );
            }
          })
          .attr("y", function(d) { return yScale(depth(d) - 0.8); });

        return cells;
      }


      // Redraw without a transition (regular panning and zooming)
      function redrawImmediate() {
        cells = selectActiveCells(scales);

        cells.exit().remove();
        addItems(cells.enter())
          .call(addLockHighlightSelection, highlighter.currentLock())
          .call(addActiveHighlightSelection, highlighter.currentActive());
        cells.call(positionItems, scales);
        cells.select('text')
          .call(updateLabelVisibility);
        svg.select(".x.axis").call(xAxis);
      }

      // Redraw for double-click zooming, where there's a transition
      function redrawZoom(duration) {
        // Figure out if we're zooming in or out. This will determine when we
        // recalculate the label visibility: before or after the transition.
        var prevExtent = prevScales.x.domain()[1] - prevScales.x.domain()[0];
        var curExtent = scales.x.domain()[1] - scales.x.domain()[0];
        var zoomIn = curExtent < prevExtent;

        cells = selectActiveCells(scales);

        // Phase 1
        // Add the enter items, highlight them, and position them using the
        // previous scales
        addItems(cells.enter())
          .call(addLockHighlightSelection, highlighter.currentLock())
          .call(addActiveHighlightSelection, highlighter.currentActive())
          .call(positionItems, prevScales);

        // If zooming out, update label visibility. This will hide some labels
        // now, before the transition, ensuring that they will never be larger
        // than the box.
        if (!zoomIn) {
          cells.select('text')
            .call(updateLabelVisibility);
        }

        // Phase 2
        // Position the update (and enter) items using the new scales
        cells
          .transition().duration(duration)
            .call(positionItems, scales);

        // Position the exit items using the new scales
        cells.exit()
          .transition().duration(duration)
            .call(positionItems, scales);

        // Update x axis
        svg.select(".x.axis")
          .transition().duration(duration)
            .call(xAxis);

        // Phase 3
        // If zooming in, update label visibility. This will hide some labels
        // now, after the transition, ensuring that they will never be larger
        // than the box.
        if (zoomIn) {
          cells.select('text')
            .transition().delay(duration)
            .call(updateLabelVisibility);
        }

        // Remove the exit items
        cells.exit()
          .transition().delay(duration)
            .remove();
      }

      // Redraw when internal functions are hidden
      function redrawCollapse(exitDuration, updateDuration) {
        cells = selectActiveCells(scales);

        // There are two subsets of the exit items:
        //   1. Those that exit because depth is null. These should fade out.
        //   2. Those that exit because they move off screen. These should wait
        //      for subset 1 to fade out, then move with a transition.
        var fadeOutCells = cells.exit()
          .filter(function(d) { return scales.getDepth(d) === null; });
        var moveOutCells = cells.exit()
          .filter(function(d) { return scales.getDepth(d) !== null; });

        // Phase 1
        // Add the enter items, highlight them, and position them using the
        // previous scales
        addItems(cells.enter())
          .call(addLockHighlightSelection, highlighter.currentLock())
          .call(addActiveHighlightSelection, highlighter.currentActive())
          .call(positionItems, prevScales);

        cells.select('text')
          .call(updateLabelVisibility);

        // Phase 2
        // Fade out the items that have a null depth
        fadeOutCells
          .transition().duration(exitDuration)
            .style("opacity", 0);

        // Phase 3
        // Position the update (and enter) items using the new scales
        cells
          .transition().delay(exitDuration).duration(updateDuration)
            .call(positionItems, scales);

        // Position the exit items that move out, using the new scales
        moveOutCells
          .transition().delay(exitDuration).duration(updateDuration)
            .call(positionItems, scales);

        // Phase 4
        // Remove all the exit items
        cells.exit()
          .transition().delay(exitDuration + updateDuration)
          .remove();
      }

      // Redraw when internal functions are un-hidden
      function redrawUncollapse(updateDuration, enterDuration) {
        cells = selectActiveCells(scales);

        var enterCells = addItems(cells.enter());
        // There are two subsets of the enter items:
        //   1. Those that enter because they move on screen (but the previous
        //      depth was not null). These should move with a transition.
        //   2. Those that enter because the previous depth was null. These
        //      should wait for subset 1 to move, then fade in.
        var moveInCells = enterCells
          .filter(function(d) { return prevScales.getDepth(d) !== null; });
        var fadeInCells = enterCells
          .filter(function(d) { return prevScales.getDepth(d) === null; });

        // Phase 1
        // Highlight and position the move-in items with the old scales
        moveInCells
          .call(addLockHighlightSelection, highlighter.currentLock())
          .call(addActiveHighlightSelection, highlighter.currentActive())
          .call(positionItems, prevScales);

        cells.select('text')
          .call(updateLabelVisibility);

        // Phase 2
        // Position the move-in, update, and exit items with a transition
        moveInCells
          .transition().duration(updateDuration)
            .call(positionItems, scales);
        cells
          .transition().duration(updateDuration)
            .call(positionItems, scales);
        cells.exit()
          .transition().duration(updateDuration)
            .call(positionItems, scales);

        // Phase 3
        // Highlight and position the fade-in items, then fade in
        fadeInCells
            .call(addLockHighlightSelection, highlighter.currentLock())
            .call(addActiveHighlightSelection, highlighter.currentActive())
            .call(positionItems, scales)
            .style("opacity", 0)
          .transition().delay(updateDuration).duration(enterDuration)
            .style("opacity", 1);

        // Phase 4
        // Remove the exit items
        cells.exit()
          .transition().delay(updateDuration + enterDuration)
            .remove();
      }


      // Calculate whether to display label in each cell ----------------------

      // Finding the dimensions of SVG elements is expensive. We'll reduce the
      // calls getBoundingClientRect() by caching the dimensions.

      // Cache the width of labels. This is a lookup table which, given the
      // number of characters, gives the number of pixels. The label width
      // never changes, so we can keep it outside of updateLabelVisibility().
      var labelWidthTable = {};
      function getLabelWidth(el, nchar) {
        // Add entry if it doesn't already exist
        if (labelWidthTable[nchar] === undefined) {
          // If the text isn't displayed, then we can't get its width. Make
          // sure it's visible, get the width, and then restore original
          // display state.
          var oldDisplay = el.style.display;
          el.style.display = "inline";
          labelWidthTable[nchar] = el.getBoundingClientRect().width;
          el.style.display = oldDisplay;
        }
        return labelWidthTable[nchar];
      }

      // Show labels that fit in the corresponding rectangle, and hide others.
      function updateLabelVisibility(labels) {
        // Cache the width of rects. This is a lookup table which, given the
        // timespan (width in data), gives the number of pixels. The width of
        // rects changes with the x scale, so we have to rebuild the table each
        // time the scale changes.
        var rectWidthTable = {};
        var x0 = scales.x(0);
        function getRectWidth(time) {
          // Add entry if it doesn't already exist
          if (rectWidthTable[time] === undefined) {
            rectWidthTable[time] = scales.x(time) - x0;
          }
          return rectWidthTable[time];
        }

        // Now calculate text and rect width for each cell.
        labels.style("display", function(d) {
          var labelWidth = getLabelWidth(this, d.label.length);
          var boxWidth = getRectWidth(d.endTime - d.startTime);

          return (labelWidth <= boxWidth) ? "" : "none";
        });

        return labels;
      }


      function onResize() {
        updateContainerSize();

        scales.x.range([0, dims.width]);
        zoom.x(scales.x);

        // Preserve distance from bottom, instead of from top (which is the
        // default behavior).
        scales.y.range([
          dims.height,
          dims.height - (domains.y[1] - domains.y[0]) * stackHeight
        ]);
        redrawImmediate();
      }

      // Attach mouse event handlers ------------------------------------
      var dragging = false;

      function addMouseEventHandlers(cells) {
        cells
          .on("mouseup", function(d) {
            if (dragging) return;

            // If it wasn't a drag, treat it as a click
            vis.infoBox.show(d);
            highlighter.click(d);
            notifySourceFileMessage(d, "select");
          })
          .on("mouseover", function(d) {
            if (dragging) return;

            // If no label currently shown, display a tooltip
            var label = this.querySelector(".profvis-label");
            if (label.style.display === "none") {
              var box = this.getBBox();
              showTooltip(
                d.label,
                box.x + box.width / 2,
                box.y - box.height
              );
            }

            if (!highlighter.isLocked()) {
              vis.infoBox.show(d);
              highlighter.hover(d);
            }
          })
          .on("mouseout", function(d) {
            if (dragging) return;

            hideTooltip();

            if (!highlighter.isLocked()) {
              vis.infoBox.hide();
              highlighter.hover(null);
            }
          })
          .on("dblclick.zoomcell", function(d) {
            // When a cell is double-clicked, zoom x to that cell's width.
            savePrevScales();

            scales.x.domain(expandRange([d.startTime, d.endTime], zoomMargin));
            zoom.x(scales.x);

            redrawZoom(250);

            notifySourceFileMessage(d, "open");
          });

        return cells;
      }

      // Tooltip --------------------------------------------------------
      function showTooltip(label, x, y) {
        var tooltip = container.append("g").attr("class", "profvis-tooltip");
        var tooltipRect = tooltip.append("rect");
        var tooltipLabel = tooltip.append("text")
          .text(label)
          .attr("x", x)
          .attr("y", y + stackHeight * 0.2); // Shift down slightly for baseline

        // Add box around label
        var labelBox = tooltipLabel.node().getBBox();
        var rectWidth = labelBox.width + 10;
        var rectHeight = labelBox.height + 4;
        tooltipRect
          .attr("width", rectWidth)
          .attr("height", rectHeight)
          .attr("x", x - rectWidth / 2)
          .attr("y", y - rectHeight / 2)
          .attr("rx", 4)    // Rounded corners -- can't set this in CSS
          .attr("ry", 4);
      }

      function hideTooltip() {
        container.select("g.profvis-tooltip").remove();
      }


      // Highlighting ---------------------------------------------------------

      function addLockHighlight(d) {
        addLockHighlightSelection(cells, d);
      }

      function clearLockHighlight() {
        cells
          .filter(".locked")
          .classed({ locked: false });
      }


      function addActiveHighlight(d) {
        if (!d) return;
        addActiveHighlightSelection(cells, d);
      }

      function clearActiveHighlight() {
        cells
          .filter(".active")
          .classed({ active: false });
      }

      // These are versions of addLockHighlight and addActiveHighlight which
      // are only internally visible. It must be passed a selection of cells to
      // perform the highlighting on. This can be more efficient because it can
      // operate on just an enter selection instead of all cells.
      function addLockHighlightSelection(selection, d) {
        if (!d) return;

        var target = d;
        selection
          .filter(function(d) { return d === target; } )
          .classed({ locked: true })
          .call(moveToFront);
      }

      function addActiveHighlightSelection(selection, d) {
        if (!d) return;

        var target = d;
        if (target.filename && target.linenum) {
          selection
            .filter(function(d) {
              // Check for filename and linenum match, and if provided, a label match.
              var match = d.filename === target.filename &&
                          d.linenum === target.linenum;
              if (!!target.label) {
                match = match && (d.label === target.label);
              }
              return match;
            })
            .classed({ active: true });

        } else if (target.label) {
          // Don't highlight blocks for these labels
          var exclusions = ["<Anonymous>", "FUN"];
          if (exclusions.some(function(x) { return target.label === x; })) {
            return;
          }

          // If we only have the label, search for cells that match, but make sure
          // to not select ones that have a filename and linenum.
          selection
            .filter(function(d) {
              return d.label === target.label &&
                     d.filename === null &&
                     d.linenum === null;
            })
            .classed({ active: true });
        }
      }

      // Move a D3 selection to front. If this is called on a selection, that
      // selection should have been created with a data indexing function (e.g.
      // data(data, function(d) { return ... })). Otherwise, the wrong object
      // may be moved to the front.
      function moveToFront(selection) {
        return selection.each(function() {
          this.parentNode.appendChild(this);
        });
      }


      // Panning and zooming --------------------------------------------
      // For panning and zooming x, d3.behavior.zoom does most of what we want
      // automatically. For panning y, we can't use d3.behavior.zoom becuase it
      // will also automatically add zooming, which we don't want. Instead, we
      // need to use d3.behavior.drag and set the y domain appropriately.
      var drag = d3.behavior.drag()
        .on("drag", function() {
          dragging = true;
          var y = scales.y;
          var ydom = y.domain();
          var ydiff = y.invert(d3.event.dy) - y.invert(0);
          y.domain([ydom[0] - ydiff, ydom[1] - ydiff]);
        });


      // For mousewheel zooming, we need to limit zoom amount. This is needed
      // because in Firefox, zoom increments are too big. To do this, we limit
      // scaleExtent before the first zoom event, and after each subsequent
      // one.
      //
      // When zooming out, there's an additional limit: never zoom out past
      // the original zoom span. The reason it's necessary to calculate this
      // each time, instead of simply setting the scaleExtent() so that the
      // lower bound is 1, is because other zoom events (like
      // dblclick.zoomcell) are able to change the domain of scales.x, without
      // changing the value of zoom.scale(). This means that the relationship
      // between the zoom.scale() does not have a fixed linear relationship to
      // the span of scales.x, and we have to recalculate it.
      var maxZoomPerStep = 1.1;

      function zoomOutLimit() {
        var span = scales.x.domain()[1] - scales.x.domain()[0];
        var startSpan = domains.x[1] - domains.x[0];
        return Math.min(maxZoomPerStep, startSpan/span);
      }

      var zoom = d3.behavior.zoom()
        .x(scales.x)
        .on("zoomstart", function() {
          zoom.scaleExtent([zoom.scale() / zoomOutLimit(), zoom.scale() * maxZoomPerStep]);
        })
        .on("zoom", function(e) {
          redrawImmediate();
          zoom.scaleExtent([zoom.scale() / zoomOutLimit(), zoom.scale() * maxZoomPerStep]);
        });

      // Register drag before zooming, because we need the drag to set the y
      // scale before the zoom triggers a redraw.
      svg
        .on("mouseup", function(d) {
          dragging = false;
        })
        .call(drag);

      // Unlock selection when background is clicked, and zoom out when
      // background is double-clicked.
      backgroundRect
        .on("mouseup", function(d) {
          if (dragging) return;

          // If it wasn't a drag, hide info box and unlock.
          vis.infoBox.hide();
          highlighter.click(null);
        })
        .on("dblclick.zoombackground", function() {
          savePrevScales();

          scales.x.domain(domains.x);
          zoom.x(scales.x);

          redrawZoom(250);
        });


      var zoomEnabled = false;
      function disableZoom() {
        if (zoomEnabled) {
          svg.on(".zoom", null);
          zoomEnabled = false;
        }
      }
      function enableZoom() {
        if (!zoomEnabled) {
          svg
            .call(zoom)
            .on("dblclick.zoom", null); // Disable zoom's built-in double-click behavior
          zoomEnabled = true;
        }
      }
      enableZoom();

      onResize();

      return {
        el: el,
        onResize: onResize,
        onUpdateInternals: onResize,
        redrawImmediate: redrawImmediate,
        redrawZoom: redrawZoom,
        redrawCollapse: redrawCollapse,
        redrawUncollapse: redrawUncollapse,
        savePrevScales: savePrevScales,
        useCollapsedDepth: useCollapsedDepth,
        useUncollapsedDepth: useUncollapsedDepth,
        addLockHighlight: addLockHighlight,
        clearLockHighlight: clearLockHighlight,
        addActiveHighlight: addActiveHighlight,
        clearActiveHighlight: clearActiveHighlight,
        disableZoom: disableZoom,
        enableZoom: enableZoom
      };
    } // generateFlameGraph


    function initInfoBox(el) {

      function show(d) {
        var label = d.label ? d.label : "";
        var ref = (d.filename && d.linenum) ?
          (d.filename + "#" + d.linenum) :
          "(source unavailable)";

        el.style.visibility = "";

        el.innerHTML =
          "<table>" +
          "<tr><td class='infobox-title'>Label</td><td>" + escapeHTML(label) + "</td></tr>" +
          "<tr><td class='infobox-title'>Called from</td><td>" + escapeHTML(ref) + "</td></tr>" +
          "<tr><td class='infobox-title'>Total time</td><td>" + (d.endTime - d.startTime) + "ms</td></tr>" +
          "<tr><td class='infobox-title'>Memory</td><td>" +
            roundOneDecimal(d.sumMemDealloc) + " / " + roundOneDecimal(d.sumMemAlloc) +
            " MB</td></tr>" +
          "<tr><td class='infobox-title'>Agg. total time</td><td>" + vis.aggLabelTimes[label] + "ms</td></tr>" +
          "<tr><td class='infobox-title'>Call stack depth</td><td>" + d.depth + "</td></tr>" +
          "</table>";
      }

      function hide() {
        el.style.visibility = "hidden";
      }

      hide();

      return {
        el: el,
        show: show,
        hide: hide
      };
    }

    // Generate the tree table ----------------------------------------
    function generateTreetable(el) {
      var content = d3.select(el);

      var table = content.append("table")
          .attr("class", "results")
          .attr("cellspacing", "0")
          .attr("cellpadding", "0");

      table.append("col");
      table.append("col")
        .style("width", "120px");
      table.append("col")
        .style("width", "50px")
        .attr("class", "treetable-memory");
      table.append("col")
        .style("width", "26px")
        .attr("class", "treetable-memory");
      table.append("col")
        .style("width", "50px")
        .attr("class", "treetable-memory");
      table.append("col")
        .style("width", "50px");
      table.append("col")
        .style("width", "40px");

      var tableBody = table.append("tbody");

      var headerRows = tableBody.append("tr");

      headerRows.append("th")
        .attr("class", "code-label")
        .text("Code");

      headerRows.append("th")
        .attr("class", "path")
        .text("File");

      headerRows.append("th")
        .attr("class", "treetable-memory memory")
        .attr("colspan", "3")
        .text("Memory (MB)");

      headerRows.append("th")
        .attr("class", "time")
        .attr("colspan", "2")
        .text("Time (ms)");

      // Retrieve all nodes (n), recursevely, where check(n) == true.
      function allTopNodes(nodes, check) {
        var included = [];
        nodes = nodes.slice();

        while (nodes.length > 0) {
          var node = nodes.shift();

          if (check(node))
            included.push(node);
          else {
            node.sumChildren.forEach(function(c1) {
              nodes.unshift(c1);
            });
          }
        }
        return included;
      }

      // Is there one node (n), including root, where check(n) == true?
      function oneNode(root, check) {
        var nodes = [root];

        while (nodes.length > 0) {
          var n = nodes.shift();
          if (check(n))
            return true;

          n.sumChildren.forEach(function(x) {
            nodes.unshift(x);
          });
        }

        return false;
      }

      function updateRowsDisplay(d) {
        if (vis.hideInternals && d.isInternal)
          return "none";
        else if (!vis.hideInternals && d.isDescendant)
          return "none";

        var collapsed = false;
        while (d.parent) {
          d = d.parent;
          if (d.collapsed) {
            collapsed = true;
            break;
          }
        }
        return collapsed ? "none" : "";
      }

      function toggleTreeNode(d) {
        if (!d.canExpand)
          return;

        var collapsed = d.collapsed;
        if (collapsed === undefined) {
          // Create a copy since we might insert the same node twice: once
          // for the normal leaf the other one for a collapsed node.
          var sumChildren = d.sumChildren.map(function(x) {
            return jQuery.extend({}, x);
          });

          var childNodes = sumChildren.filter(function(x) {
            return x.depthCollapsed !== null;
          });

          childNodes.forEach(function(x) {
            x.isInternal = d.isInternal ? d.isInternal : false;
            x.isDescendant = d.isDescendant ? d.isDescendant : false;
          });

          var internalChildNodes = sumChildren.filter(function(x) {
            return x.depthCollapsed === null;
          });

          internalChildNodes.forEach(function(x) {
            x.isInternal = true;
            x.isDescendant = false;
          });

          var notInternalDescendantNodes = [];
          if (!d.isInternal) {
            notInternalDescendantNodes = allTopNodes(internalChildNodes, function(x) {
              return x.depthCollapsed !== null && d.depth < x.depth;
            });
          }

          notInternalDescendantNodes.forEach(function(x) {
            x.isInternal = false;
            x.isDescendant = true;
          });

          childNodes = childNodes.concat(internalChildNodes);
          childNodes = childNodes.concat(notInternalDescendantNodes);

          childNodes.forEach(function(n) {
            n.visualDepth = d.visualDepth + 1;
            n.parent = d;
          });

          vis.profTable = vis.profTable.concat(childNodes);
          d.collapsed = false;

          updateRows();

          // Nodes are sorted "heaviest first"
          if (childNodes.length == 1) toggleTreeNode(childNodes[0]);
        }
        else {
          d.collapsed = !collapsed;
          updateRows();
        }
      }

      function updateLabelCells(labelCell) {
        labelCell
          .attr("nowrap", "true")
          .style("padding-left", function(d) {
            return (8 + 15 * (d.visualDepth - 1)) + "px";
          })
          .on("click", toggleTreeNode)
          .attr("class", function(d) {
            d.canExpand = false;
            if (d.sumChildren) {
              d.sumChildren.forEach(function(c) {
                if (c.sumChildren.length > 0) {
                  if (!vis.hideInternals || oneNode(c, function(c1) { return c1.depthCollapsed !== null; }))
                    d.canExpand = true;
                }
              });
            }

            var collapsedClass = "";
            if (d.canExpand)
              collapsedClass = d.collapsed === undefined ? "treetable-expand" : d.collapsed ? "treetable-expand" : "treetable-collapse";

            return "code-label " + (d.canExpand ? "label-pointer " + collapsedClass : "");
          });
      }

      function updateRows() {
        var rows = tableBody.selectAll("tr.treetable-row")
          .data(vis.profTable, function(d) {
            return d.id;
          });

        rows.exit()
          .remove();

        var updatedRows = rows
          .style("display", updateRowsDisplay);

        var updatedLabelCells = updatedRows.selectAll("td.code-label");
        updateLabelCells(updatedLabelCells);

        var newRows = rows.enter()
          .append("tr")
          .filter(function(d) {
            if (vis.hideInternals && d.depthCollapsed === null)
              return false;

            return true;
          })
          .on("click", function(d) {
            table.selectAll("tr")
              .style("background-color", null);

            this.style.backgroundColor = "rgb(241, 241, 241)";
            notifySourceFileMessage(d, "select");
          })
          .style("display", updateRowsDisplay);

        newRows
          .attr("class", "treetable-row");

        var labelCell = newRows.append("td");
        updateLabelCells(labelCell);

        var cellWrapper = labelCell.append("div");
        cellWrapper.append("div");

        labelCell.append("div")
          .attr("class", "label-text")
          .text(function(d) { return d.label; });

        newRows.append("td")
          .attr("class", "path")
          .text(function(d) {
            var lastSlash = d.filename ? d.filename.lastIndexOf("/") : -1;
            if (lastSlash >= 0)
              return d.filename.substr(lastSlash + 1);

            return d.filename;
          });

        newRows.append("td")
          .attr("class", "treetable-memory memory-info")
          .text(function(d) {
            return roundOneDecimal(d.sumMemDealloc);
          });

        var memoryBarContainer = newRows.append("td")
          .attr("class", "treetable-memory memory-bar-container");

        var memoryLeftCell = memoryBarContainer.append("div")
          .attr("class", "memory-leftbar-wrapper");

        memoryLeftCell.append("div")
          .attr("class", "memory-leftbar")
          .style("width", function(d) {
            return  1 + Math.min(Math.abs(Math.min(Math.round(d.propMemDealloc * 5), 0)), 5) + "px";
          });

        memoryBarContainer.append("div")
          .attr("class", "memory-rightbar")
          .style("width", function(d) {
            return 1 + Math.min(Math.max(Math.round(d.propMemAlloc * 13), 0), 13) + "px";
          });

        newRows.append("td")
          .attr("class", "treetable-memory memory-info-right")
          .text(function(d) {
            return roundOneDecimal(d.sumMemAlloc);
          });

        newRows.append("td")
          .attr("class", "time-info")
          .text(function(d) {
            return d.sumTime;
          });

        var timeCell = newRows.append("td")
          .attr("class", "time-bar-container");

        timeCell.append("div")
          .attr("class", "timebar")
          .style("width", function(d) {
            return Math.round(d.propTime * 20) + "px";
          });

        var unorderedRows = d3.selectAll("tr.treetable-row")
          .data(vis.profTable, function(d) {
            return d.id;
          });

        unorderedRows.sort(function(a,b) {
          return (a.id < b.id) ? -1 : (a.id == b.id ? 0 : 1);
        });

        useMemoryResults();
      }

      var buildProfTable = function (profTree) {
        var head = jQuery.extend({}, profTree);
        var nodes = [head];

        var aggregateChildren = function(node) {
          var nameMap = {};
          node.children.forEach(function(c) {
            var nameMapEntry = nameMap[c.label];
            if (!nameMapEntry) {
              nameMapEntry = jQuery.extend({}, c);
              nameMapEntry.sumTime     = c.endTime - c.startTime;
              nameMapEntry.sumChildren = [];
              nameMapEntry.children    = [];
              nameMapEntry.parent      = node;
              nameMapEntry.sumCount    = 1;
            }
            else {
              nameMapEntry.sumMem        = nameMapEntry.sumMem        + c.sumMem;
              nameMapEntry.sumMemDealloc = nameMapEntry.sumMemDealloc + c.sumMemDealloc;
              nameMapEntry.sumMemAlloc   = nameMapEntry.sumMemAlloc   + c.sumMemAlloc;
              nameMapEntry.sumTime       = nameMapEntry.sumTime       + (c.endTime - c.startTime);
              nameMapEntry.sumCount      = nameMapEntry.sumCount      + 1;
            }

            nameMapEntry.propMem        = nameMapEntry.sumMem        / vis.totalMem;
            nameMapEntry.propMemDealloc = nameMapEntry.sumMemDealloc / vis.totalMem;
            nameMapEntry.propMemAlloc   = nameMapEntry.sumMemAlloc   / vis.totalMem;
            nameMapEntry.propTime       = nameMapEntry.sumTime       / vis.totalTime;

            c.children.forEach(function(e) {
              nameMapEntry.children.push(e);
            });

            nameMap[c.label] = nameMapEntry;
          });

          var childrenSum = [];
          for (var label in nameMap) {
            childrenSum.push(nameMap[label]);
          }

          // Sort by time descending
          childrenSum.sort(function(a, b) { return b.sumTime - a.sumTime });
          return childrenSum;
        };

        function addToNodesAt(c, i) {
          nodes.splice(i, 0, c);
        }

        var id = 0;
        while (nodes.length > 0) {
          var node = nodes.shift();

          node.id = id;
          id = id + 1;

          node.sumChildren = aggregateChildren(node);

          // Processing in order is important to preserve order of IDs!
          node.sumChildren.forEach(addToNodesAt);
        }

        return head.sumChildren;
      };

      function useMemoryResults() {
        d3.selectAll(".treetable-memory").style("display", vis.hideMemory ? "none" : "");
      }

      vis.profTable = buildProfTable(vis.profTree);
      vis.profTable.forEach(function(e) {
        e.visualDepth = 1;
      });

      updateRows();

      return {
        el: el,
        onResize: updateRows,
        onOptionsChange: updateRows,
        onUpdateInternals: function() {

        },
        useMemoryResults: useMemoryResults
      };
    }

    function enableScroll() {
      vis.codeTable.enableScroll();
      vis.flameGraph.enableZoom();
    }

    function disableScroll() {
      vis.codeTable.disableScroll();
      vis.flameGraph.disableZoom();
    }


    // Set up resizing --------------------------------------------------------

    // This is used as a jQuery event namespace so that we can remove the window
    // resize handler on subsequent calls to initResizing(). Not elegant, but it
    // gets the job done.
    var resizeCallbackNamespace = randomString(10);

    // Resize panel1 and panel2 to 50% of available space and add callback
    // for window resizing.
    function initResizing() {
      var $el = $(vis.el);
      var $panel1 = $el.children(".profvis-panel1");
      var $panel2 = $el.children(".profvis-panel2");
      var $splitBar = $el.children(".profvis-splitbar");
      var $statusBar = $el.children(".profvis-status-bar");

      // Clear any existing positioning that may have happened from previous
      // calls to this function and the callbacks that it sets up.
      $panel1.removeAttr("style");
      $panel2.removeAttr("style");
      $splitBar.removeAttr("style");
      $statusBar.removeAttr("style");

      // CSS class suffix for split direction
      var splitClass = (vis.splitDir === "h") ? "horizontal" : "vertical";

      // Remove existing horizontal/vertical class and add the correct class back.
      $panel1.removeClass("profvis-panel1-horizontal profvis-panel1-vertical");
      $panel2.removeClass("profvis-panel2-horizontal profvis-panel2-vertical");
      $splitBar.removeClass("profvis-splitbar-horizontal profvis-splitbar-vertical");
      $panel1.addClass("profvis-panel1-" + splitClass);
      $panel2.addClass("profvis-panel2-" + splitClass);
      $splitBar.addClass("profvis-splitbar-" + splitClass);


      var splitBarGap;
      var margin;
      // Record the proportions from the previous call to resizePanels. This is
      // needed when we resize the window to preserve the same proportions.
      var lastSplitProportion;

      if (vis.splitDir === "v") {
        // Record the gap between the split bar and the objects to left and right
        splitBarGap = {
          left: $splitBar.offset().left - offsetRight($panel1),
          right: $panel2.offset().left - offsetRight($splitBar)
        };

        // Capture the initial distance from the left and right of container element
        margin = {
          left: $panel1.position().left,
          right: $el.innerWidth() - positionRight($panel2)
        };

      } else if (vis.splitDir === "h") {
        splitBarGap = {
          top: $splitBar.offset().top - offsetBottom($panel1),
          bottom: $panel2.offset().top - offsetBottom($splitBar)
        };

        margin = {
          top: $panel1.position().top,
          bottom: $el.innerWidth() - positionBottom($panel2)
        };
      }

      // Resize the panels. splitProportion is a number from 0-1 representing the
      // horizontal position of the split bar.
      function resizePanels(splitProportion) {
        if (!splitProportion)
          splitProportion = lastSplitProportion;

        if (vis.splitDir === "v") {
          var innerWidth = offsetRight($panel2) - $panel1.offset().left;

          $splitBar.offset({
            left: $panel1.offset().left + innerWidth * splitProportion -
                  $splitBar.outerWidth()/2
          });

          // Size and position the panels
          $panel1.outerWidth($splitBar.position().left - splitBarGap.left -
                             margin.left);
          $panel2.offset({ left: offsetRight($splitBar) + splitBarGap.right });

        } else if (vis.splitDir === "h") {
          var innerHeight = offsetBottom($panel2) - $panel1.offset().top;

          $splitBar.offset({
            top: $panel1.offset().top + innerHeight * splitProportion -
                 $splitBar.outerHeight()/2
          });

          // Size and position the panels
          $panel1.outerHeight($splitBar.position().top - splitBarGap.top -
                             margin.top);
          $panel2.offset({ top: offsetBottom($splitBar) + splitBarGap.bottom });
        }

        lastSplitProportion = splitProportion;
      }

      // Initially, set widths to 50/50
      // For the first sizing, we don't need to call vis.flameGraph.onResize()
      // because this happens before the flame graph is generated.
      resizePanels(0.5);

      var resizePanelsDebounced = debounce(function() {
        resizePanels(lastSplitProportion);
        vis.activeViews.forEach(function(e) {
          if (e.onResize) e.onResize();
        });
      }, 250);

      // Clear old resize handler and add new one. We use a namespace for this
      // visualization to make sure not to delete handlers for other profvis
      // visualizations on the same page (this can happen with Rmd documents).
      $(window).off("resize.profvis." + resizeCallbackNamespace);
      $(window).on("resize.profvis." + resizeCallbackNamespace, resizePanelsDebounced);

      // Get current proportional position of split bar
      function splitProportion() {
        var splitCenter;

        if (vis.splitDir === "v") {
          splitCenter = $splitBar.offset().left - $panel1.offset().left +
                            $splitBar.outerWidth()/2;
          var innerWidth = offsetRight($panel2) - $panel1.offset().left;
          return splitCenter / innerWidth;

        } else if (vis.splitDir === "h") {
          splitCenter = $splitBar.offset().top - $panel1.offset().top +
                            $splitBar.outerHeight()/2;
          var innerHeight = offsetBottom($panel2) - $panel1.offset().top;
          return splitCenter / innerHeight;
        }
      }

      function positionRight($el) {
        return $el.position().left + $el.outerWidth();
      }
      function offsetRight($el) {
        return $el.offset().left + $el.outerWidth();
      }
      function positionBottom($el) {
        return $el.position().top + $el.outerHeight();
      }
      function offsetBottom($el) {
        return $el.offset().top + $el.outerHeight();
      }

      // Enable dragging of the split bar ---------------------------------------
      (function() {
        var dragging = false;
        // For vertical split (left-right dragging)
        var startDragX;
        var startOffsetLeft;
        // For horizontal split (up-down dragging)
        var startDragY;
        var startOffsetTop;

        var stopDrag = function(e) {
          if (!dragging) return;
          dragging = false;

          document.removeEventListener("mousemove", drag);
          document.removeEventListener("mouseup", stopDrag);

          $splitBar.css("opacity", "");

          if ((vis.splitDir === "v" && e.pageX - startDragX === 0) ||
              (vis.splitDir === "h" && e.pageY - startDragY === 0)) {
            return;
          }

          resizePanels(splitProportion());
          vis.flameGraph.onResize();
        };

        var startDrag = function(e) {
          // Don't start another drag if we're already in one.
          if (dragging) return;
          dragging = true;
          pauseEvent(e);

          $splitBar.css("opacity", 0.75);

          if (vis.splitDir === "v") {
            startDragX = e.pageX;
            startOffsetLeft = $splitBar.offset().left;
          } else {
            startDragY = e.pageY;
            startOffsetTop = $splitBar.offset().top;
          }

          document.addEventListener("mousemove", drag);
          document.addEventListener("mouseup", stopDrag);
        };

        var drag = function(e) {
          if (!dragging) return;
          pauseEvent(e);

          if (vis.splitDir === "v") {
            var dx = e.pageX - startDragX;
            if (dx === 0)
              return;

            // Move the split bar
            $splitBar.offset({ left: startOffsetLeft + dx });

          } else if (vis.splitDir === "h") {
            var dy = e.pageY - startDragY;
            if (dy === 0)
              return;

            // Move the split bar
            $splitBar.offset({ top: startOffsetTop + dy });
          }
        };

        // Stop propogation so that we don't select text while dragging
        function pauseEvent(e){
          if(e.stopPropagation) e.stopPropagation();
          if(e.preventDefault) e.preventDefault();
          e.cancelBubble = true;
          e.returnValue = false;
          return false;
        }

        // Remove existing event listener from previous calls to initResizing().
        $splitBar.off("mousedown.profvis");
        $splitBar.on("mousedown.profvis", startDrag);
      })();


      return {
        resizePanels: resizePanels
      };
    }


    var prof = prepareProfData(message.prof, message.interval);

    var vis = {
      el: el,
      prof: prof,
      profTree: getProfTree(prof),
      interval: message.interval,
      totalTime: getTotalTime(prof),
      totalMem: getTotalMemory(prof),
      files: message.files,
      aggLabelTimes: getAggregatedLabelTimes(prof),
      fileLineStats: getFileLineStats(prof, message.files),
      profTable: [],

      // Objects representing each component
      statusBar: null,
      optionsPanel: null,
      codeTable: null,
      flameGraph: null,
      infoBox: null,
      treetable: null,
      activeViews: [],

      // Functions to enable/disable responding to scrollwheel events
      enableScroll: enableScroll,
      disableScroll: disableScroll,

      splitDir: message.split,
      hideInternals: true,
      hideMemory: false,

      resizePanels: null
    };


    // Render the objects ---------------------------------------------

    var statusBarEl = document.createElement("div");
    statusBarEl.className = "profvis-status-bar";
    vis.el.appendChild(statusBarEl);

    // Container panels - top/bottom or left/right
    var panel1 = document.createElement("div");
    panel1.className = "profvis-panel1";
    vis.el.appendChild(panel1);

    var panel2 = document.createElement("div");
    panel2.className = "profvis-panel2";
    vis.el.appendChild(panel2);

    var splitBarEl = document.createElement("div");
    splitBarEl.className = "profvis-splitbar";
    vis.el.appendChild(splitBarEl);

    var footerEl = document.createElement("div");
    footerEl.className = "profvis-footer";
    vis.el.appendChild(footerEl);

    // Items in the panels
    var codeTableEl = document.createElement("div");
    codeTableEl.className = "profvis-code";
    panel1.appendChild(codeTableEl);

    var flameGraphEl = document.createElement("div");
    flameGraphEl.className = "profvis-flamegraph";
    panel2.appendChild(flameGraphEl);

    var infoBoxEl = document.createElement("div");
    infoBoxEl.className = "profvis-infobox";
    panel2.appendChild(infoBoxEl);

    var treetableEl = document.createElement("div");
    treetableEl.className = "profvis-treetable";
    treetableEl.style.display = "none";
    vis.el.appendChild(treetableEl);

    var optionsPanelEl = document.createElement("div");
    optionsPanelEl.className = "profvis-options-panel";
    vis.el.appendChild(optionsPanelEl);

    // Efficient to properly size panels before the code + flamegraph are
    // rendered, so that we don't have to re-render.
    var resize = initResizing();
    vis.resizePanels = resize.resizePanels;

    var hideViews = function() {
      splitBarEl.style.display = "none";
      panel1.style.display = "none";
      panel2.style.display = "none";
      treetableEl.style.display = "none";
    };

    var toggleViews = function(view) {
      hideViews();

      switch (view) {
        case "flamegraph":
          splitBarEl.style.display = "block";
          panel1.style.display = "block";
          panel2.style.display = "block";

          vis.activeViews = [vis.flameGraph, vis.codeTable];
          vis.resizePanels();
          break;
        case "treetable":
          if (!vis.treetable) {
            vis.treetable = generateTreetable(treetableEl);
          }

          treetableEl.style.display = "block";

          vis.activeViews = [vis.treetable];
          break;
      }

      vis.activeViews.forEach(function(e) {
        if (e.onResize) e.onResize();
      });
    };

    var onOptionsChange = function(option, checked) {
      switch (option)
      {
        case "split": {
          vis.splitDir = checked ? "h" : "v";
          // Check that flame graph is visible
          if ($.inArray(vis.flameGraph, vis.activeViews) !== -1) {
            initResizing();
            vis.flameGraph.onResize();
          }
          break;
        }
        case "internals": {
          vis.flameGraph.savePrevScales();

          vis.hideInternals = checked;
          if (checked) {
            vis.flameGraph.useCollapsedDepth();
            vis.flameGraph.redrawCollapse(400, 400);
          } else {
            vis.flameGraph.useUncollapsedDepth();
            vis.flameGraph.redrawUncollapse(400, 250);
          }

          vis.activeViews.forEach(function(e) {
            if (e.onOptionsChange) e.onOptionsChange();
          });

          break;
        }
        case "memory": {
          vis.hideMemory = checked;
          vis.activeViews.forEach(function(e) {
            if (e.useMemoryResults) e.useMemoryResults();
          });
          break;
        }
      }
    };

    // Create the UI components
    vis.statusBar = generateStatusBar(statusBarEl, toggleViews);
    vis.footer = generateFooter(footerEl);
    vis.optionsPanel = generateOptionsPanel(optionsPanelEl, onOptionsChange);
    vis.codeTable = generateCodeTable(codeTableEl);
    vis.flameGraph = generateFlameGraph(flameGraphEl);
    vis.infoBox = initInfoBox(infoBoxEl);
    vis.treetable = null;
    vis.activeViews = [vis.flameGraph, vis.codeTable];

    // If any depth collapsing occured, enable the "hide internal" checkbox.
    if (prof.some(function(d) { return d.depth !== d.depthCollapsed; })) {
      vis.optionsPanel.enableHideInternal();
    }

    // Start with scrolling disabled because of mousewheel scrolling issue
    disableScroll();

    // Make the vis object accessible via the DOM element
    $(el).data("profvis", vis);

    return vis;
  };  // profvis.render()

  // Calculate amount of time spent on each line of code. Returns nested objects
  // grouped by file, and then by line number.
  function getFileLineStats(prof, files) {
    // Drop entries with null or "" filename
    prof = prof.filter(function(row) {
      return row.filename !== null && row.filename !== "";
    });

    // Gather line-by-line file contents
    var fileLineStats = files.map(function(file) {
      // Create array of objects with info for each line of code.
      var lines = file.content.split("\n");
      var lineData = [];
      var filename = file.filename;
      var normpath = file.normpath;
      for (var i=0; i<lines.length; i++) {
        lineData[i] = {
          filename: filename,
          normpath: normpath,
          linenum: i + 1,
          content: lines[i],
          sumTime: 0,
          sumMem: 0,
          sumMemAlloc: 0,
          sumMemDealloc: 0
        };
      }

      return {
        filename: filename,
        lineData: lineData
      };
    });

    // Get timing data for each line
    var statsData = d3.nest()
      .key(function(d) { return d.filename; })
      .key(function(d) { return d.linenum; })
      .rollup(function(leaves) {
        var sumTime = leaves.reduce(function(sum, d) {
          // Add this node's time only if no ancestor node has the same
          // filename and linenum. This is to avoid double-counting times for
          // a line.
          var incTime = 0;
          if (!ancestorHasFilenameLinenum(d.filename, d.linenum, d.parent)) {
            incTime = d.endTime - d.startTime;
          }
          return sum + incTime;
        }, 0);

        var sumMem = leaves.reduce(function(sum, d) {
          return sum + d.sumMem;
        }, 0);

        var sumMemDealloc = leaves.reduce(function(sum, d) {
          return sum + d.sumMemDealloc;
        }, 0);

        var sumMemAlloc = leaves.reduce(function(sum, d) {
          return sum + d.sumMemAlloc;
        }, 0);

        return {
          filename: leaves[0].filename,
          linenum: leaves[0].linenum,
          sumTime: sumTime,
          sumMem: sumMem,
          sumMemAlloc: sumMemAlloc,
          sumMemDealloc: sumMemDealloc
        };
      })
      .entries(prof);

    // Insert the sumTimes into line content data
    statsData.forEach(function(fileInfo) {
      // Find item in fileTimes that matches the file of this fileInfo object
      var fileLineData = fileLineStats.filter(function(d) {
        return d.filename === fileInfo.key;
      })[0].lineData;

      fileInfo.values.forEach(function(lineInfo) {
        lineInfo = lineInfo.values;
        fileLineData[lineInfo.linenum - 1].sumTime = lineInfo.sumTime;
        fileLineData[lineInfo.linenum - 1].sumMem = lineInfo.sumMem;
        fileLineData[lineInfo.linenum - 1].sumMemDealloc = lineInfo.sumMemDealloc;
        fileLineData[lineInfo.linenum - 1].sumMemAlloc = lineInfo.sumMemAlloc;
      });
    });

    // Calculate proportional times, relative to the longest time in the data
    // set. Modifies data in place.
    var fileMaxTimes = fileLineStats.map(function(lines) {
      var lineTimes = lines.lineData.map(function(x) { return x.sumTime; });
      return d3.max(lineTimes);
    });

    var maxTime = d3.max(fileMaxTimes);

    fileLineStats.map(function(lines) {
      lines.lineData.map(function(line) {
        line.propTime = line.sumTime / maxTime;
      });
    });

    var totalMem = getTotalMemory(prof);

    fileLineStats.map(function(lines) {
      lines.lineData.map(function(line) {
        line.propMem = line.sumMem / totalMem;
        line.propMemDealloc = line.sumMemDealloc / totalMem;
        line.propMemAlloc = line.sumMemAlloc / totalMem;
      });
    });

    return fileLineStats;

    // Returns true if the given node or one of its ancestors has the given
    // filename and linenum; false otherwise.
    function ancestorHasFilenameLinenum(filename, linenum, node) {
      if (!node) {
        return false;
      }
      if (node.filename === filename && node.linenum === linenum) {
        return true;
      }
      return ancestorHasFilenameLinenum(filename, linenum, node.parent);
    }
  }

  function prepareProfData(prof, interval) {
    // Convert object-with-arrays format prof data to array-of-objects format
    var data = colToRows(prof);
    data = addParentChildLinks(data);
    data = consolidateRuns(data);
    data = applyInterval(data, interval);
    data = findCollapsedDepths(data);

    return data;
  }

  // Given the raw profiling data, convert `time` and `lastTime` fields to
  // `startTime` and `endTime`, and use the supplied interval. Modifies data
  // in place.
  function applyInterval(prof, interval) {
    prof.forEach(function(d) {
      d.startTime = interval * (d.time - 1);
      d.endTime = interval * (d.lastTime);
      delete d.time;
      delete d.lastTime;
    });

    return prof;
  }

  // Find the total time spanned in the data
  function getTotalTime(prof) {
    return d3.max(prof, function(d) { return d.endTime; }) -
           d3.min(prof, function(d) { return d.startTime; });
  }

  // Find the total memory spanned in the data
  function getTotalMemory(prof) {
    return d3.max(prof, function(d) { return d.memalloc; });
  }

  // Calculate the total amount of time spent in each function label
  function getAggregatedLabelTimes(prof) {
    var labelTimes = {};
    var tree = getProfTree(prof);
    calcLabelTimes(tree);

    return labelTimes;

    // Traverse the tree with the following strategy:
    // * Check if current label is used in an ancestor.
    //   * If yes, don't add to times for that label.
    //   * If no, do add to times for that label.
    // * Recurse into children.
    function calcLabelTimes(node) {
      var label = node.label;
      if (!ancestorHasLabel(label, node.parent)) {
        if (labelTimes[label] === undefined)
          labelTimes[label] = 0;

        labelTimes[label] += node.endTime - node.startTime;
      }

      node.children.forEach(calcLabelTimes);
    }

    // Returns true if the given node or one of its ancestors has the given
    // label; false otherwise.
    function ancestorHasLabel(label, node) {
      if (node) {
        if (node.label === label) {
          return true;
        }
        return ancestorHasLabel(label, node.parent);
      } else {
        return false;
      }
    }
  }


  // Given profiling data, add parent and child links to indicate stack
  // relationships.
  function addParentChildLinks(prof) {
    var data = d3.nest()
      .key(function(d) { return d.time; })
      .rollup(function(leaves) {
        leaves = leaves.sort(function(a, b) { return a.depth - b.depth; });

        leaves[0].parent = null;
        leaves[0].children = [];

        for (var i=1; i<leaves.length; i++) {
          leaves[i-1].children.push(leaves[i]);
          leaves[i].parent = leaves[i-1];
          leaves[i].children = [];
        }

        return leaves;
      })
      .map(prof);

    // Convert data from object of arrays to array of arrays
    data = d3.map(data).values();
    // Flatten data
    return d3.merge(data);
  }


  // Given profiling data, consolidate consecutive blocks for a flamegraph.
  // This function also assigns correct parent-child relationships to form a
  // tree of data objects, with a hidden root node at depth 0.
  function consolidateRuns(prof) {
    // Create a special top-level leaf whose only purpose is to point to its
    // children, the items at depth 1.
    var topLeaf = {
      depth: 0,
      parent: null,
      children: prof.filter(function(d) { return d.depth === 1; })
    };

    var tree = consolidateTree(topLeaf);
    var data = treeToArray(tree);
    // Remove the root node from the flattened data
    data = data.filter(function(d) { return d.depth !== 0; });
    return data;

    function consolidateTree(tree) {
      var leaves = tree.children;
      leaves = leaves.sort(function(a, b) { return a.time - b.time; });

      // Collapse consecutive leaves, with some conditions
      var startLeaf = null;  // leaf starting this run
      var lastLeaf = null;   // The last leaf we've looked at
      var newLeaves = [];
      var collectedChildren = [];
      var sumMem = 0;
      var sumMemDealloc = 0;
      var sumMemAlloc = 0;

      // This takes the start leaf, end leaf, and the set of children for the
      // new leaf, and creates a new leaf which copies all its properties from
      // the startLeaf, except lastTime and children.
      function addNewLeaf(startLeaf, endLeaf, newLeafChildren, sumMem, sumMemDealloc, sumMemAlloc) {
        var newLeaf = $.extend({}, startLeaf);
        newLeaf.lastTime = endLeaf.time;
        newLeaf.parent = tree;
        newLeaf.children = newLeafChildren;

        // Recurse into children
        newLeaf = consolidateTree(newLeaf);

        // Aggregate memory from this consolidation batch and their children
        aggregateMemory(newLeaf, sumMem, sumMemDealloc, sumMemAlloc);

        newLeaves.push(newLeaf);
      }

      function aggregateMemory(leaf, sumMem, sumMemDealloc, sumMemAlloc) {
        leaf.sumMem = sumMem;
        leaf.sumMemDealloc = sumMemDealloc;
        leaf.sumMemAlloc = sumMemAlloc;
        if (leaf.children) {
          leaf.children.forEach(function(child) {
            leaf.sumMem += child.sumMem ? child.sumMem : 0;
            leaf.sumMemDealloc += child.sumMemDealloc ? child.sumMemDealloc : 0;
            leaf.sumMemAlloc += child.sumMemAlloc ? child.sumMemAlloc : 0;
          });
        }
      }

      for (var i=0; i<leaves.length; i++) {
        var leaf = leaves[i];

        if (i === 0) {
          startLeaf = leaf;
          sumMem = sumMemAlloc = sumMemDealloc = 0;
        } else if (leaf.label !== startLeaf.label ||
                   leaf.filename !== startLeaf.filename ||
                   leaf.linenum !== startLeaf.linenum ||
                   leaf.depth !== startLeaf.depth)
        {
          addNewLeaf(startLeaf, lastLeaf, collectedChildren, sumMem, sumMemDealloc, sumMemAlloc);

          collectedChildren = [];
          startLeaf = leaf;
          sumMem = sumMemAlloc = sumMemDealloc = 0;
        }

        sumMem += leaf.meminc;
        sumMemDealloc += Math.min(leaf.meminc, 0);
        sumMemAlloc += Math.max(leaf.meminc, 0);
        collectedChildren = collectedChildren.concat(leaf.children);
        lastLeaf = leaf;
      }

      // Add the last one, if there were any at all
      if (i !== 0) {
        addNewLeaf(startLeaf, lastLeaf, collectedChildren, sumMem, sumMemDealloc, sumMemAlloc);
      }

      tree.children = newLeaves;
      return tree;
    }

    // Given a tree, pull out all the leaves and put them in a flat array
    function treeToArray(tree) {
      var allLeaves = [];

      function pushLeaves(leaf) {
        allLeaves.push(leaf);
        leaf.children.forEach(pushLeaves);
      }

      pushLeaves(tree);
      return allLeaves;
    }
  }


  // Given profiling data with parent-child information, get the root node.
  function getProfTree(prof) {
    if (prof.length === 0)
      return null;

    // Climb up to the top of the tree
    var node = prof[0];
    while (node.parent) {
      node = node.parent;
    }
    return node;
  }


  // Given profiling data, find depth of items after hiding items between
  // items with labels "..stacktraceoff.." and "..stacktraceon..". Modifies
  // data in place.
  function findCollapsedDepths(data) {
    var tree = getProfTree(data);
    calculateDepths(tree, tree.depth, 0);
    return data;

    function calculateDepths(node, curCollapsedDepth, stacktraceOffCount) {
      if (node.label === "..stacktraceoff..") {
        stacktraceOffCount++;
      }

      if (stacktraceOffCount > 0) {
        node.depthCollapsed = null;
      } else {
        node.depthCollapsed = curCollapsedDepth;
        curCollapsedDepth++;
      }

      if (node.label === "..stacktraceon..") {
        stacktraceOffCount--;
      }

      // Recurse
      node.children.forEach(function(x) {
        calculateDepths(x, curCollapsedDepth, stacktraceOffCount);
      });
    }
  }


  // Transform column-oriented data (an object with arrays) to row-oriented data
  // (an array of objects).
  function colToRows(x) {
    var colnames = d3.keys(x);
    if (colnames.length === 0)
      return [];

    var newdata = [];
    for (var i=0; i < x[colnames[0]].length; i++) {
      var row = {};
      for (var j=0; j < colnames.length; j++) {
        var colname = colnames[j];
        row[colname] = x[colname][i];
      }
      newdata[i] = row;
    }

    return newdata;
  }

  // Given an array with two values (a min and max), return an array with the
  // range expanded by `amount`.
  function expandRange(range, amount) {
    var adjust = amount * (range[1] - range[0]);
    return [
      range[0] - adjust,
      range[1] + adjust
    ];
  }


  // Escape an HTML string.
  function escapeHTML(text) {
    return text
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  }

  // This returns the current page URL without any trailing hash. Should be
  // used in url() references in SVGs to avoid problems when there's a <base>
  // tag in the document.
  function urlNoHash() {
    return window.location.href.split("#")[0];
  }

  function debounce(f, delay) {
    var timer = null;
    return function() {
      var context = this;
      var args = arguments;
      clearTimeout(timer);
      timer = setTimeout(function () {
        f.apply(context, args);
      }, delay);
    };
  }

  function randomString(length) {
    var chars = 'abcdefghijklmnopqrstuvwxyz';
    var result = '';
    for (var i = length; i > 0; --i)
      result += chars[Math.floor(Math.random() * chars.length)];
    return result;
  }

  var getNormPath = function(files, filename) {
    var normpath = null;
    files.forEach(function(e) {
      if (e.filename == filename) {
        normpath = e.normpath;
      }
    });
    return normpath;
  };


  (function() {
    // Prevent unwanted scroll capturing. Based on the corresponding code in
    // https://github.com/rstudio/leaflet

    // The rough idea is that we disable scroll wheel zooming inside each
    // profvis object, until the user moves the mouse cursor or clicks on the
    // visualization. This is trickier than just listening for mousemove,
    // because mousemove is fired when the page is scrolled, even if the user
    // did not physically move the mouse. We handle this by examining the
    // mousemove event's screenX and screenY properties; if they change, we know
    // it's a "true" move.
    //
    // There's a complication to this: when the mouse wheel is scrolled quickly,
    // on the step where the profvis DOM object overlaps the cursor, sometimes
    // the mousemove event happens before the mousewheel event, and sometimes
    // it's the reverse (at least on Chrome 46 on Linux). This means that we
    // can't rely on the mousemove handler disabling the profvis object's zoom
    // before a scroll event is triggered on the profvis object (cauzing
    // zooming). In order to deal with this, we start each profvis object with
    // zooming disabled, and also disable zooming when the cursor leaves the
    // profvis div. That way, even if a mousewheel event gets triggered on the
    // object before the mousemove, it won't cause zooming.

    // lastScreen can never be null, but its x and y can.
    var lastScreen = { x: null, y: null };

    $(document)
      .on("mousewheel DOMMouseScroll", function(e) {
        // Any mousemove events at this screen position will be ignored.
        lastScreen = { x: e.originalEvent.screenX, y: e.originalEvent.screenY };
      })
      .on("mousemove", ".profvis", function(e) {
        // Did the mouse really move?
        if (lastScreen.x !== null && e.screenX !== lastScreen.x || e.screenY !== lastScreen.y) {
          $(this).data("profvis").flameGraph.enableZoom();
          lastScreen = { x: null, y: null };
        }
      })
      .on("mousedown", ".profvis", function(e) {
        // Clicking always enables zooming.
        $(this).data("profvis").flameGraph.enableZoom();
        lastScreen = { x: null, y: null };
      })
      .on("mouseleave", ".profvis", function(e) {
        $(this).data("profvis").flameGraph.disableZoom();
      });
  })();

  return profvis;
})();
</script>
<script>(function() {

  // Polyfill for scrollIntoViewIfNeeded()
  // From https://gist.github.com/jocki84/6ffafd003387179a988e
  // License: ISC
  if (!Element.prototype.scrollIntoViewIfNeeded) {
    Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {
      "use strict";

      function makeRange(start, length) {
        return {"start": start, "length": length, "end": start + length};
      }

      function coverRange(inner, outer) {
        if (
          false === centerIfNeeded ||
          (outer.start < inner.end && inner.start < outer.end)
        ) {
          return Math.max(
              inner.end - outer.length,
              Math.min(outer.start, inner.start)
          );
        }
        return (inner.start + inner.end - outer.length) / 2;
      }

      function makePoint(x, y) {
        return {
          "x": x,
          "y": y,
          "translate": function translate(dX, dY) {
            return makePoint(x + dX, y + dY);
          }
        };
      }

      function absolute(elem, pt) {
        while (elem) {
          pt = pt.translate(elem.offsetLeft, elem.offsetTop);
          elem = elem.offsetParent;
        }
        return pt;
      }

      var target = absolute(this, makePoint(0, 0)),
          extent = makePoint(this.offsetWidth, this.offsetHeight),
          elem = this.parentNode,
          origin;

      while (elem instanceof HTMLElement) {
        // Apply desired scroll amount.
        origin = absolute(elem, makePoint(elem.clientLeft, elem.clientTop));
        elem.scrollLeft = coverRange(
          makeRange(target.x - origin.x, extent.x),
          makeRange(elem.scrollLeft, elem.clientWidth)
        );
        elem.scrollTop = coverRange(
          makeRange(target.y - origin.y, extent.y),
          makeRange(elem.scrollTop, elem.clientHeight)
        );

        // Determine actual scroll amount by reading back scroll properties.
        target = target.translate(-elem.scrollLeft, -elem.scrollTop);
        elem = elem.parentNode;
      }
    };
  }

})()</script>
<style type="text/css">.profvis-code span.hljs-operator,
.profvis-code span.hljs-paren {
color: rgb(104, 118, 135)
}
.profvis-code span.hljs-literal {
color: rgb(88, 72, 246)
}
.profvis-code span.hljs-number {
color: rgb(0, 0, 205);
}
.profvis-code span.hljs-comment {
color: rgb(76, 136, 107);
}
.profvis-code span.hljs-keyword {
color: rgb(0, 0, 255);
}
.profvis-code span.hljs-identifier {
color: rgb(0, 0, 0);
}
.profvis-code span.hljs-string {
color: rgb(3, 106, 7);
}
</style>
<script>/*!
  Highlight.js v11.10.0 (git: 366a8bd012)
  (c) 2006-2024 Josh Goebel <hello@joshgoebel.com> and other contributors
  License: BSD-3-Clause
 */
var hljs=function(){"use strict";function e(t){
return t instanceof Map?t.clear=t.delete=t.set=()=>{
throw Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=()=>{
throw Error("set is read-only")
}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach((n=>{
const i=t[n],s=typeof i;"object"!==s&&"function"!==s||Object.isFrozen(i)||e(i)
})),t}class t{constructor(e){
void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}
ignoreMatch(){this.isMatchIgnored=!0}}function n(e){
return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")
}function i(e,...t){const n=Object.create(null);for(const t in e)n[t]=e[t]
;return t.forEach((e=>{for(const t in e)n[t]=e[t]})),n}const s=e=>!!e.scope
;class o{constructor(e,t){
this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){
this.buffer+=n(e)}openNode(e){if(!s(e))return;const t=((e,{prefix:t})=>{
if(e.startsWith("language:"))return e.replace("language:","language-")
;if(e.includes(".")){const n=e.split(".")
;return[`${t}${n.shift()}`,...n.map(((e,t)=>`${e}${"_".repeat(t+1)}`))].join(" ")
}return`${t}${e}`})(e.scope,{prefix:this.classPrefix});this.span(t)}
closeNode(e){s(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){
this.buffer+=`<span class="${e}">`}}const r=(e={})=>{const t={children:[]}
;return Object.assign(t,e),t};class a{constructor(){
this.rootNode=r(),this.stack=[this.rootNode]}get top(){
return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){
this.top.children.push(e)}openNode(e){const t=r({scope:e})
;this.add(t),this.stack.push(t)}closeNode(){
if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){
for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}
walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){
return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),
t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){
"string"!=typeof e&&e.children&&(e.children.every((e=>"string"==typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{
a._collapse(e)})))}}class c extends a{constructor(e){super(),this.options=e}
addText(e){""!==e&&this.add(e)}startScope(e){this.openNode(e)}endScope(){
this.closeNode()}__addSublanguage(e,t){const n=e.root
;t&&(n.scope="language:"+t),this.add(n)}toHTML(){
return new o(this,this.options).value()}finalize(){
return this.closeAllNodes(),!0}}function l(e){
return e?"string"==typeof e?e:e.source:null}function g(e){return h("(?=",e,")")}
function u(e){return h("(?:",e,")*")}function d(e){return h("(?:",e,")?")}
function h(...e){return e.map((e=>l(e))).join("")}function f(...e){const t=(e=>{
const t=e[e.length-1]
;return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}
})(e);return"("+(t.capture?"":"?:")+e.map((e=>l(e))).join("|")+")"}
function p(e){return RegExp(e.toString()+"|").exec("").length-1}
const b=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./
;function m(e,{joinWith:t}){let n=0;return e.map((e=>{n+=1;const t=n
;let i=l(e),s="";for(;i.length>0;){const e=b.exec(i);if(!e){s+=i;break}
s+=i.substring(0,e.index),
i=i.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?s+="\\"+(Number(e[1])+t):(s+=e[0],
"("===e[0]&&n++)}return s})).map((e=>`(${e})`)).join(t)}
const E="[a-zA-Z]\\w*",x="[a-zA-Z_]\\w*",w="\\b\\d+(\\.\\d+)?",y="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",_="\\b(0b[01]+)",O={
begin:"\\\\[\\s\\S]",relevance:0},v={scope:"string",begin:"'",end:"'",
illegal:"\\n",contains:[O]},k={scope:"string",begin:'"',end:'"',illegal:"\\n",
contains:[O]},N=(e,t,n={})=>{const s=i({scope:"comment",begin:e,end:t,
contains:[]},n);s.contains.push({scope:"doctag",
begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",
end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0})
;const o=f("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/)
;return s.contains.push({begin:h(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s
},S=N("//","$"),M=N("/\\*","\\*/"),R=N("#","$");var j=Object.freeze({
__proto__:null,APOS_STRING_MODE:v,BACKSLASH_ESCAPE:O,BINARY_NUMBER_MODE:{
scope:"number",begin:_,relevance:0},BINARY_NUMBER_RE:_,COMMENT:N,
C_BLOCK_COMMENT_MODE:M,C_LINE_COMMENT_MODE:S,C_NUMBER_MODE:{scope:"number",
begin:y,relevance:0},C_NUMBER_RE:y,END_SAME_AS_BEGIN:e=>Object.assign(e,{
"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{
t.data._beginMatch!==e[1]&&t.ignoreMatch()}}),HASH_COMMENT_MODE:R,IDENT_RE:E,
MATCH_NOTHING_RE:/\b\B/,METHOD_GUARD:{begin:"\\.\\s*"+x,relevance:0},
NUMBER_MODE:{scope:"number",begin:w,relevance:0},NUMBER_RE:w,
PHRASAL_WORDS_MODE:{
begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/
},QUOTE_STRING_MODE:k,REGEXP_MODE:{scope:"regexp",begin:/\/(?=[^/\n]*\/)/,
end:/\/[gimuy]*/,contains:[O,{begin:/\[/,end:/\]/,relevance:0,contains:[O]}]},
RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",
SHEBANG:(e={})=>{const t=/^#![ ]*\//
;return e.binary&&(e.begin=h(t,/.*\b/,e.binary,/\b.*/)),i({scope:"meta",begin:t,
end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},
TITLE_MODE:{scope:"title",begin:E,relevance:0},UNDERSCORE_IDENT_RE:x,
UNDERSCORE_TITLE_MODE:{scope:"title",begin:x,relevance:0}});function A(e,t){
"."===e.input[e.index-1]&&t.ignoreMatch()}function I(e,t){
void 0!==e.className&&(e.scope=e.className,delete e.className)}function T(e,t){
t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",
e.__beforeBegin=A,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,
void 0===e.relevance&&(e.relevance=0))}function L(e,t){
Array.isArray(e.illegal)&&(e.illegal=f(...e.illegal))}function B(e,t){
if(e.match){
if(e.begin||e.end)throw Error("begin & end are not supported with match")
;e.begin=e.match,delete e.match}}function P(e,t){
void 0===e.relevance&&(e.relevance=1)}const D=(e,t)=>{if(!e.beforeMatch)return
;if(e.starts)throw Error("beforeMatch cannot be used with starts")
;const n=Object.assign({},e);Object.keys(e).forEach((t=>{delete e[t]
})),e.keywords=n.keywords,e.begin=h(n.beforeMatch,g(n.begin)),e.starts={
relevance:0,contains:[Object.assign(n,{endsParent:!0})]
},e.relevance=0,delete n.beforeMatch
},H=["of","and","for","in","not","or","if","then","parent","list","value"],C="keyword"
;function $(e,t,n=C){const i=Object.create(null)
;return"string"==typeof e?s(n,e.split(" ")):Array.isArray(e)?s(n,e):Object.keys(e).forEach((n=>{
Object.assign(i,$(e[n],t,n))})),i;function s(e,n){
t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((t=>{const n=t.split("|")
;i[n[0]]=[e,U(n[0],n[1])]}))}}function U(e,t){
return t?Number(t):(e=>H.includes(e.toLowerCase()))(e)?0:1}const z={},W=e=>{
console.error(e)},X=(e,...t)=>{console.log("WARN: "+e,...t)},G=(e,t)=>{
z[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),z[`${e}/${t}`]=!0)
},K=Error();function F(e,t,{key:n}){let i=0;const s=e[n],o={},r={}
;for(let e=1;e<=t.length;e++)r[e+i]=s[e],o[e+i]=!0,i+=p(t[e-1])
;e[n]=r,e[n]._emit=o,e[n]._multi=!0}function Z(e){(e=>{
e.scope&&"object"==typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,
delete e.scope)})(e),"string"==typeof e.beginScope&&(e.beginScope={
_wrap:e.beginScope}),"string"==typeof e.endScope&&(e.endScope={_wrap:e.endScope
}),(e=>{if(Array.isArray(e.begin)){
if(e.skip||e.excludeBegin||e.returnBegin)throw W("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),
K
;if("object"!=typeof e.beginScope||null===e.beginScope)throw W("beginScope must be object"),
K;F(e,e.begin,{key:"beginScope"}),e.begin=m(e.begin,{joinWith:""})}})(e),(e=>{
if(Array.isArray(e.end)){
if(e.skip||e.excludeEnd||e.returnEnd)throw W("skip, excludeEnd, returnEnd not compatible with endScope: {}"),
K
;if("object"!=typeof e.endScope||null===e.endScope)throw W("endScope must be object"),
K;F(e,e.end,{key:"endScope"}),e.end=m(e.end,{joinWith:""})}})(e)}function V(e){
function t(t,n){
return RegExp(l(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(n?"g":""))
}class n{constructor(){
this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}
addRule(e,t){
t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),
this.matchAt+=p(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null)
;const e=this.regexes.map((e=>e[1]));this.matcherRe=t(m(e,{joinWith:"|"
}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex
;const t=this.matcherRe.exec(e);if(!t)return null
;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),i=this.matchIndexes[n]
;return t.splice(0,n),Object.assign(t,i)}}class s{constructor(){
this.rules=[],this.multiRegexes=[],
this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){
if(this.multiRegexes[e])return this.multiRegexes[e];const t=new n
;return this.rules.slice(e).forEach((([e,n])=>t.addRule(e,n))),
t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){
return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){
this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){
const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex
;let n=t.exec(e)
;if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{
const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}
return n&&(this.regexIndex+=n.position+1,
this.regexIndex===this.count&&this.considerAll()),n}}
if(e.compilerExtensions||(e.compilerExtensions=[]),
e.contains&&e.contains.includes("self"))throw Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.")
;return e.classNameAliases=i(e.classNameAliases||{}),function n(o,r){const a=o
;if(o.isCompiled)return a
;[I,B,Z,D].forEach((e=>e(o,r))),e.compilerExtensions.forEach((e=>e(o,r))),
o.__beforeBegin=null,[T,L,P].forEach((e=>e(o,r))),o.isCompiled=!0;let c=null
;return"object"==typeof o.keywords&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),
c=o.keywords.$pattern,
delete o.keywords.$pattern),c=c||/\w+/,o.keywords&&(o.keywords=$(o.keywords,e.case_insensitive)),
a.keywordPatternRe=t(c,!0),
r&&(o.begin||(o.begin=/\B|\b/),a.beginRe=t(a.begin),o.end||o.endsWithParent||(o.end=/\B|\b/),
o.end&&(a.endRe=t(a.end)),
a.terminatorEnd=l(a.end)||"",o.endsWithParent&&r.terminatorEnd&&(a.terminatorEnd+=(o.end?"|":"")+r.terminatorEnd)),
o.illegal&&(a.illegalRe=t(o.illegal)),
o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map((e=>(e=>(e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((t=>i(e,{
variants:null},t)))),e.cachedVariants?e.cachedVariants:q(e)?i(e,{
starts:e.starts?i(e.starts):null
}):Object.isFrozen(e)?i(e):e))("self"===e?o:e)))),o.contains.forEach((e=>{n(e,a)
})),o.starts&&n(o.starts,r),a.matcher=(e=>{const t=new s
;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"
}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"
}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t})(a),a}(e)}function q(e){
return!!e&&(e.endsWithParent||q(e.starts))}class J extends Error{
constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}
const Y=n,Q=i,ee=Symbol("nomatch"),te=n=>{
const i=Object.create(null),s=Object.create(null),o=[];let r=!0
;const a="Could not find the language '{}', did you forget to load/include a language module?",l={
disableAutodetect:!0,name:"Plain text",contains:[]};let p={
ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,
languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",
cssSelector:"pre code",languages:null,__emitter:c};function b(e){
return p.noHighlightRe.test(e)}function m(e,t,n){let i="",s=""
;"object"==typeof t?(i=e,
n=t.ignoreIllegals,s=t.language):(G("10.7.0","highlight(lang, code, ...args) has been deprecated."),
G("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),
s=e,i=t),void 0===n&&(n=!0);const o={code:i,language:s};N("before:highlight",o)
;const r=o.result?o.result:E(o.language,o.code,n)
;return r.code=o.code,N("after:highlight",r),r}function E(e,n,s,o){
const c=Object.create(null);function l(){if(!N.keywords)return void M.addText(R)
;let e=0;N.keywordPatternRe.lastIndex=0;let t=N.keywordPatternRe.exec(R),n=""
;for(;t;){n+=R.substring(e,t.index)
;const s=_.case_insensitive?t[0].toLowerCase():t[0],o=(i=s,N.keywords[i]);if(o){
const[e,i]=o
;if(M.addText(n),n="",c[s]=(c[s]||0)+1,c[s]<=7&&(j+=i),e.startsWith("_"))n+=t[0];else{
const n=_.classNameAliases[e]||e;u(t[0],n)}}else n+=t[0]
;e=N.keywordPatternRe.lastIndex,t=N.keywordPatternRe.exec(R)}var i
;n+=R.substring(e),M.addText(n)}function g(){null!=N.subLanguage?(()=>{
if(""===R)return;let e=null;if("string"==typeof N.subLanguage){
if(!i[N.subLanguage])return void M.addText(R)
;e=E(N.subLanguage,R,!0,S[N.subLanguage]),S[N.subLanguage]=e._top
}else e=x(R,N.subLanguage.length?N.subLanguage:null)
;N.relevance>0&&(j+=e.relevance),M.__addSublanguage(e._emitter,e.language)
})():l(),R=""}function u(e,t){
""!==e&&(M.startScope(t),M.addText(e),M.endScope())}function d(e,t){let n=1
;const i=t.length-1;for(;n<=i;){if(!e._emit[n]){n++;continue}
const i=_.classNameAliases[e[n]]||e[n],s=t[n];i?u(s,i):(R=s,l(),R=""),n++}}
function h(e,t){
return e.scope&&"string"==typeof e.scope&&M.openNode(_.classNameAliases[e.scope]||e.scope),
e.beginScope&&(e.beginScope._wrap?(u(R,_.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),
R=""):e.beginScope._multi&&(d(e.beginScope,t),R="")),N=Object.create(e,{parent:{
value:N}}),N}function f(e,n,i){let s=((e,t)=>{const n=e&&e.exec(t)
;return n&&0===n.index})(e.endRe,i);if(s){if(e["on:end"]){const i=new t(e)
;e["on:end"](n,i),i.isMatchIgnored&&(s=!1)}if(s){
for(;e.endsParent&&e.parent;)e=e.parent;return e}}
if(e.endsWithParent)return f(e.parent,n,i)}function b(e){
return 0===N.matcher.regexIndex?(R+=e[0],1):(T=!0,0)}function m(e){
const t=e[0],i=n.substring(e.index),s=f(N,e,i);if(!s)return ee;const o=N
;N.endScope&&N.endScope._wrap?(g(),
u(t,N.endScope._wrap)):N.endScope&&N.endScope._multi?(g(),
d(N.endScope,e)):o.skip?R+=t:(o.returnEnd||o.excludeEnd||(R+=t),
g(),o.excludeEnd&&(R=t));do{
N.scope&&M.closeNode(),N.skip||N.subLanguage||(j+=N.relevance),N=N.parent
}while(N!==s.parent);return s.starts&&h(s.starts,e),o.returnEnd?0:t.length}
let w={};function y(i,o){const a=o&&o[0];if(R+=i,null==a)return g(),0
;if("begin"===w.type&&"end"===o.type&&w.index===o.index&&""===a){
if(R+=n.slice(o.index,o.index+1),!r){const t=Error(`0 width match regex (${e})`)
;throw t.languageName=e,t.badRule=w.rule,t}return 1}
if(w=o,"begin"===o.type)return(e=>{
const n=e[0],i=e.rule,s=new t(i),o=[i.__beforeBegin,i["on:begin"]]
;for(const t of o)if(t&&(t(e,s),s.isMatchIgnored))return b(n)
;return i.skip?R+=n:(i.excludeBegin&&(R+=n),
g(),i.returnBegin||i.excludeBegin||(R=n)),h(i,e),i.returnBegin?0:n.length})(o)
;if("illegal"===o.type&&!s){
const e=Error('Illegal lexeme "'+a+'" for mode "'+(N.scope||"<unnamed>")+'"')
;throw e.mode=N,e}if("end"===o.type){const e=m(o);if(e!==ee)return e}
if("illegal"===o.type&&""===a)return 1
;if(I>1e5&&I>3*o.index)throw Error("potential infinite loop, way more iterations than matches")
;return R+=a,a.length}const _=O(e)
;if(!_)throw W(a.replace("{}",e)),Error('Unknown language: "'+e+'"')
;const v=V(_);let k="",N=o||v;const S={},M=new p.__emitter(p);(()=>{const e=[]
;for(let t=N;t!==_;t=t.parent)t.scope&&e.unshift(t.scope)
;e.forEach((e=>M.openNode(e)))})();let R="",j=0,A=0,I=0,T=!1;try{
if(_.__emitTokens)_.__emitTokens(n,M);else{for(N.matcher.considerAll();;){
I++,T?T=!1:N.matcher.considerAll(),N.matcher.lastIndex=A
;const e=N.matcher.exec(n);if(!e)break;const t=y(n.substring(A,e.index),e)
;A=e.index+t}y(n.substring(A))}return M.finalize(),k=M.toHTML(),{language:e,
value:k,relevance:j,illegal:!1,_emitter:M,_top:N}}catch(t){
if(t.message&&t.message.includes("Illegal"))return{language:e,value:Y(n),
illegal:!0,relevance:0,_illegalBy:{message:t.message,index:A,
context:n.slice(A-100,A+100),mode:t.mode,resultSoFar:k},_emitter:M};if(r)return{
language:e,value:Y(n),illegal:!1,relevance:0,errorRaised:t,_emitter:M,_top:N}
;throw t}}function x(e,t){t=t||p.languages||Object.keys(i);const n=(e=>{
const t={value:Y(e),illegal:!1,relevance:0,_top:l,_emitter:new p.__emitter(p)}
;return t._emitter.addText(e),t})(e),s=t.filter(O).filter(k).map((t=>E(t,e,!1)))
;s.unshift(n);const o=s.sort(((e,t)=>{
if(e.relevance!==t.relevance)return t.relevance-e.relevance
;if(e.language&&t.language){if(O(e.language).supersetOf===t.language)return 1
;if(O(t.language).supersetOf===e.language)return-1}return 0})),[r,a]=o,c=r
;return c.secondBest=a,c}function w(e){let t=null;const n=(e=>{
let t=e.className+" ";t+=e.parentNode?e.parentNode.className:""
;const n=p.languageDetectRe.exec(t);if(n){const t=O(n[1])
;return t||(X(a.replace("{}",n[1])),
X("Falling back to no-highlight mode for this block.",e)),t?n[1]:"no-highlight"}
return t.split(/\s+/).find((e=>b(e)||O(e)))})(e);if(b(n))return
;if(N("before:highlightElement",{el:e,language:n
}),e.dataset.highlighted)return void console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",e)
;if(e.children.length>0&&(p.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),
console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),
console.warn("The element with unescaped HTML:"),
console.warn(e)),p.throwUnescapedHTML))throw new J("One of your code blocks includes unescaped HTML.",e.innerHTML)
;t=e;const i=t.textContent,o=n?m(i,{language:n,ignoreIllegals:!0}):x(i)
;e.innerHTML=o.value,e.dataset.highlighted="yes",((e,t,n)=>{const i=t&&s[t]||n
;e.classList.add("hljs"),e.classList.add("language-"+i)
})(e,n,o.language),e.result={language:o.language,re:o.relevance,
relevance:o.relevance},o.secondBest&&(e.secondBest={
language:o.secondBest.language,relevance:o.secondBest.relevance
}),N("after:highlightElement",{el:e,result:o,text:i})}let y=!1;function _(){
"loading"!==document.readyState?document.querySelectorAll(p.cssSelector).forEach(w):y=!0
}function O(e){return e=(e||"").toLowerCase(),i[e]||i[s[e]]}
function v(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach((e=>{
s[e.toLowerCase()]=t}))}function k(e){const t=O(e)
;return t&&!t.disableAutodetect}function N(e,t){const n=e;o.forEach((e=>{
e[n]&&e[n](t)}))}
"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(()=>{
y&&_()}),!1),Object.assign(n,{highlight:m,highlightAuto:x,highlightAll:_,
highlightElement:w,
highlightBlock:e=>(G("10.7.0","highlightBlock will be removed entirely in v12.0"),
G("10.7.0","Please use highlightElement now."),w(e)),configure:e=>{p=Q(p,e)},
initHighlighting:()=>{
_(),G("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},
initHighlightingOnLoad:()=>{
_(),G("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")
},registerLanguage:(e,t)=>{let s=null;try{s=t(n)}catch(t){
if(W("Language definition for '{}' could not be registered.".replace("{}",e)),
!r)throw t;W(t),s=l}
s.name||(s.name=e),i[e]=s,s.rawDefinition=t.bind(null,n),s.aliases&&v(s.aliases,{
languageName:e})},unregisterLanguage:e=>{delete i[e]
;for(const t of Object.keys(s))s[t]===e&&delete s[t]},
listLanguages:()=>Object.keys(i),getLanguage:O,registerAliases:v,
autoDetection:k,inherit:Q,addPlugin:e=>{(e=>{
e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{
e["before:highlightBlock"](Object.assign({block:t.el},t))
}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{
e["after:highlightBlock"](Object.assign({block:t.el},t))})})(e),o.push(e)},
removePlugin:e=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}),n.debugMode=()=>{
r=!1},n.safeMode=()=>{r=!0},n.versionString="11.10.0",n.regex={concat:h,
lookahead:g,either:f,optional:d,anyNumberOfTimes:u}
;for(const t in j)"object"==typeof j[t]&&e(j[t]);return Object.assign(n,j),n
},ne=te({});return ne.newInstance=()=>te({}),ne}()
;"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=hljs);/*! `r` grammar compiled for Highlight.js 11.10.0 */
(()=>{var e=(()=>{"use strict";return e=>{
const a=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,i=a.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),s=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,t=a.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/)
;return{name:"R",keywords:{$pattern:n,
keyword:"function if in break next repeat else for while",
literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",
built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"
},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,
starts:{end:a.lookahead(a.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),
endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{
scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0
}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]
}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],
variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/
}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/
}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/
}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/
}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/
}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',
relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{
1:"operator",2:"number"},match:[s,i]},{scope:{1:"operator",2:"number"},
match:[/%[^%]*%/,i]},{scope:{1:"punctuation",2:"number"},match:[t,i]},{scope:{
2:"number"},match:[/[^a-zA-Z0-9._]|^/,i]}]},{scope:{3:"operator"},
match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:s},{
match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:t},{begin:"`",end:"`",
contains:[{begin:/\\./}]}]}}})();hljs.registerLanguage("r",e)})();</script>
<script>HTMLWidgets.widget({

  name: 'profvis',

  type: 'output',

  initialize: function(el, width, height) {

    return {
      // TODO: add instance fields as required
    };

  },

  renderValue: function(el, x, instance) {
    profvis.render(el, x.message);
  },

  resize: function(el, width, height, instance) {

  }

});
</script>

</head>
<body style="background-color: white;">
<div id="htmlwidget_container">
  <div class="profvis html-widget html-fill-item" id="htmlwidget-89e5514ce0463ba183ca" style="width:960px;height:500px;"></div>
</div>
<script type="application/json" data-for="htmlwidget-89e5514ce0463ba183ca">{"x":{"message":{"prof":{"time":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,16,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,31,31,31,31,31,31,31,31,31,31,31,31,31,32,32,32,32,32,32,32,33,33,33,33,33,33,33,33,34,34,34,34,34,34,34,34,34,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,40,40,40,40,40,40,40,40,41,41,41,41,41,41,41,41,41,41,41,42,42,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,44,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,46,46,46,46,46,46,46,46,46,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,47,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,51,51,51,51,51,51,51,51,51,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,53,54,54,55,55,56,56,57,57,58,58,59,59,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,61,61,61,61,61,61,61,61,61,61,61,61,61,61,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,63,64,64,64,64,64,64,64,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,65,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,66,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,67,68,68,68,68,68,68,68,68,69,69,69,69,69,69,69,69,69,70,70,71,71,71,71,71,71,71,71,71,71,71,71,71,71,71,71,71,71,72,72,72,72,72,72,72,72,72,72,72,72,72,72,73,73,74,74,74,74,74,74,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,75,76,76,76,76,76,76,76,76,76,76,76,76,76,76,76,76,76,76,76,76,76,76,77,77,77,77,77,77,77,77,77,77,77,77,77,77,77,77,78,78,78,78,78,78,78,78,78,78,78,78,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,79,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,81,81,81,81,81,81,81,81,81,81,82,82,82,82,82,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,83,84,84,84,84,84,84,84,84,84,84,84,85,85,85,85,85,85,85,85,85,85,85,85,85,85,86,86,86,86,86,86,86,86,86,86,86,87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,87,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,88,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,89,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,91,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,92,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,93,94,94,94,94,94,94,94,94,94,95,95,95,95,95,95,95,95,96,96,97,97,97,97,97,97,97,97,97,98,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,101,101,101,101,101,101,101,101,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,103,103,103,103,103,103,103,103,104,104,104,104,104,104,104,104,104,104,104,105,105,105,105,105,105,105,105,105,105,105,105,105,105,106,107,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,108,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,109,110,110,110,110,110,110,110,110,110,110,110,111,111,111,111,111,111,111,111,111,111,111,111,111,111,111,112,112,112,112,112,112,112,112,112,112,112,112,112,112,112,113,113,113,113,113,113,113,113,113,113,113,113,113,113,114,114,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,116,116,116,116,116,116,116,116,116,116,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,117,118,118,118,118,118,118,118,118,118,118,118,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,120,121,121,121,121,121,121,121,121,122,122,122,122,122,122,122,122,122,122,122,122,123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,124,124,124,124,124,124,124,124,124,124,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,126,126,126,126,126,126,126,127,127,127,127,127,127,127,127,127,127,128,128,128,128,128,128,128,128,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,129,130,130,130,130,130,130,130,130,130,130,130,130,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,131,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,132,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,133,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,134,135,135,135,135,135,135,135,135,135,135,135,135,135,136,136,136,136,136,136,136,136,136,136,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,137,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,138,139,140,140,140,140,140,140,140,140,140,140,141,141,141,141,141,141,141],"depth":[24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,10,9,8,7,6,5,4,3,2,1,2,1,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,13,12,11,10,9,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,11,10,9,8,7,6,5,4,3,2,1,2,1,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,2,1,2,1,2,1,2,1,2,1,2,1,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,2,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,2,1,6,5,4,3,2,1,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,10,9,8,7,6,5,4,3,2,1,5,4,3,2,1,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,11,10,9,8,7,6,5,4,3,2,1,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,9,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,2,1,9,8,7,6,5,4,3,2,1,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,1,1,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,26,25,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,11,10,9,8,7,6,5,4,3,2,1,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,14,13,12,11,10,9,8,7,6,5,4,3,2,1,2,1,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,10,9,8,7,6,5,4,3,2,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,11,10,9,8,7,6,5,4,3,2,1,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,10,9,8,7,6,5,4,3,2,1,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1,10,9,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,12,11,10,9,8,7,6,5,4,3,2,1,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,13,12,11,10,9,8,7,6,5,4,3,2,1,10,9,8,7,6,5,4,3,2,1,24,23,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,22,21,20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,1,10,9,8,7,6,5,4,3,2,1,7,6,5,4,3,2,1],"label":["list2env2","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","FUN","lapply","assign_func_envs","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (!is.null(private$macro_names_cache) &&","private$get_macro_names","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","<GC>","if (!is.null(private$macro_names_set) && exists(op_name, envir = private$macro_names_set, inherits = FALSE)) {","private$contains_macro_head","private$contains_macro_head","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","self$context$compiler$strict <- prev_strict","source","lapply","assign_func_envs","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","value <- self$context$source_tracker$strip_src(value)",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$context$compiled_runtime$eval_compiled(compiled, env)","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","inherits(x, \"rye_syntax\")","private$hygiene_is","FUN","lapply","private$map_expr","private$hygiene_unwrap_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.logical(x) && length(x) == 1L && !is.na(x) && identical(x[[1]], FALSE)) {",".rye_true_p","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","<GC>","source","match.arg","<Anonymous>",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$macro_registry <- self$macro_registry_env(env, create = TRUE)","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$context$source_tracker$strip_src(expr)","$","private$strip_src","private$compile_lambda","private$compile_impl","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","source","lapply","FUN","lapply","FUN","lapply","FUN","lapply","<Anonymous>","private$strip_src","private$compile_macro_quasiquote","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (private$hygiene_is(x)) {","private$hygiene_origin","FUN","lapply","private$hygienize_expr","private$hygienize","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","inherits","private$hygiene_is","FUN","lapply","private$hygienize_expr","private$hygienize","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","inherits","private$hygiene_is","FUN","lapply","private$hygienize_expr","private$hygienize","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$assign(name, value)","$","<Anonymous>",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","FUN","lapply","assign_func_envs","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source",".rye_assign_pattern(env, pattern, value, mode)",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","list2env","list2env2","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","FUN","lapply","<Anonymous>","private$macroexpand_impl","private$macroexpand_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.list(expr) && is.null(attr(expr, \"class\", exact = TRUE))) {","private$contains_macro_head","private$contains_macro_head","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","prev_strict <- self$context$compiler$strict","$","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","inherits","private$hygiene_is","private$hygienize_expr","FUN","lapply","private$hygienize_expr","private$hygienize","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","<Anonymous>","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.null(self$context$compiled_runtime) || is.null(self$context$compiler)) {","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","structure(list(expr = expr, origin = origin), class = \"rye_syntax\")","private$hygiene_wrap","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","registry <- self$context$env$get_registry(\".rye_macros\", env, create = create)","$","private$macro_registry","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","<GC>","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","as.name","lockBinding","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (!is.null(strict)) {","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","eval","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","op_name <- if (is.symbol(op)) as.character(op) else NULL","private$compile_impl","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","self$context$compiler$macro_eval <- prev_macro_eval","source","self$context$source_tracker$src_get(expr)","$","private$src_get","private$src_inherit","private$compile_impl","collect_args","private$compile_application","private$compile_impl","private$compile_lambda","private$compile_impl","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","FUN","lapply","assign_func_envs","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","RyeEnv$new(env)$assign_pattern(pattern, value, mode = mode, context = if (identical(mode, \"define\")) \"define\" else \"set!\")","<Anonymous>",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","<GC>","if (!is.null(private$macro_names_cache) &&","private$get_macro_names","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","lapply","assign_func_envs","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","return(invisible(NULL))","<Anonymous>",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","funcall","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","FUN","lapply","FUN","lapply","<Anonymous>","private$strip_src","private$compile_macro_quasiquote","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","prev_macro_eval <- self$context$compiler$macro_eval","$","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","if (is.logical(x) && length(x) == 1L && !is.na(x) && identical(x[[1]], FALSE)) {",".rye_true_p","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.logical(x) && length(x) == 1L && !is.na(x) && identical(x[[1]], FALSE)) {",".rye_true_p","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","<GC>","source","<GC>","source","<GC>","source","<GC>","source","<GC>","source","<GC>","source","if (inherits(expr, \"rye_keyword\")) {","private$compile_impl","private$compile_application","private$compile_impl","private$compile_lambda","private$compile_impl","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","if (is.list(expr) && is.null(attr(expr, \"class\", exact = TRUE))) {","private$map_expr","FUN","lapply","private$map_expr","private$hygiene_unwrap_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$module_registry <- ModuleRegistry$new(self)","$<-","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$context$compiler$macro_eval <- prev_macro_eval","$<-","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.logical(x) && length(x) == 1L && !is.na(x) && identical(x[[1]], FALSE)) {",".rye_true_p","car","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lockBinding","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","value <- self$context$source_tracker$strip_src(result_with_vis$value)","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","self$context$compiler$strict <- prev_strict","$","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","self$context$compiler$strict <- prev_strict","source","R6::is.R6(obj) && inherits(obj, cls)","r6_isinstance","FUN","lapply","FUN","lapply","<Anonymous>","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$context$source_tracker$strip_src(expr)","$","private$strip_src","private$compile_lambda","private$compile_impl","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","c","source","prev_strict <- self$context$compiler$strict","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","FUN","lapply","assign_func_envs","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lockBinding","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","as.list","FUN","lapply","<Anonymous>","private$strip_src","private$compile_lambda","private$compile_impl","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","max_args <- length(expr) - 1","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","assign(\".rye_true_p\", .rye_true_p, envir = env)","assign","self$install_helpers","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","spliced <- private$eval_compiled_in_env(elem[[2]], env)","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","lapply","assign_func_envs","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (inherits(expr, \"rye_keyword\")) {","private$compile_impl","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","R6::is.R6(obj) && inherits(obj, cls)","r6_isinstance","FUN","lapply","<Anonymous>","private$macroexpand_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","private$map_expr","private$hygiene_unwrap_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","hygiene_is = function(x) {","private$hygiene_is","FUN","lapply","private$map_expr","FUN","lapply","private$map_expr","FUN","lapply","private$map_expr","private$hygiene_unwrap_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$assign(name, value)","$","<Anonymous>",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","do.call","funcall","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lockBinding","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","__rget","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.logical(x) && length(x) == 1L && !is.na(x) && identical(x[[1]], FALSE)) {",".rye_true_p","car","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","assign_func_envs","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.null(expr)) {","private$contains_macro_head","private$contains_macro_head","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","prev_strict <- self$context$compiler$strict","$","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","self$context$compiler$strict <- prev_strict","source","self$context$compiled_runtime$eval_compiled(compiled, env)","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","source","seq.default","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$env","$","self$find_define_env","self$assign","<Anonymous>",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (!is.null(strict)) {","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","sys.frame","match.arg","<Anonymous>",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","expr <- self$context$macro_expander$macroexpand(expr, env = env, preserve_src = TRUE)","private$contains_macro_head","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","self$env_stack <- c(self$env_stack, list(env))","$<-","<Anonymous>","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","if (isTRUE(protected)) {","isTRUE","FUN","lapply","private$hygienize_expr","private$hygienize","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","source","source","lapply","FUN","lapply","FUN","lapply","FUN","lapply","FUN","lapply","<Anonymous>","private$strip_src","private$compile_macro_quasiquote","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","<GC>","as.name","lockBinding","ModuleRegistry$new","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$context$compiled_runtime$eval_compiled(compiled, env)","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.null(self$context) || is.null(self$context$source_tracker) || is.null(src)) {","private$src_set","private$src_inherit","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","has_src_attr <- !is.null(attr(value, \"rye_src\", exact = TRUE))","FUN","lapply","<Anonymous>","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","FUN","lapply","<Anonymous>","private$macroexpand_impl","private$macroexpand_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","environment<-","source","if (is.logical(x) && length(x) == 1L && !is.na(x) && identical(x[[1]], FALSE)) {",".rye_true_p","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (length(expr) > 0 && is.symbol(expr[[1]])) {","private$contains_macro_head","private$contains_macro_head","private$contains_macro_head","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","as.list","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","assign(\".rye_load\", self$load_file_fn, envir = env)","$","self$install_helpers","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","identical","private$get_macro_names","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","!is.null(registry) && exists(as.character(name), envir = registry, inherits = FALSE)","private$is_macro_impl","private$macroexpand_impl","private$macroexpand_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","list2env2","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (inherits(arg_expr, \"rye_keyword\")) {","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","self$macro_registry <- self$macro_registry_env(env, create = TRUE)","$","initialize","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","self$install_helpers","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","assign","self$install_helpers","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","if (length(macro_names) == 0 || !private$contains_macro_head(expr, macro_names)) {","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lapply","FUN","lapply","FUN","lapply","<Anonymous>","private$strip_src","private$compile_macro_quasiquote","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","return(self$context$source_tracker$strip_src(expr))","$","private$macroexpand_impl","private$macroexpand_impl","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","list2env","list2env2","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","identical","<Anonymous>",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","if (is.logical(x) && length(x) == 1L && !is.na(x) && identical(x[[1]], FALSE)) {",".rye_true_p","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","op_name <- if (is.symbol(op)) as.character(op) else NULL","private$compile_impl","private$compile_lambda","private$compile_impl","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","if (inherits(arg_expr, \"rye_keyword\")) {","collect_args","private$compile_application","private$compile_impl","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","FUN","lapply","assign_func_envs","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","lockBinding","RyeEnv$new",".rye_assign_pattern",".rye_assign_pattern","r/call","cdr","FUN","lapply","map","eval","eval","<Anonymous>","private$eval_compiled_in_env","<Anonymous>","private$macroexpand_impl","<Anonymous>","engine3$macroexpand","profvis::profvis","profile_component","eval","eval","source","source","%in%","private$contains_macro_head","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","private$quasiquote_impl","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source","self$context$compiled_runtime$eval_compiled(compiled, env)","<Anonymous>","private$eval_compiled_in_env","private$quasiquote_impl","<Anonymous>",".rye_macro_quasiquote","source"],"filenum":[null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,4,null,null,null,null,null,null,null,3,3,3,3,3,3,2,null,null,3,null,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,3,3,2,null,null,3,3,null,3,3,3,3,4,null,null,null,null,null,null,2,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,1,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,5,5,5,5,5,5,5,5,3,3,3,2,null,null,null,6,null,6,null,6,null,6,5,5,5,5,3,3,null,3,4,null,null,null,null,null,null,3,3,null,3,3,3,3,4,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,null,3,3,3,3,4,null,null,null,null,null,null,3,3,null,3,3,3,3,4,null,null,null,null,null,null,1,1,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,6,null,6,3,3,3,3,4,null,null,null,null,null,null,3,3,3,3,3,3,2,null,null,3,3,3,3,3,2,null,null,3,3,3,null,3,3,3,3,4,null,null,null,null,null,null,6,2,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,2,null,null,3,3,3,3,3,2,null,null,3,3,3,3,3,3,2,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,5,3,3,3,3,3,2,null,null,null,3,3,3,3,2,null,null,5,5,5,5,5,3,3,3,2,null,null,3,null,5,5,5,5,5,5,5,5,5,5,5,5,5,3,3,3,2,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,3,3,3,3,3,2,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,1,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,6,null,6,null,6,5,5,5,5,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,3,3,2,null,null,2,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,5,5,5,5,5,5,5,5,5,3,3,3,2,null,null,3,3,null,3,3,3,3,4,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,1,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,2,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,3,3,3,3,2,null,null,3,3,3,3,3,3,2,null,null,3,null,7,6,null,6,null,6,2,3,3,null,3,4,null,null,null,null,null,null,5,5,5,5,5,5,5,5,3,3,3,2,null,null,5,null,3,3,3,2,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,6,null,6,5,5,5,5,5,5,5,3,3,3,2,null,null,5,5,5,5,3,3,3,3,3,2,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,2,2,3,3,3,3,2,null,null,3,3,2,null,null,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,5,5,5,5,5,3,3,3,2,null,null,7,6,null,6,3,3,3,4,null,null,null,null,null,null,3,3,3,3,4,null,null,null,null,null,null,3,3,null,3,3,null,3,3,null,3,3,3,3,4,null,null,null,null,null,null,1,1,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,3,3,2,null,null,3,3,3,3,3,2,null,null,3,null,3,3,3,3,3,3,2,null,null,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,1,1,1,1,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,5,3,3,3,3,2,null,null,null,1,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,3,2,null,null,1,1,2,3,3,3,3,3,2,null,null,3,3,null,3,3,3,3,4,null,null,null,null,null,null,null,null,6,null,6,null,6,null,6,null,6,5,5,5,5,3,3,null,3,4,null,null,null,null,null,null,null,null,null,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,5,5,5,5,3,3,null,3,4,null,null,null,null,null,null,6,null,6,2,3,3,null,3,4,null,null,null,null,null,null,6,null,6,3,3,3,3,4,null,null,null,null,null,null,null,null,2,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,3,3,3,2,null,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,2,2,3,3,3,3,3,2,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,3,2,null,null,3,3,3,3,3,4,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,5,5,5,5,3,3,3,2,null,null,1,1,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,3,3,3,2,null,null,2,2,3,3,3,3,3,2,null,null,3,4,null,null,null,null,null,null,6,null,6,null,6,5,5,5,5,3,3,null,3,4,null,null,null,null,null,null,3,3,3,3,3,4,null,null,null,null,null,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,1,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,2,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,5,5,5,5,5,5,5,3,3,3,2,null,null,5,5,5,5,3,3,3,2,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,2,2,null,null,null,null,null,null,null,null,3,3,null,3,4,null,null,null,null,null,null,null,3,3,3,3,3,3,3,2,null,null,3,3,3,3,2,null,null],"linenum":[null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,152,40,379,null,null,null,null,null,null,null,192,197,41,116,677,100,117,null,null,121,null,null,null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,90,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,126,126,657,695,695,100,117,null,null,238,253,null,260,256,1020,47,379,null,null,null,null,null,null,11,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,182,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,36,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,115,115,369,143,907,939,143,42,125,677,100,117,null,null,null,109,null,109,null,109,null,109,115,191,143,42,125,970,null,47,379,null,null,null,null,null,null,241,300,null,362,296,1019,47,379,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,238,299,null,362,296,1019,47,379,null,null,null,null,null,null,238,299,null,362,296,1019,47,379,null,null,null,null,null,null,186,186,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,114,null,109,1054,1088,1033,47,379,null,null,null,null,null,null,203,197,41,116,677,100,117,null,null,118,118,677,695,100,117,null,null,238,299,303,null,362,296,1019,47,379,null,null,null,null,null,null,109,139,126,970,null,47,379,null,null,null,null,null,null,112,677,695,100,117,null,null,235,658,695,695,100,117,null,null,141,141,38,116,677,100,117,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,37,125,657,695,695,100,117,null,null,null,126,677,695,100,117,null,null,140,907,939,143,42,125,677,100,117,null,null,122,null,93,93,105,167,907,939,143,381,143,907,939,143,42,125,677,100,117,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,23,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,152,40,116,677,100,117,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,190,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,109,null,109,null,109,115,191,143,42,125,970,null,47,379,null,null,null,null,null,null,119,119,657,695,695,100,117,null,null,11,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,11,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,125,879,143,381,143,907,939,143,42,125,677,100,117,null,null,263,256,null,260,256,1020,47,379,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,37,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,122,122,677,100,117,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,11,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,139,126,677,695,100,117,null,null,121,121,657,695,695,100,117,null,null,121,null,10,78,null,109,null,109,139,126,970,null,47,379,null,null,null,null,null,null,115,115,369,143,907,939,143,42,125,677,100,117,null,null,941,null,118,677,100,117,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,109,null,109,115,369,143,907,939,143,42,125,677,100,117,null,null,886,939,143,42,125,657,695,695,100,117,null,null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,88,88,137,126,677,695,100,117,null,null,677,100,117,null,null,null,null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,125,907,939,143,42,125,677,100,117,null,null,10,78,null,109,1095,1033,47,379,null,null,null,null,null,null,260,256,1020,47,379,null,null,null,null,null,null,237,253,null,264,256,null,260,256,null,260,256,1020,47,379,null,null,null,null,null,null,186,186,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,11,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,176,197,41,116,677,100,117,null,null,118,118,677,695,100,117,null,null,121,null,126,126,657,695,695,100,117,null,null,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,158,158,72,186,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,37,125,677,695,100,117,null,null,null,182,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,116,41,116,677,100,117,null,null,43,43,135,126,657,695,695,100,117,null,null,341,341,null,362,296,1019,47,379,null,null,null,null,null,null,null,null,109,null,109,null,109,null,109,null,109,115,191,143,42,125,970,null,47,379,null,null,null,null,null,null,null,null,null,37,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,96,109,167,42,125,970,null,47,379,null,null,null,null,null,null,84,null,109,139,126,970,null,47,379,null,null,null,null,null,null,109,null,109,1054,1088,1033,47,379,null,null,null,null,null,null,null,null,11,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,186,197,197,41,116,677,100,117,null,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,93,93,137,126,657,695,695,100,117,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,152,40,116,677,100,117,null,null,217,1006,1088,1033,47,379,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,893,939,143,42,125,677,100,117,null,null,36,36,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,137,126,677,100,117,null,null,101,137,126,657,695,695,100,117,null,null,41,379,null,null,null,null,null,null,109,null,109,null,109,115,191,143,42,125,970,null,47,379,null,null,null,null,null,null,1001,1001,1088,1033,47,379,null,null,null,null,null,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,185,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,11,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,140,381,143,907,939,143,42,125,677,100,117,null,null,893,939,143,42,125,677,100,117,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,23,91,null,null,null,null,null,null,null,null,126,970,null,47,379,null,null,null,null,null,null,null,188,41,116,657,695,695,100,117,null,null,126,126,677,100,117,null,null],"memalloc":[17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.73495483398438,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,17.90386962890625,18.06327819824219,18.06327819824219,18.06327819824219,18.06327819824219,18.06327819824219,18.06327819824219,18.06327819824219,18.06327819824219,18.06327819824219,18.20594024658203,18.20594024658203,18.20594024658203,18.20594024658203,18.20594024658203,18.20594024658203,18.20594024658203,18.20594024658203,18.20594024658203,18.20594024658203,17.73094940185547,17.73094940185547,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,17.90188598632812,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,18.07558441162109,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.58292388916016,17.73946380615234,17.73946380615234,17.73946380615234,17.73946380615234,17.73946380615234,17.73946380615234,17.73946380615234,17.73946380615234,17.73946380615234,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,17.90357208251953,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.06664276123047,18.20047760009766,18.20047760009766,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.75107574462891,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,17.91944122314453,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,18.09207916259766,17.60417175292969,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.767333984375,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,17.93301391601562,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,18.10317230224609,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.61266326904297,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.78856658935547,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,17.96098327636719,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,18.13250732421875,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.63673400878906,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.80408477783203,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,17.97783660888672,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,18.13603210449219,17.66181182861328,17.66181182861328,17.66181182861328,17.66181182861328,17.66181182861328,17.66181182861328,17.66181182861328,17.66181182861328,17.66181182861328,17.83467102050781,17.83467102050781,17.83467102050781,17.83467102050781,17.83467102050781,17.83467102050781,17.83467102050781,17.83467102050781,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,17.99480438232422,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,18.1688232421875,17.69826507568359,17.69826507568359,17.69826507568359,17.69826507568359,17.69826507568359,17.69826507568359,17.69826507568359,17.873779296875,17.873779296875,17.873779296875,17.873779296875,17.873779296875,17.873779296875,17.873779296875,17.873779296875,18.05178070068359,18.05178070068359,18.05178070068359,18.05178070068359,18.05178070068359,18.05178070068359,18.05178070068359,18.05178070068359,18.05178070068359,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,18.20485687255859,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.75637054443359,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,17.93407440185547,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,18.11221313476562,17.64094543457031,17.64094543457031,17.64094543457031,17.64094543457031,17.64094543457031,17.64094543457031,17.64094543457031,17.64094543457031,17.64094543457031,17.82020568847656,17.82020568847656,17.82020568847656,17.82020568847656,17.82020568847656,17.82020568847656,17.82020568847656,17.82020568847656,17.99945831298828,17.99945831298828,17.99945831298828,17.99945831298828,17.99945831298828,17.99945831298828,17.99945831298828,17.99945831298828,17.99945831298828,17.99945831298828,17.99945831298828,18.1710205078125,18.1710205078125,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.68540191650391,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,17.86328887939453,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.03995513916016,18.20933532714844,18.20933532714844,18.20933532714844,18.20933532714844,18.20933532714844,18.20933532714844,18.20933532714844,18.20933532714844,18.20933532714844,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.73754119873047,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,17.91302490234375,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,18.09028625488281,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.61878967285156,17.79753112792969,17.79753112792969,17.79753112792969,17.79753112792969,17.79753112792969,17.79753112792969,17.79753112792969,17.79753112792969,17.79753112792969,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,17.97492980957031,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.15108489990234,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,18.20854187011719,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.61331939697266,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.77049255371094,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,17.93517303466797,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,18.10862731933594,17.62734222412109,17.62734222412109,17.62734222412109,17.62734222412109,17.62734222412109,17.62734222412109,17.62734222412109,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.79994201660156,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,17.97498321533203,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,18.15179443359375,17.68311309814453,17.68311309814453,17.68311309814453,17.68311309814453,17.68311309814453,17.68311309814453,17.68311309814453,17.68311309814453,17.85791778564453,17.85791778564453,17.85791778564453,17.85791778564453,17.85791778564453,17.85791778564453,17.85791778564453,17.85791778564453,17.85791778564453,18.03385162353516,18.03385162353516,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,18.19277191162109,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.71895599365234,17.89677429199219,17.89677429199219,18.06961822509766,18.06961822509766,18.06961822509766,18.06961822509766,18.06961822509766,18.06961822509766,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.58906555175781,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.76515960693359,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,17.92980194091797,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,18.09849548339844,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.62525177001953,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.79630279541016,17.96464538574219,17.96464538574219,17.96464538574219,17.96464538574219,17.96464538574219,17.96464538574219,17.96464538574219,17.96464538574219,17.96464538574219,17.96464538574219,18.14156341552734,18.14156341552734,18.14156341552734,18.14156341552734,18.14156341552734,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.66698455810547,17.83182525634766,17.83182525634766,17.83182525634766,17.83182525634766,17.83182525634766,17.83182525634766,17.83182525634766,17.83182525634766,17.83182525634766,17.83182525634766,17.83182525634766,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,17.99517822265625,18.16485595703125,18.16485595703125,18.16485595703125,18.16485595703125,18.16485595703125,18.16485595703125,18.16485595703125,18.16485595703125,18.16485595703125,18.16485595703125,18.16485595703125,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.67640686035156,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,17.84161376953125,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.01570892333984,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,18.18362426757812,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.70108032226562,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,17.87882995605469,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,18.05583953857422,17.58895874023438,17.58895874023438,17.58895874023438,17.58895874023438,17.58895874023438,17.58895874023438,17.58895874023438,17.58895874023438,17.58895874023438,17.76302337646484,17.76302337646484,17.76302337646484,17.76302337646484,17.76302337646484,17.76302337646484,17.76302337646484,17.76302337646484,17.93976593017578,17.93976593017578,18.11259460449219,18.11259460449219,18.11259460449219,18.11259460449219,18.11259460449219,18.11259460449219,18.11259460449219,18.11259460449219,18.11259460449219,17.63626861572266,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.81331634521484,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,17.98770141601562,18.15200042724609,18.15200042724609,18.15200042724609,18.15200042724609,18.15200042724609,18.15200042724609,18.15200042724609,18.15200042724609,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.67715454101562,17.84303283691406,17.84303283691406,17.84303283691406,17.84303283691406,17.84303283691406,17.84303283691406,17.84303283691406,17.84303283691406,18.01523590087891,18.01523590087891,18.01523590087891,18.01523590087891,18.01523590087891,18.01523590087891,18.01523590087891,18.01523590087891,18.01523590087891,18.01523590087891,18.01523590087891,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,18.17633056640625,17.7144775390625,17.89041137695312,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.05348205566406,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,18.20914459228516,17.74433898925781,17.74433898925781,17.74433898925781,17.74433898925781,17.74433898925781,17.74433898925781,17.74433898925781,17.74433898925781,17.74433898925781,17.74433898925781,17.74433898925781,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,17.92014312744141,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,18.08343505859375,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.60474395751953,17.76525115966797,17.76525115966797,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,17.93021392822266,18.10158538818359,18.10158538818359,18.10158538818359,18.10158538818359,18.10158538818359,18.10158538818359,18.10158538818359,18.10158538818359,18.10158538818359,18.10158538818359,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.62770080566406,17.78836059570312,17.78836059570312,17.78836059570312,17.78836059570312,17.78836059570312,17.78836059570312,17.78836059570312,17.78836059570312,17.78836059570312,17.78836059570312,17.78836059570312,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,17.94023895263672,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,18.10580444335938,17.61323547363281,17.61323547363281,17.61323547363281,17.61323547363281,17.61323547363281,17.61323547363281,17.61323547363281,17.61323547363281,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.77421569824219,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,17.93039703369141,18.10137176513672,18.10137176513672,18.10137176513672,18.10137176513672,18.10137176513672,18.10137176513672,18.10137176513672,18.10137176513672,18.10137176513672,18.10137176513672,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.62366485595703,17.79150390625,17.79150390625,17.79150390625,17.79150390625,17.79150390625,17.79150390625,17.79150390625,17.95891571044922,17.95891571044922,17.95891571044922,17.95891571044922,17.95891571044922,17.95891571044922,17.95891571044922,17.95891571044922,17.95891571044922,17.95891571044922,18.12847900390625,18.12847900390625,18.12847900390625,18.12847900390625,18.12847900390625,18.12847900390625,18.12847900390625,18.12847900390625,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.64389801025391,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.81547546386719,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,17.98141479492188,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,18.14610290527344,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.66790771484375,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,17.84101104736328,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.00440979003906,18.17924499511719,18.17924499511719,18.17924499511719,18.17924499511719,18.17924499511719,18.17924499511719,18.17924499511719,18.17924499511719,18.17924499511719,18.17924499511719,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.70478057861328,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,17.88082122802734,18.05654144287109,18.21479034423828,18.21479034423828,18.21479034423828,18.21479034423828,18.21479034423828,18.21479034423828,18.21479034423828,18.21479034423828,18.21479034423828,18.21479034423828,17.69104766845703,17.69104766845703,17.69104766845703,17.69104766845703,17.69104766845703,17.69104766845703,17.69104766845703],"meminc":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.168914794921875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1594085693359375,0,0,0,0,0,0,0,0,0.1426620483398438,0,0,0,0,0,0,0,0,0,-0.4749908447265625,0,0.1709365844726562,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1736984252929688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4926605224609375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1565399169921875,0,0,0,0,0,0,0,0,0.1641082763671875,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1630706787109375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1338348388671875,0,-0.44940185546875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.168365478515625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.172637939453125,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4879074096679688,0.1631622314453125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.165679931640625,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1701583862304688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.490509033203125,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1759033203125,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1724166870117188,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1715240478515625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4957733154296875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1673507690429688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1737518310546875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1581954956054688,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4742202758789062,0,0,0,0,0,0,0,0,0.1728591918945312,0,0,0,0,0,0,0,0.1601333618164062,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1740188598632812,0,0,0,0,0,0,0,0,0,0,0,0,-0.4705581665039062,0,0,0,0,0,0,0.1755142211914062,0,0,0,0,0,0,0,0.1780014038085938,0,0,0,0,0,0,0,0,0.153076171875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.448486328125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.177703857421875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1781387329101562,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4712677001953125,0,0,0,0,0,0,0,0,0.17926025390625,0,0,0,0,0,0,0,0.1792526245117188,0,0,0,0,0,0,0,0,0,0,0.1715621948242188,0,-0.4856185913085938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.177886962890625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.176666259765625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1693801879882812,0,0,0,0,0,0,0,0,-0.4717941284179688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1754837036132812,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1772613525390625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.47149658203125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.178741455078125,0,0,0,0,0,0,0,0,0.177398681640625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1761550903320312,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.05745697021484375,0,0,0,0,0,0,0,0,0,0,0,-0.5952224731445312,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1571731567382812,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1646804809570312,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1734542846679688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4812850952148438,0,0,0,0,0,0,0.1725997924804688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1750411987304688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1768112182617188,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4686813354492188,0,0,0,0,0,0,0,0.1748046875,0,0,0,0,0,0,0,0,0.175933837890625,0,0.1589202880859375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.47381591796875,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1778182983398438,0,0.1728439331054688,0,0,0,0,0,-0.4805526733398438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1760940551757812,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.164642333984375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1686935424804688,0,0,0,0,0,0,0,0,0,0,0,-0.4732437133789062,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.171051025390625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1683425903320312,0,0,0,0,0,0,0,0,0,0.1769180297851562,0,0,0,0,-0.474578857421875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1648406982421875,0,0,0,0,0,0,0,0,0,0,0.1633529663085938,0,0,0,0,0,0,0,0,0,0,0,0,0,0.169677734375,0,0,0,0,0,0,0,0,0,0,-0.4884490966796875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1652069091796875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1740951538085938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1679153442382812,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4825439453125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1777496337890625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1770095825195312,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4668807983398438,0,0,0,0,0,0,0,0,0.1740646362304688,0,0,0,0,0,0,0,0.1767425537109375,0,0.1728286743164062,0,0,0,0,0,0,0,0,-0.4763259887695312,0.1770477294921875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1743850708007812,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1642990112304688,0,0,0,0,0,0,0,-0.4748458862304688,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1658782958984375,0,0,0,0,0,0,0,0.1722030639648438,0,0,0,0,0,0,0,0,0,0,0.1610946655273438,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.46185302734375,0.175933837890625,0.1630706787109375,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1556625366210938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4648056030273438,0,0,0,0,0,0,0,0,0,0,0.1758041381835938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1632919311523438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4786911010742188,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1605072021484375,0,0.1649627685546875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1713714599609375,0,0,0,0,0,0,0,0,0,-0.4738845825195312,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1606597900390625,0,0,0,0,0,0,0,0,0,0,0.1518783569335938,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1655654907226562,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4925689697265625,0,0,0,0,0,0,0,0.160980224609375,0,0,0,0,0,0,0,0,0,0,0,0.1561813354492188,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1709747314453125,0,0,0,0,0,0,0,0,0,-0.4777069091796875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1678390502929688,0,0,0,0,0,0,0.1674118041992188,0,0,0,0,0,0,0,0,0,0.1695632934570312,0,0,0,0,0,0,0,-0.4845809936523438,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1715774536132812,0,0,0,0,0,0,0,0,0,0,0,0.1659393310546875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1646881103515625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.4781951904296875,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1731033325195312,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1633987426757812,0,0,0,0,0,0,0,0,0,0,0,0,0.174835205078125,0,0,0,0,0,0,0,0,0,-0.4744644165039062,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1760406494140625,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.17572021484375,0.1582489013671875,0,0,0,0,0,0,0,0,0,-0.52374267578125,0,0,0,0,0,0],"filename":[null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R",null,null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R",null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,"/R/rye-env.R","/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,"/R/source-tracker.R",null,"/R/source-tracker.R",null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R","/R/rye-env.R","/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/source-tracker.R","/R/runtime.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R",null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R","/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/source-tracker.R",null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/runtime.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R","/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R",null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R",null,"/R/utils.R","/R/source-tracker.R",null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/runtime.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/compiler.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R","/R/runtime.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/utils.R","/R/source-tracker.R",null,"/R/source-tracker.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R","/R/rye-env.R","/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R",null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R","/R/rye-env.R","/R/rye-env.R","/R/rye-env.R","/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,"/R/rye-env.R","/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/rye-env.R","/R/rye-env.R","/R/runtime.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,"/R/source-tracker.R",null,"/R/source-tracker.R",null,"/R/source-tracker.R",null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,"/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/runtime.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,"/R/runtime.R",null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R","/R/runtime.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/rye-env.R","/R/rye-env.R",null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/runtime.R","/R/runtime.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/source-tracker.R",null,"/R/source-tracker.R",null,"/R/source-tracker.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/rye-env.R","/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/runtime.R",null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/compiler.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/runtime.R","/R/runtime.R",null,null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R",null,"/R/macro.R","/R/rye-engine.R",null,null,null,null,null,null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null,"/R/macro.R","/R/macro.R","/R/macro.R","/R/macro.R","/R/runtime.R",null,null]},"interval":10,"files":[{"filename":"/R/rye-env.R","content":"# RyeEnv: Wraps an R environment with Rye-specific registries (macros, modules) and\n# helpers for define/set!/lookup, module attach, and format_value. Used by the engine\n# and compiled runtime.\n#\n# @field env The underlying R environment.\n# @field macro_registry ModuleRegistry for macros (actually macro registry is per-env via .rye_macros).\n# @field module_registry ModuleRegistry instance for loaded modules.\n# @field env_stack List of environments pushed for evaluation (e.g. current env during eval).\n#\n#' @keywords internal\n#' @noRd\nRyeEnv <- R6::R6Class(\n  \"RyeEnv\",\n  public = list(\n    env = NULL,\n    macro_registry = NULL,\n    module_registry = NULL,\n    env_stack = NULL,\n    # @description Create a RyeEnv from an existing environment or a new one with optional parent.\n    # @param env Optional existing environment. If NULL, a new environment is created.\n    # @param parent Optional parent for the new environment when env is NULL. Cannot be used with env.\n    initialize = function(env = NULL, parent = NULL) {\n      if (!is.null(env) && !is.null(parent)) {\n        stop(\"Cannot specify both 'env' and 'parent' arguments\")\n      }\n      if (is.null(env)) {\n        if (is.null(parent)) {\n          parent <- baseenv()\n        }\n        env <- new.env(parent = parent)\n      }\n      if (!is.environment(env)) {\n        stop(\"RyeEnv requires an environment\")\n      }\n      self$env <- env\n      self$macro_registry <- self$macro_registry_env(env, create = TRUE)\n      self$module_registry <- ModuleRegistry$new(self)\n      self$env_stack <- list()\n    },\n    # @description Push an environment onto the env stack (e.g. current eval env).\n    # @param env Environment to push.\n    push_env = function(env) {\n      self$env_stack <- c(self$env_stack, list(env))\n      invisible(NULL)\n    },\n    # @description Pop the most recently pushed environment from the stack.\n    pop_env = function() {\n      n <- length(self$env_stack)\n      if (n > 0) {\n        self$env_stack <- self$env_stack[-n]\n      }\n      invisible(NULL)\n    },\n    # @description Return the top of the env stack, or globalenv() if stack is empty.\n    # @return Environment.\n    current_env = function() {\n      n <- length(self$env_stack)\n      if (n > 0) {\n        return(self$env_stack[[n]])\n      }\n      globalenv()\n    },\n    # @description Return the raw R environment.\n    # @return Environment.\n    raw = function() {\n      self$env\n    },\n    # @description Define a binding (create in current env). Used by define.\n    # @param name Symbol or character name.\n    # @param value Value to assign.\n    assign = function(name, value) {\n      target <- self$find_define_env(name)\n      assign(name, value, envir = target)\n      invisible(NULL)\n    },\n    # @description Update an existing binding. Used by set!. Errors if name is not defined.\n    # @param name Symbol or character name.\n    # @param value Value to assign.\n    assign_existing = function(name, value) {\n      target_env <- self$find_existing_env(name)\n      assign(name, value, envir = target_env)\n      invisible(NULL)\n    },\n    # @description Get a module's registry entry (env, exports, path) by name.\n    # @param name Module name (single string).\n    # @return List or NULL.\n    resolve_module = function(name) {\n      self$module_registry$get(name)\n    },\n    # @description Attach a module's exports into this RyeEnv's environment.\n    # @param name Module name (single string).\n    # @description Attach a module's exports into this RyeEnv's environment.\n    # @param name Module name (single string).\n    attach_module = function(name) {\n      self$module_registry$attach(name)\n    },\n    # @description Format a value for display (e.g. REPL). Uses format-value from env if bound.\n    # @param value Value to format.\n    # @return Character string.\n    format_value = function(value) {\n      formatter <- get0(\"format-value\", envir = self$env, inherits = TRUE)\n      if (!is.function(formatter)) {\n        return(paste(as.character(value), collapse = \" \"))\n      }\n      tryCatch(\n        do.call(formatter, list(value)),\n        error = function(e) paste(as.character(value), collapse = \" \")\n      )\n    },\n    # @description Coerce value to a single string (symbol or length-1 character). Errors with message otherwise.\n    # @param value Symbol or character.\n    # @param message Error message if invalid.\n    # @return Character string.\n    symbol_or_string = function(value, message) {\n      if (is.symbol(value)) {\n        return(as.character(value))\n      }\n      if (is.character(value) && length(value) == 1) {\n        return(value)\n      }\n      stop(message)\n    },\n    # @description Get (or create) a named registry environment in an env. Used for .rye_macros and .rye_module_registry.\n    # @param name Registry name (e.g. \".rye_macros\").\n    # @param env Target environment or NULL for self$env.\n    # @param create If TRUE, create the registry if missing.\n    # @return Environment or NULL.\n    get_registry = function(name, env = NULL, create = TRUE) {\n      target_env <- if (is.null(env)) self$env else env\n      registry <- get0(name, envir = target_env, inherits = TRUE)\n      if (is.null(registry) && create) {\n        registry <- new.env(parent = emptyenv())\n        assign(name, registry, envir = target_env)\n        lockBinding(name, target_env)\n      }\n      registry\n    },\n    # @description Get (or create) the macro registry environment for an env.\n    # @param env Target environment or NULL for self$env.\n    # @param create If TRUE, create the registry if missing.\n    # @return Environment or NULL.\n    macro_registry_env = function(env = NULL, create = TRUE) {\n      self$get_registry(\".rye_macros\", env, create = create)\n    },\n    # @description Get (or create) the module registry environment for an env.\n    # @param env Target environment or NULL for self$env.\n    # @param create If TRUE, create the registry if missing.\n    # @return Environment or NULL.\n    module_registry_env = function(env = NULL, create = TRUE) {\n      self$get_registry(\".rye_module_registry\", env, create = create)\n    },\n    # @description Environment where (define name ...) should create a binding (always current env).\n    # @param name Unused; for interface consistency.\n    # @return Environment.\n    find_define_env = function(name) {\n      # Define always creates a binding in the current environment,\n      # never modifies parent environments (proper lexical scoping)\n      self$env\n    },\n    # @description Environment containing an existing binding for name (for set!). Walks parent chain.\n    # @param name Symbol or character name.\n    # @return Environment.\n    find_existing_env = function(name) {\n      if (!exists(name, envir = self$env, inherits = TRUE)) {\n        stop(sprintf(\"set!: variable '%s' is not defined\", name))\n      }\n      target_env <- self$env\n      while (!exists(name, envir = target_env, inherits = FALSE)) {\n        if (identical(target_env, emptyenv())) {\n          stop(sprintf(\"set!: variable '%s' not found\", name))\n        }\n        target_env <- parent.env(target_env)\n      }\n      target_env\n    },\n    # @description Assign value to a pattern (symbol or list/destructuring). Dispatches to assign or destructure_bind.\n    # @param pattern Symbol or list pattern.\n    # @param value Value (or list of values for destructuring).\n    # @param mode \"define\" or \"set\".\n    # @param context String for error messages.\n    assign_pattern = function(pattern, value, mode = c(\"define\", \"set\"), context = \"define\") {\n      mode <- match.arg(mode)\n      if (is.symbol(pattern)) {\n        name <- as.character(pattern)\n        if (identical(mode, \"define\")) {\n          self$assign(name, value)\n        } else {\n          self$assign_existing(name, value)\n        }\n        return(invisible(NULL))\n      }\n      if (r6_isinstance(pattern, \"RyeCons\")) {\n        parts <- pattern$parts()\n        pattern <- c(parts$prefix, list(as.symbol(\".\")), list(parts$tail))\n        self$destructure_bind(pattern, value, mode = mode)\n        return(invisible(NULL))\n      }\n      if (is.call(pattern) || (is.list(pattern) && is.null(attr(pattern, \"class\", exact = TRUE)))) {\n        self$destructure_bind(pattern, value, mode = mode)\n        return(invisible(NULL))\n      }\n      stop(sprintf(\"%s requires a symbol or list pattern as the first argument\", context))\n    },\n    # @description Recursively bind pattern to value (list/call with optional . rest). Used by define/set! destructuring.\n    # @param pattern Symbol, list, or call (may contain . for rest).\n    # @param value Value or list of values.\n    # @param mode \"define\" or \"set\".\n    destructure_bind = function(pattern, value, mode = c(\"define\", \"set\")) {\n      mode <- match.arg(mode)\n      bind_symbol <- function(symbol, val) {\n        name <- as.character(symbol)\n        if (identical(name, \".\")) {\n          stop(\"Invalid destructuring pattern: '.'\")\n        }\n        if (identical(mode, \"define\")) {\n          self$assign(name, val)\n        } else {\n          self$assign_existing(name, val)\n        }\n        invisible(NULL)\n      }\n      if (r6_isinstance(pattern, \"RyeCons\")) {\n        parts <- pattern$parts()\n        pattern <- c(parts$prefix, list(as.symbol(\".\")), list(parts$tail))\n      }\n      if (is.symbol(pattern)) {\n        return(bind_symbol(pattern, value))\n      }\n      if (is.null(pattern)) {\n        value_list <- as.list(value)\n        if (length(value_list) != 0) {\n          stop(sprintf(\"Destructuring pattern expects empty list, got %d item(s)\", length(value_list)))\n        }\n        return(invisible(NULL))\n      }\n      if (is.call(pattern) || (is.list(pattern) && is.null(attr(pattern, \"class\", exact = TRUE)))) {\n        parts <- if (is.call(pattern)) as.list(pattern) else pattern\n        dot_idx <- which(vapply(parts, function(x) {\n          is.symbol(x) && identical(as.character(x), \".\")\n        }, logical(1)))\n        if (length(dot_idx) > 1) {\n          stop(\"Destructuring pattern can only contain one '.'\")\n        }\n        value_list <- as.list(value)\n        if (length(dot_idx) == 1) {\n          if (dot_idx == 1 || dot_idx == length(parts)) {\n            stop(\"Destructuring '.' must appear between head and rest\")\n          }\n          if (dot_idx != length(parts) - 1) {\n            stop(\"Destructuring '.' must be followed by a single rest pattern\")\n          }\n          head_patterns <- parts[1:(dot_idx - 1)]\n          rest_pattern <- parts[[dot_idx + 1]]\n          if (length(value_list) < length(head_patterns)) {\n            stop(sprintf(\n              \"Destructuring pattern expects at least %d item(s), got %d\",\n              length(head_patterns),\n              length(value_list)\n            ))\n          }\n          for (i in seq_along(head_patterns)) {\n            self$destructure_bind(head_patterns[[i]], value_list[[i]], mode)\n          }\n          rest_values <- if (length(value_list) > length(head_patterns)) {\n            value_list[(length(head_patterns) + 1):length(value_list)]\n          } else {\n            list()\n          }\n          self$destructure_bind(rest_pattern, rest_values, mode)\n          return(invisible(NULL))\n        }\n        if (length(value_list) != length(parts)) {\n          stop(sprintf(\n            \"Destructuring pattern expects %d item(s), got %d\",\n            length(parts),\n            length(value_list)\n          ))\n        }\n        for (i in seq_along(parts)) {\n          self$destructure_bind(parts[[i]], value_list[[i]], mode)\n        }\n        return(invisible(NULL))\n      }\n      stop(\"Invalid destructuring pattern\")\n    }\n  )\n)\n","normpath":"/Users/will/github/rye/R/rye-env.R"},{"filename":"/R/runtime.R","content":"rye_missing_default <- function() {\n  structure(list(), class = \"rye_missing_default\")\n}\n\n# Compiled-mode helpers: installed in env before eval(compiled, env).\n# Rye truthiness: only #f (FALSE) and #nil (NULL) are false.\n.rye_true_p <- function(x) {\n  if (is.null(x)) {\n    return(FALSE)\n  }\n  if (is.logical(x) && length(x) == 1L && !is.na(x) && identical(x[[1]], FALSE)) {\n    return(FALSE)\n  }\n  TRUE\n}\n\n# Wrapper for define/set! from compiled code (including pattern destructuring).\n# pattern can be a symbol, a string (converted to symbol for simple binding), or a list for destructuring.\n.rye_assign_pattern <- function(env, pattern, value, mode) {\n  if (is.character(pattern) && length(pattern) == 1L) {\n    pattern <- as.symbol(pattern)\n  }\n  RyeEnv$new(env)$assign_pattern(pattern, value, mode = mode, context = if (identical(mode, \"define\")) \"define\" else \"set!\")\n}\n\n# EvalContext: Shared context for MacroExpander and CompiledRuntime. Holds env (RyeEnv)\n# and source_tracker. Created once per engine; macro_expander and compiler are set after.\n#\n# @field env RyeEnv for the engine.\n# @field source_tracker SourceTracker for error locations.\n# @field macro_expander Set by RyeEngine after creation.\n# @field compiled_runtime Set by RyeEngine after creation.\n#\n#' @keywords internal\n#' @noRd\nEvalContext <- R6::R6Class(\n  \"EvalContext\",\n  public = list(\n    env = NULL,\n    source_tracker = NULL,\n    macro_expander = NULL,\n    compiled_runtime = NULL,\n    compiler = NULL,\n    # @description Create context. macro_expander and compiler are assigned by the engine.\n    # @param env RyeEnv instance.\n    # @param source_tracker SourceTracker instance.\n    initialize = function(env, source_tracker) {\n      if (!r6_isinstance(env, \"RyeEnv\")) {\n        stop(\"EvalContext requires a RyeEnv\")\n      }\n      self$env <- env\n      self$source_tracker <- source_tracker\n    }\n  )\n)\n\n# CompiledRuntime: Runtime helpers for compiled evaluation. Owns helper installation,\n# eval_compiled, and compiled-only special form helpers (import/module/defmacro/etc.).\n#\n# @field context EvalContext (env, source_tracker, macro_expander, compiler).\n# @field load_file_fn Function(path, env, create_scope) for load/run/import.\n# @field help_fn Function(topic, env) for (help topic).\n#\n#' @keywords internal\n#' @noRd\nCompiledRuntime <- R6::R6Class(\n  \"CompiledRuntime\",\n  public = list(\n    context = NULL,\n    load_file_fn = NULL,\n    help_fn = NULL,\n    # @description Create compiled runtime.\n    # @param context EvalContext instance.\n    # @param load_file_fn Optional; required for load/run/import.\n    # @param help_fn Optional; required for (help topic).\n    initialize = function(context, load_file_fn = NULL, help_fn = NULL) {\n      if (!r6_isinstance(context, \"EvalContext\")) {\n        stop(\"CompiledRuntime requires an EvalContext\")\n      }\n      self$context <- context\n      self$load_file_fn <- load_file_fn\n      self$help_fn <- help_fn\n    },\n    # @description Install bindings required for compiled code into env.\n    install_helpers = function(env) {\n      assign(\".rye_env\", env, envir = env)\n      assign(\".rye_quote\", base::quote, envir = env)\n      assign(\".rye_true_p\", .rye_true_p, envir = env)\n      assign(\".rye_assign_pattern\", function(env, pattern, value, mode) {\n        value <- self$context$source_tracker$strip_src(value)\n        .rye_assign_pattern(env, pattern, value, mode)\n      }, envir = env)\n      assign(\".rye_load\", self$load_file_fn, envir = env)\n      assign(\".rye_help\", function(topic, env) {\n        if (is.symbol(topic)) topic <- as.character(topic)\n        self$help_fn(topic, env)\n      }, envir = env)\n      assign(\".rye_subscript_call\", function(op_name, args, env) {\n        self$subscript_call_compiled(op_name, args, env)\n      }, envir = env)\n      assign(\"quasiquote\", function(expr) {\n        if (exists(\".rye_macroexpanding\", envir = env, inherits = TRUE) &&\n            isTRUE(get(\".rye_macroexpanding\", envir = env, inherits = TRUE))) {\n          if (is.null(self$context$macro_expander)) {\n            stop(\"macro expander not initialized\")\n          }\n          return(self$context$macro_expander$quasiquote(expr, env))\n        }\n        self$quasiquote_compiled(expr, env)\n      }, envir = env)\n      assign(\".rye_delay\", function(compiled_expr, env) self$promise_new_compiled(compiled_expr, env), envir = env)\n      assign(\".rye_defmacro\", function(name, params, body_arg, docstring, env) self$defmacro_compiled(name, params, body_arg, docstring, env), envir = env)\n      assign(\".rye_macro_quasiquote\", function(expr, env) {\n        if (is.null(self$context$macro_expander)) {\n          stop(\"macro expander not initialized\")\n        }\n        self$context$macro_expander$quasiquote(expr, env)\n      }, envir = env)\n      assign(\".rye_module\", function(module_name, exports, export_all, body_exprs, src_file, env) {\n        self$module_compiled(module_name, exports, export_all, body_exprs, src_file, env)\n      }, envir = env)\n      assign(\".rye_import\", function(arg_value, env) {\n        self$import_compiled(arg_value, env)\n      }, envir = env)\n      assign(\".rye_pkg_access\", function(op_name, pkg, name, env) {\n        self$pkg_access_compiled(op_name, pkg, name, env)\n      }, envir = env)\n      invisible(NULL)\n    },\n    # @description Run compiled R expression in env (helpers must be installed).\n    eval_compiled = function(compiled_expr, env) {\n      if (!is.environment(env)) {\n        stop(\"eval_compiled requires an environment\")\n      }\n      self$context$env$push_env(env)\n      on.exit(self$context$env$pop_env(), add = TRUE)\n      self$install_helpers(env)\n      result_with_vis <- withVisible(eval(compiled_expr, envir = env))\n      value <- self$context$source_tracker$strip_src(result_with_vis$value)\n      if (result_with_vis$visible) {\n        value\n      } else {\n        invisible(value)\n      }\n    },\n    # Import logic for compiled (import x): same semantics as import special form.\n    import_compiled = function(arg_value, env) {\n      is_path <- is.character(arg_value) && length(arg_value) == 1\n      if (is_path) {\n        path_str <- arg_value\n        module_path <- rye_resolve_path_only(path_str)\n        if (is.null(module_path)) {\n          stop(sprintf(\"Module not found: %s\", path_str))\n        }\n        registry_key <- rye_normalize_path_absolute(module_path)\n      } else {\n        module_name <- RyeEnv$new(env)$symbol_or_string(arg_value, \"import requires a module name symbol or string\")\n        registry_key <- module_name\n      }\n      shared_registry <- self$context$env$module_registry\n      if (!shared_registry$exists(registry_key)) {\n        if (is_path) {\n          if (is.null(self$load_file_fn)) {\n            stop(\"import requires a load_file function\")\n          }\n          self$load_file_fn(module_path, self$context$env$env, create_scope = FALSE)\n        } else {\n          module_path <- rye_resolve_module_path(registry_key)\n          if (is.null(module_path)) {\n            stop(sprintf(\"Module not found: %s\", registry_key))\n          }\n          if (is.null(self$load_file_fn)) {\n            stop(\"import requires a load_file function\")\n          }\n          self$load_file_fn(module_path, self$context$env$env, create_scope = FALSE)\n        }\n        if (!shared_registry$exists(registry_key)) {\n          stop(sprintf(\"Module '%s' did not register itself\", registry_key))\n        }\n      }\n      shared_registry$attach_into(registry_key, env)\n      invisible(NULL)\n    },\n    # Package access (:: / :::) for compiled code. pkg and name are strings from the compiler.\n    pkg_access_compiled = function(op_name, pkg_name, obj_name, env) {\n      if (!is.character(pkg_name) || length(pkg_name) != 1 ||\n          !is.character(obj_name) || length(obj_name) != 1) {\n        stop(\"Package and object names must be length-1 character\")\n      }\n      if (identical(op_name, \"::\")) {\n        getExportedValue(pkg_name, obj_name)\n      } else if (identical(op_name, \":::\")) {\n        getFromNamespace(obj_name, pkg_name)\n      } else {\n        stop(\"Unknown package access operator: \", op_name)\n      }\n    },\n    subscript_call_compiled = function(op_name, args, env) {\n      if (!is.character(op_name) || length(op_name) != 1) {\n        stop(\"subscript operator name must be a single string\")\n      }\n      if (!is.list(args)) {\n        stop(\"subscript args must be a list\")\n      }\n      fn <- get(op_name, envir = baseenv())\n      args <- lapply(args, private$quote_arg_impl, quote_symbols = FALSE)\n      do.call(fn, args)\n    },\n    # @description Apply a function to evaluated args (used in tests).\n    do_call = function(fn, args, env = NULL) {\n      if (is.null(env)) {\n        env <- self$context$env$current_env()\n      }\n      private$do_call_impl(fn, args, env)\n    },\n    quasiquote_compiled = function(expr, env) {\n      private$quasiquote_compiled_impl(expr, env, 1L)\n    },\n    promise_new_compiled = function(compiled_expr, env) {\n      RyePromise$new(compiled_expr, env, self$eval_compiled)\n    },\n    # @description Quote an argument for compiled helpers (used in tests).\n    quote_arg = function(value, quote_symbols = TRUE) {\n      private$quote_arg_impl(value, quote_symbols = quote_symbols)\n    },\n    defmacro_compiled = function(name, params, body_arg, docstring, env) {\n      body_list <- if (is.call(body_arg) && length(body_arg) >= 1 && identical(as.character(body_arg[[1]]), \"begin\")) {\n        as.list(body_arg)[-1]\n      } else {\n        list(body_arg)\n      }\n      self$context$macro_expander$defmacro(name, params, body_list, docstring = docstring, env = env)\n      invisible(NULL)\n    },\n    module_compiled = function(module_name, exports, export_all, body_exprs, src_file, env) {\n      module_env <- new.env(parent = env)\n      assign(\".rye_module\", TRUE, envir = module_env)\n      self$context$env$module_registry$register(module_name, module_env, exports)\n      if (!is.null(src_file) && is.character(src_file) && length(src_file) == 1L && nzchar(src_file) && grepl(\"[/\\\\\\\\]\", src_file)) {\n        absolute_path <- rye_normalize_path_absolute(src_file)\n        self$context$env$module_registry$alias(absolute_path, module_name)\n      }\n      self$install_helpers(module_env)\n      assign(\".rye_env\", module_env, envir = module_env)\n      result <- private$eval_seq_compiled(body_exprs, module_env)\n      if (export_all) {\n        exports <- setdiff(ls(module_env, all.names = TRUE), \".rye_module\")\n        self$context$env$module_registry$update_exports(module_name, exports)\n      }\n      result\n    }\n  ),\n  private = list(\n    quote_arg_impl = function(value, quote_symbols = TRUE) {\n      if (is.call(value) || (quote_symbols && is.symbol(value))) {\n        return(as.call(list(as.symbol(\"quote\"), value)))\n      }\n      value\n    },\n    do_call_impl = function(fn, args, env) {\n      # Special handling for $, [, [[ - don't quote symbols\n      if (identical(fn, base::`$`) || identical(fn, base::`[`) || identical(fn, base::`[[`)) {\n        args <- lapply(args, private$quote_arg_impl, quote_symbols = FALSE)\n        return(do.call(fn, args))\n      }\n\n      # For rye_no_quote functions, always quote symbols and calls to prevent\n      # premature evaluation during promise forcing, but do it in the Rye environment\n      # so symbols are looked up correctly.\n      if (isTRUE(attr(fn, \"rye_no_quote\"))) {\n        args <- lapply(args, private$quote_arg_impl, quote_symbols = TRUE)\n        return(do.call(fn, args, envir = env))\n      }\n\n      # For other functions, quote symbols and calls as usual\n      args <- lapply(args, private$quote_arg_impl, quote_symbols = TRUE)\n      do.call(fn, args)\n    },\n    eval_seq_compiled = function(exprs, env) {\n      if (is.null(exprs) || length(exprs) == 0) {\n        return(invisible(NULL))\n      }\n      if (!is.list(exprs)) {\n        exprs <- list(exprs)\n      }\n      result <- NULL\n      for (expr in exprs) {\n        expanded <- self$context$macro_expander$macroexpand(expr, env = env, preserve_src = TRUE)\n        compiled <- self$context$compiler$compile(expanded, env, strict = TRUE)\n        result <- self$eval_compiled(compiled, env)\n      }\n      result\n    },\n    quasiquote_compiled_impl = function(expr, env, depth) {\n      if (!is.call(expr)) {\n        return(expr)\n      }\n      if (is.call(expr) && length(expr) > 0 && is.symbol(expr[[1]]) && as.character(expr[[1]]) == \"quote\") {\n        return(expr)\n      }\n      if (is.call(expr) && length(expr) > 0 && is.symbol(expr[[1]]) && as.character(expr[[1]]) == \"unquote\") {\n        if (length(expr) != 2) {\n          stop(\"unquote requires exactly 1 argument\")\n        }\n        if (depth == 1) {\n          compiled <- self$context$compiler$compile(expr[[2]], env)\n          if (is.null(compiled)) {\n            stop(\"unquote could not be compiled\")\n          }\n          return(self$eval_compiled(compiled, env))\n        }\n        return(as.call(list(as.symbol(\"unquote\"), private$quasiquote_compiled_impl(expr[[2]], env, depth - 1L))))\n      }\n      if (is.call(expr) && length(expr) > 0 && is.symbol(expr[[1]]) && as.character(expr[[1]]) == \"unquote-splicing\") {\n        stop(\"unquote-splicing can only appear in list context\")\n      }\n      if (is.call(expr) && length(expr) > 0 && is.symbol(expr[[1]]) && as.character(expr[[1]]) == \"quasiquote\") {\n        if (length(expr) != 2) {\n          stop(\"quasiquote requires exactly 1 argument\")\n        }\n        return(as.call(list(as.symbol(\"quasiquote\"), private$quasiquote_compiled_impl(expr[[2]], env, depth + 1L))))\n      }\n      result <- list()\n      result_idx <- 1L\n      i <- 1L\n      while (i <= length(expr)) {\n        elem <- expr[[i]]\n        if (is.call(elem) && length(elem) > 0 && is.symbol(elem[[1]]) && as.character(elem[[1]]) == \"unquote-splicing\") {\n          if (depth == 1) {\n            if (length(elem) != 2) {\n              stop(\"unquote-splicing requires exactly 1 argument\")\n            }\n            compiled <- self$context$compiler$compile(elem[[2]], env)\n            if (is.null(compiled)) {\n              stop(\"unquote-splicing could not be compiled\")\n            }\n            spliced <- self$eval_compiled(compiled, env)\n            if (is.call(spliced)) {\n              spliced <- as.list(spliced)\n            }\n            if (is.list(spliced)) {\n              if (length(spliced) > 0) {\n                for (item in spliced) {\n                  result[[result_idx]] <- item\n                  result_idx <- result_idx + 1L\n                }\n              }\n            } else {\n              stop(\"unquote-splicing requires a list\")\n            }\n          } else {\n            result[[result_idx]] <- as.call(list(\n              as.symbol(\"unquote-splicing\"),\n              private$quasiquote_compiled_impl(elem[[2]], env, depth - 1L)\n            ))\n            result_idx <- result_idx + 1L\n          }\n        } else {\n          processed <- private$quasiquote_compiled_impl(elem, env, depth)\n          result[[result_idx]] <- processed\n          result_idx <- result_idx + 1L\n        }\n        i <- i + 1L\n      }\n      as.call(result)\n    }\n  )\n)","normpath":"/Users/will/github/rye/R/runtime.R"},{"filename":"/R/macro.R","content":"# MacroExpander: Defines and expands Rye macros. Handles defmacro, macroexpand,\n# macroexpand_1, quasiquote/unquote, gensym, hygiene. Shares EvalContext with compiled runtime.\n#\n# @field context EvalContext (env, source_tracker).\n#\n#' @keywords internal\n#' @noRd\nMacroExpander <- R6::R6Class(\n  \"MacroExpander\",\n  public = list(\n    context = NULL,\n    # @description Create macro expander.\n    # @param context EvalContext instance.\n    initialize = function(context) {\n      if (!r6_isinstance(context, \"EvalContext\")) {\n        stop(\"MacroExpander requires an EvalContext\")\n      }\n      self$context <- context\n    },\n    # @description Define a macro. Registers name in env's macro registry.\n    # @param name Symbol or character macro name.\n    # @param params Formal parameter list.\n    # @param body Macro body (unevaluated).\n    # @param docstring Optional string for (help name).\n    # @param env Target environment or NULL for context$env$env.\n    defmacro = function(name, params, body, docstring = NULL, env = NULL) {\n      target_env <- private$normalize_env(env)\n      private$define_macro(name, params, body, target_env, docstring = docstring)\n      invisible(NULL)\n    },\n    # @description Recursively expand macros in expr.\n    # @param expr Rye expression.\n    # @param env Environment for macro lookup or NULL.\n    # @param preserve_src Whether to keep source attributes.\n    # @return Expanded expression.\n    macroexpand = function(expr, env = NULL, preserve_src = FALSE) {\n      target_env <- private$normalize_env(env)\n      registry <- private$macro_registry(target_env, create = FALSE)\n      # Use cached macro names (optimization 1.3)\n      macro_names <- private$get_macro_names(registry)\n      if (length(macro_names) == 0 || !private$contains_macro_head(expr, macro_names)) {\n        if (isTRUE(preserve_src)) {\n          return(expr)\n        }\n        return(self$context$source_tracker$strip_src(expr))\n      }\n      private$macroexpand_impl(expr, target_env, preserve_src, max_depth = Inf, walk = TRUE)\n    },\n    # @description Expand one layer of macros only.\n    # @param expr Rye expression.\n    # @param env Environment or NULL.\n    # @param preserve_src Whether to keep source attributes.\n    # @return Expanded expression.\n    macroexpand_1 = function(expr, env = NULL, preserve_src = FALSE) {\n      target_env <- private$normalize_env(env)\n      private$macroexpand_impl(expr, target_env, preserve_src, max_depth = 1, walk = FALSE)\n    },\n    # @description Check if name is bound to a macro in env.\n    # @param name Symbol or character.\n    # @param env Environment or NULL.\n    # @return Logical.\n    is_macro = function(name, env = NULL) {\n      target_env <- private$normalize_env(env)\n      private$is_macro_impl(name, target_env)\n    },\n    # @description Get the macro function for name in env.\n    # @param name Symbol or character.\n    # @param env Environment or NULL.\n    # @return Macro function or error.\n    get_macro = function(name, env = NULL) {\n      target_env <- private$normalize_env(env)\n      private$get_macro_impl(name, target_env)\n    },\n    # @description Capture (macroexpand preserving one symbol). Used for macro hygiene.\n    # @param symbol Symbol to preserve.\n    # @param expr Expression to expand.\n    # @return Expanded expression with symbol unquoted.\n    capture = function(symbol, expr) {\n      private$capture_impl(symbol, expr)\n    },\n    # @description Unwrap hygiene wrappers from an expression.\n    # @param expr Expression possibly containing hygiene wrappers.\n    # @return Expression.\n    hygiene_unwrap = function(expr) {\n      private$hygiene_unwrap_impl(expr)\n    },\n    # @description Generate a unique symbol (for macro hygiene).\n    # @param prefix Character prefix for the symbol name.\n    # @return New symbol.\n    gensym = function(prefix = \"G\") {\n      private$gensym_impl(prefix = prefix)\n    },\n    # @description Expand quasiquote (backtick) with unquote (comma) in expr.\n    # @param expr Quasiquoted expression.\n    # @param env Environment for unquote evaluation.\n    # @param depth Unquote depth (for nested quasiquote).\n    # @return Expanded expression.\n    quasiquote = function(expr, env, depth = 1) {\n      target_env <- private$normalize_env(env)\n      private$quasiquote_impl(expr, target_env, depth = depth)\n    }\n  ),\n  private = list(\n    gensym_counter = 0,\n    hygiene_counter = 0,\n    # Cache for macro registry names (optimization 1.3)\n    macro_names_cache = NULL,\n    macro_names_cache_env = NULL,\n    # Cache for macro name lookup (optimization 1.4) - environment for O(1) lookup\n    macro_names_set = NULL,\n    eval_compiled_in_env = function(expr, env) {\n      if (is.null(self$context$compiled_runtime) || is.null(self$context$compiler)) {\n        stop(\"compiled runtime not initialized\")\n      }\n      if (!is.null(self$context$macro_expander)) {\n        expr <- self$context$macro_expander$macroexpand(expr, env = env, preserve_src = TRUE)\n      }\n      prev_strict <- self$context$compiler$strict\n      prev_macro_eval <- self$context$compiler$macro_eval\n      on.exit({\n      self$context$compiler$strict <- prev_strict\n      self$context$compiler$macro_eval <- prev_macro_eval\n    }, add = TRUE)\n    self$context$compiler$macro_eval <- TRUE\n    compiled <- self$context$compiler$compile(expr, env, strict = TRUE)\n    self$context$compiled_runtime$eval_compiled(compiled, env)\n  },\n    normalize_env = function(env) {\n      if (r6_isinstance(env, \"RyeEnv\")) {\n        return(env$env)\n      }\n      if (is.environment(env)) {\n        return(env)\n      }\n      if (is.null(env)) {\n        return(self$context$env$env)\n      }\n      stop(\"Expected a RyeEnv or environment\")\n    },\n    macro_registry = function(env, create = TRUE) {\n      registry <- self$context$env$get_registry(\".rye_macros\", env, create = create)\n      # Invalidate cache if registry changed (optimization 1.3)\n      if (!identical(registry, private$macro_names_cache_env)) {\n        private$macro_names_cache <- NULL\n        private$macro_names_cache_env <- NULL\n        private$macro_names_set <- NULL\n      }\n      registry\n    },\n    get_macro_names = function(registry) {\n      # Check cache (optimization 1.3)\n      if (!is.null(private$macro_names_cache) &&\n          identical(registry, private$macro_names_cache_env)) {\n        return(private$macro_names_cache)\n      }\n      # Cache miss - recompute\n      if (!is.null(registry)) {\n        macro_names <- ls(registry, all.names = TRUE)\n      } else {\n        macro_names <- character(0)\n      }\n      # Update cache\n      private$macro_names_cache <- macro_names\n      private$macro_names_cache_env <- registry\n      # Build hash set for O(1) lookup (optimization 1.4)\n      if (length(macro_names) > 0) {\n        set_list <- as.list(rep(TRUE, length(macro_names)))\n        names(set_list) <- macro_names\n        private$macro_names_set <- list2env(set_list, hash = TRUE, parent = emptyenv())\n      } else {\n        private$macro_names_set <- new.env(hash = TRUE, parent = emptyenv())\n      }\n      macro_names\n    },\n    contains_macro_head = function(expr, macro_names) {\n      if (is.null(expr)) {\n        return(FALSE)\n      }\n      if (r6_isinstance(expr, \"RyeCons\")) {\n        if (private$contains_macro_head(expr$car, macro_names)) {\n          return(TRUE)\n        }\n        return(private$contains_macro_head(expr$cdr, macro_names))\n      }\n      if (is.call(expr)) {\n        if (length(expr) > 0 && is.symbol(expr[[1]])) {\n          op_name <- as.character(expr[[1]])\n          if (op_name %in% c(\"quote\", \"quasiquote\", \"defmacro\")) {\n            return(FALSE)\n          }\n          # Use O(1) hash set lookup (optimization 1.4)\n          if (!is.null(private$macro_names_set) && exists(op_name, envir = private$macro_names_set, inherits = FALSE)) {\n            return(TRUE)\n          }\n        }\n        for (i in seq_len(length(expr))) {\n          if (private$contains_macro_head(expr[[i]], macro_names)) {\n            return(TRUE)\n          }\n        }\n        return(FALSE)\n      }\n      if (is.list(expr) && is.null(attr(expr, \"class\", exact = TRUE))) {\n        for (i in seq_along(expr)) {\n          if (private$contains_macro_head(expr[[i]], macro_names)) {\n            return(TRUE)\n          }\n        }\n      }\n      FALSE\n    },\n    is_macro_impl = function(name, env) {\n      if (!is.symbol(name)) {\n        return(FALSE)\n      }\n      registry <- private$macro_registry(env, create = FALSE)\n      !is.null(registry) && exists(as.character(name), envir = registry, inherits = FALSE)\n    },\n    get_macro_impl = function(name, env) {\n      registry <- private$macro_registry(env, create = FALSE)\n      if (is.null(registry)) {\n        return(NULL)\n      }\n      registry[[as.character(name)]]\n    },\n    gensym_impl = function(prefix = \"G\") {\n      private$gensym_counter <- private$gensym_counter + 1\n      as.symbol(paste0(prefix, \"__\", private$gensym_counter))\n    },\n    hygiene_gensym = function(prefix = \"H\") {\n      private$hygiene_counter <- private$hygiene_counter + 1\n      as.symbol(paste0(prefix, \"__h\", private$hygiene_counter))\n    },\n    hygiene_wrap = function(expr, origin) {\n      structure(list(expr = expr, origin = origin), class = \"rye_syntax\")\n    },\n    hygiene_is = function(x) {\n      inherits(x, \"rye_syntax\")\n    },\n    hygiene_origin = function(x) {\n      if (private$hygiene_is(x)) {\n        return(x$origin)\n      }\n      NULL\n    },\n    hygiene_expr = function(x) {\n      if (private$hygiene_is(x)) {\n        return(x$expr)\n      }\n      x\n    },\n    hygiene_unwrap_impl = function(expr) {\n      if (private$hygiene_is(expr)) {\n        return(private$hygiene_unwrap_impl(expr$expr))\n      }\n      private$map_expr(expr, private$hygiene_unwrap_impl)\n    },\n    map_expr = function(expr, fn, ...) {\n      if (is.call(expr)) {\n        mapped <- lapply(as.list(expr), fn, ...)\n        return(as.call(mapped))\n      }\n      if (is.list(expr) && is.null(attr(expr, \"class\", exact = TRUE))) {\n        mapped <- lapply(expr, fn, ...)\n        if (!is.null(names(expr))) {\n          names(mapped) <- names(expr)\n        }\n        return(mapped)\n      }\n      expr\n    },\n    capture_impl = function(symbol, expr) {\n      name <- NULL\n      if (is.symbol(symbol)) {\n        name <- as.character(symbol)\n      } else if (is.character(symbol) && length(symbol) == 1) {\n        name <- symbol\n      }\n      if (is.null(name) || !nzchar(name)) {\n        stop(\"capture expects a symbol or single string name\")\n      }\n      private$capture_mark(expr, name)\n    },\n    capture_mark = function(expr, name) {\n      if (private$hygiene_is(expr)) {\n        origin <- private$hygiene_origin(expr)\n        inner <- private$capture_mark(private$hygiene_expr(expr), name)\n        return(private$hygiene_wrap(inner, origin))\n      }\n      if (is.symbol(expr) && identical(as.character(expr), name)) {\n        return(private$hygiene_wrap(expr, \"introduced\"))\n      }\n      private$map_expr(expr, private$capture_mark, name = name)\n    },\n    hygienize = function(expr) {\n      private$hygienize_expr(expr, env = list(), protected = FALSE)\n    },\n    hygienize_expr = function(expr, env, protected) {\n      if (private$hygiene_is(expr)) {\n        origin <- private$hygiene_origin(expr)\n        inner <- private$hygiene_expr(expr)\n        if (identical(origin, \"call_site\")) {\n          return(private$hygienize_expr(inner, env, protected = TRUE))\n        }\n        if (identical(origin, \"introduced\")) {\n          return(private$hygienize_expr(inner, env, protected = FALSE))\n        }\n        return(private$hygienize_expr(inner, env, protected = protected))\n      }\n\n      if (is.symbol(expr)) {\n        if (isTRUE(protected)) {\n          return(expr)\n        }\n        name <- as.character(expr)\n        if (!is.null(env[[name]])) {\n          return(env[[name]])\n        }\n        return(expr)\n      }\n\n      if (!is.call(expr)) {\n        if (is.list(expr) && is.null(attr(expr, \"class\", exact = TRUE))) {\n          updated <- lapply(expr, private$hygienize_expr, env = env, protected = protected)\n          if (!is.null(names(expr))) {\n            names(updated) <- names(expr)\n          }\n          return(updated)\n        }\n        return(expr)\n      }\n\n      op <- expr[[1]]\n      if (is.symbol(op)) {\n        op_name <- as.character(op)\n        if (op_name %in% c(\"quote\", \"quasiquote\")) {\n          return(expr)\n        }\n      }\n\n      if (isTRUE(protected)) {\n        updated <- lapply(as.list(expr), private$hygienize_expr, env = env, protected = TRUE)\n        return(as.call(updated))\n      }\n\n      if (is.symbol(op)) {\n        op_name <- as.character(op)\n        if (op_name == \"begin\") {\n          return(private$hygienize_begin(expr, env))\n        }\n        if (op_name == \"define\") {\n          return(private$hygienize_define(expr, env)$expr)\n        }\n        if (op_name == \"lambda\") {\n          return(private$hygienize_lambda(expr, env))\n        }\n        if (op_name %in% c(\"let\", \"let*\", \"letrec\")) {\n          return(private$hygienize_let(expr, env, op_name))\n        }\n      }\n\n      updated <- lapply(as.list(expr), private$hygienize_expr, env = env, protected = FALSE)\n      as.call(updated)\n    },\n    hygienize_begin = function(expr, env) {\n      result <- list(expr[[1]])\n      current_env <- env\n      if (length(expr) > 1) {\n        for (i in 2:length(expr)) {\n          form <- expr[[i]]\n          if (is.call(form) && length(form) >= 2 && is.symbol(form[[1]]) &&\n              as.character(form[[1]]) == \"define\") {\n            out <- private$hygienize_define(form, current_env)\n            result[[i]] <- out$expr\n            current_env <- out$env\n          } else {\n            result[[i]] <- private$hygienize_expr(form, current_env, protected = FALSE)\n          }\n        }\n      }\n      as.call(result)\n    },\n    hygienize_define = function(expr, env) {\n      result <- list(expr[[1]])\n      name_expr <- expr[[2]]\n      name_origin <- private$hygiene_origin(name_expr)\n      name_expr <- private$hygiene_expr(name_expr)\n      new_env <- env\n      if (is.symbol(name_expr) && !identical(name_origin, \"call_site\")) {\n        name <- as.character(name_expr)\n        fresh <- private$hygiene_gensym(name)\n        new_env[[name]] <- fresh\n        result[[2]] <- fresh\n      } else if (is.call(name_expr) || (is.list(name_expr) && is.null(attr(name_expr, \"class\", exact = TRUE)))) {\n        pattern_out <- private$hygienize_define_pattern(expr[[2]], new_env)\n        result[[2]] <- pattern_out$expr\n        new_env <- pattern_out$env\n      } else {\n        result[[2]] <- private$hygienize_expr(expr[[2]], env, protected = FALSE)\n      }\n      if (length(expr) >= 3) {\n        result[[3]] <- private$hygienize_expr(expr[[3]], env, protected = FALSE)\n      }\n      list(expr = as.call(result), env = new_env)\n    },\n    hygienize_define_pattern = function(pattern, env, protected = FALSE) {\n      if (isTRUE(protected)) {\n        return(list(expr = private$hygienize_expr(pattern, env, protected = TRUE), env = env))\n      }\n      if (private$hygiene_is(pattern)) {\n        origin <- private$hygiene_origin(pattern)\n        inner <- private$hygiene_expr(pattern)\n        if (identical(origin, \"call_site\")) {\n          return(private$hygienize_define_pattern(inner, env, protected = TRUE))\n        }\n        if (identical(origin, \"introduced\")) {\n          return(private$hygienize_define_pattern(inner, env, protected = FALSE))\n        }\n        return(private$hygienize_define_pattern(inner, env, protected = protected))\n      }\n      if (is.symbol(pattern)) {\n        name <- as.character(pattern)\n        if (identical(name, \".\")) {\n          return(list(expr = pattern, env = env))\n        }\n        fresh <- private$hygiene_gensym(name)\n        env[[name]] <- fresh\n        return(list(expr = fresh, env = env))\n      }\n      if (is.call(pattern)) {\n        parts <- as.list(pattern)\n        updated <- list()\n        for (i in seq_along(parts)) {\n          out <- private$hygienize_define_pattern(parts[[i]], env, protected = protected)\n          updated[[i]] <- out$expr\n          env <- out$env\n        }\n        return(list(expr = as.call(updated), env = env))\n      }\n      if (is.list(pattern) && is.null(attr(pattern, \"class\", exact = TRUE))) {\n        updated <- list()\n        for (i in seq_along(pattern)) {\n          out <- private$hygienize_define_pattern(pattern[[i]], env, protected = protected)\n          updated[[i]] <- out$expr\n          env <- out$env\n        }\n        if (!is.null(names(pattern))) {\n          names(updated) <- names(pattern)\n        }\n        return(list(expr = updated, env = env))\n      }\n      list(expr = pattern, env = env)\n    },\n    hygienize_lambda = function(expr, env) {\n      if (length(expr) < 3) {\n        return(expr)\n      }\n      args_expr <- expr[[2]]\n      if (!is.call(args_expr)) {\n        result <- list(expr[[1]], private$hygienize_expr(args_expr, env, protected = TRUE))\n        if (length(expr) > 2) {\n          for (i in 3:length(expr)) {\n            result[[i]] <- private$hygienize_expr(expr[[i]], env, protected = FALSE)\n          }\n        }\n        return(as.call(result))\n      }\n      args_list <- as.list(args_expr)\n      new_args <- list()\n      new_env <- env\n      if (length(args_list) > 0) {\n        for (i in seq_along(args_list)) {\n          arg <- args_list[[i]]\n          arg_origin <- private$hygiene_origin(arg)\n          arg_unwrapped <- private$hygiene_expr(arg)\n          if (is.symbol(arg_unwrapped) && as.character(arg_unwrapped) != \".\" &&\n              !identical(arg_origin, \"call_site\")) {\n            name <- as.character(arg_unwrapped)\n            fresh <- private$hygiene_gensym(name)\n            new_env[[name]] <- fresh\n            new_args[[i]] <- fresh\n          } else {\n            new_args[[i]] <- private$hygienize_expr(arg, env, protected = TRUE)\n          }\n        }\n      }\n      args_out <- if (length(args_list) == 0) args_expr else as.call(new_args)\n      result <- list(expr[[1]], args_out)\n      if (length(expr) > 2) {\n        for (i in 3:length(expr)) {\n          result[[i]] <- private$hygienize_expr(expr[[i]], new_env, protected = FALSE)\n        }\n      }\n      as.call(result)\n    },\n    hygienize_binding_parts = function(binding) {\n      parts <- if (is.call(binding)) as.list(binding) else list()\n      name_origin <- if (length(parts) >= 1) private$hygiene_origin(parts[[1]]) else NULL\n      name_expr <- if (length(parts) >= 1) private$hygiene_expr(parts[[1]]) else NULL\n      list(parts = parts, name_origin = name_origin, name_expr = name_expr)\n    },\n    hygienize_binding_value = function(parts, env) {\n      if (length(parts) >= 2) {\n        return(private$hygienize_expr(parts[[2]], env, protected = FALSE))\n      }\n      NULL\n    },\n    hygienize_let = function(expr, env, op_name) {\n      if (length(expr) < 3) {\n        return(expr)\n      }\n      bindings_expr <- expr[[2]]\n      bindings_list <- if (is.call(bindings_expr)) as.list(bindings_expr) else list()\n      new_bindings <- list()\n      if (op_name == \"letrec\") {\n        value_env <- env\n        body_env <- env\n        if (length(bindings_list) > 0) {\n          for (i in seq_along(bindings_list)) {\n            binding <- bindings_list[[i]]\n            info <- private$hygienize_binding_parts(binding)\n            parts <- info$parts\n            if (length(parts) == 0) {\n              next\n            }\n            name_origin <- info$name_origin\n            name_expr <- info$name_expr\n            if (is.symbol(name_expr) && !identical(name_origin, \"call_site\")) {\n              name <- as.character(name_expr)\n              body_env[[name]] <- private$hygiene_gensym(name)\n            }\n          }\n        }\n        if (length(bindings_list) > 0) {\n          for (i in seq_along(bindings_list)) {\n            binding <- bindings_list[[i]]\n            info <- private$hygienize_binding_parts(binding)\n            parts <- info$parts\n            if (length(parts) == 0) {\n              new_bindings[[i]] <- binding\n              next\n            }\n            name_origin <- info$name_origin\n            name_expr <- info$name_expr\n            if (is.symbol(name_expr) && !identical(name_origin, \"call_site\") &&\n                !is.null(body_env[[as.character(name_expr)]])) {\n              renamed <- body_env[[as.character(name_expr)]]\n              value <- private$hygienize_binding_value(parts, body_env)\n              new_bindings[[i]] <- as.call(list(renamed, value))\n            } else {\n              value <- private$hygienize_binding_value(parts, value_env)\n              new_bindings[[i]] <- as.call(c(list(parts[[1]]), list(value)))\n            }\n          }\n        }\n        bindings_out <- if (length(bindings_list) == 0) bindings_expr else as.call(new_bindings)\n        body <- list(expr[[1]], bindings_out)\n        if (length(expr) > 2) {\n          for (i in 3:length(expr)) {\n            body[[i]] <- private$hygienize_expr(expr[[i]], body_env, protected = FALSE)\n          }\n        }\n        return(as.call(body))\n      }\n\n      if (op_name == \"let*\") {\n        current_env <- env\n        if (length(bindings_list) > 0) {\n          for (i in seq_along(bindings_list)) {\n            binding <- bindings_list[[i]]\n            info <- private$hygienize_binding_parts(binding)\n            parts <- info$parts\n            if (length(parts) == 0) {\n              new_bindings[[i]] <- binding\n              next\n            }\n            name_origin <- info$name_origin\n            name_expr <- info$name_expr\n            value <- private$hygienize_binding_value(parts, current_env)\n            if (is.symbol(name_expr) && !identical(name_origin, \"call_site\")) {\n              name <- as.character(name_expr)\n              fresh <- private$hygiene_gensym(name)\n              current_env[[name]] <- fresh\n              new_bindings[[i]] <- as.call(list(fresh, value))\n            } else {\n              new_bindings[[i]] <- as.call(c(list(parts[[1]]), list(value)))\n            }\n          }\n        }\n        bindings_out <- if (length(bindings_list) == 0) bindings_expr else as.call(new_bindings)\n        body <- list(expr[[1]], bindings_out)\n        if (length(expr) > 2) {\n          for (i in 3:length(expr)) {\n            body[[i]] <- private$hygienize_expr(expr[[i]], current_env, protected = FALSE)\n          }\n        }\n        return(as.call(body))\n      }\n\n      body_env <- env\n      if (length(bindings_list) > 0) {\n        for (i in seq_along(bindings_list)) {\n          binding <- bindings_list[[i]]\n          info <- private$hygienize_binding_parts(binding)\n          parts <- info$parts\n          if (length(parts) == 0) {\n            next\n          }\n          name_origin <- info$name_origin\n          name_expr <- info$name_expr\n          if (is.symbol(name_expr) && !identical(name_origin, \"call_site\")) {\n            name <- as.character(name_expr)\n            body_env[[name]] <- private$hygiene_gensym(name)\n          }\n        }\n      }\n      if (length(bindings_list) > 0) {\n        for (i in seq_along(bindings_list)) {\n          binding <- bindings_list[[i]]\n          info <- private$hygienize_binding_parts(binding)\n          parts <- info$parts\n          if (length(parts) == 0) {\n            new_bindings[[i]] <- binding\n            next\n          }\n          name_origin <- info$name_origin\n          name_expr <- info$name_expr\n          if (is.symbol(name_expr) && !identical(name_origin, \"call_site\") &&\n              !is.null(body_env[[as.character(name_expr)]])) {\n            renamed <- body_env[[as.character(name_expr)]]\n            value <- private$hygienize_binding_value(parts, env)\n            new_bindings[[i]] <- as.call(list(renamed, value))\n          } else {\n            value <- private$hygienize_binding_value(parts, env)\n            new_bindings[[i]] <- as.call(c(list(parts[[1]]), list(value)))\n          }\n        }\n      }\n      bindings_out <- if (length(bindings_list) == 0) bindings_expr else as.call(new_bindings)\n      body <- list(expr[[1]], bindings_out)\n      if (length(expr) > 2) {\n        for (i in 3:length(expr)) {\n          body[[i]] <- private$hygienize_expr(expr[[i]], body_env, protected = FALSE)\n        }\n      }\n      as.call(body)\n    },\n    quasiquote_impl = function(expr, env, depth = 1) {\n      if (!is.call(expr)) {\n        return(expr)\n      }\n      if (is.call(expr) && length(expr) > 0 && is.symbol(expr[[1]]) && as.character(expr[[1]]) == \"unquote\") {\n        if (depth == 1) {\n          if (length(expr) != 2) {\n            stop(\"unquote requires exactly 1 argument\")\n          }\n          value <- private$eval_compiled_in_env(expr[[2]], env)\n          return(private$hygiene_wrap(value, \"call_site\"))\n        }\n        return(as.call(list(as.symbol(\"unquote\"), private$quasiquote_impl(expr[[2]], env, depth - 1))))\n      }\n      if (is.call(expr) && length(expr) > 0 && is.symbol(expr[[1]]) && as.character(expr[[1]]) == \"unquote-splicing\") {\n        stop(\"unquote-splicing can only appear in list context\")\n      }\n      if (is.call(expr) && length(expr) > 0 && is.symbol(expr[[1]]) && as.character(expr[[1]]) == \"quasiquote\") {\n        return(as.call(list(as.symbol(\"quasiquote\"), private$quasiquote_impl(expr[[2]], env, depth + 1))))\n      }\n      result <- list()\n      i <- 1\n      while (i <= length(expr)) {\n        elem <- expr[[i]]\n        if (is.call(elem) && length(elem) > 0 && is.symbol(elem[[1]]) && as.character(elem[[1]]) == \"unquote-splicing\") {\n          if (depth == 1) {\n            if (length(elem) != 2) {\n              stop(\"unquote-splicing requires exactly 1 argument\")\n            }\n            spliced <- private$eval_compiled_in_env(elem[[2]], env)\n            if (is.call(spliced)) {\n              spliced <- as.list(spliced)\n            }\n            if (is.list(spliced)) {\n              for (item in spliced) {\n                result <- c(result, list(private$hygiene_wrap(item, \"call_site\")))\n              }\n            } else {\n              stop(\"unquote-splicing requires a list\")\n            }\n          } else {\n            result <- c(result, list(as.call(list(\n              as.symbol(\"unquote-splicing\"),\n              private$quasiquote_impl(elem[[2]], env, depth - 1)\n            ))))\n          }\n        } else {\n          processed <- private$quasiquote_impl(elem, env, depth)\n          result <- c(result, list(processed))\n        }\n        i <- i + 1\n      }\n      as.call(result)\n    },\n    macro_parse_params = function(params) {\n      # Handle rest parameters (. syntax) - similar to lambda\n      rest_param <- NULL\n      rest_param_spec <- NULL\n      arg_items <- as.list(params)\n\n      if (length(arg_items) > 0) {\n        dot_idx <- which(vapply(arg_items, function(arg) {\n          is.symbol(arg) && as.character(arg) == \".\"\n        }, logical(1)))\n\n        if (length(dot_idx) > 1) {\n          stop(\"Dotted parameter list can only contain one '.'\")\n        }\n\n        if (length(dot_idx) == 1) {\n          if (dot_idx != length(arg_items) - 1) {\n            stop(\"Dotted parameter list must have exactly one parameter after '.'\")\n          }\n\n          rest_arg <- arg_items[[dot_idx + 1]]\n\n          # Rest can be simple symbol or (pattern ...)\n          if (is.symbol(rest_arg)) {\n            rest_param <- as.character(rest_arg)\n            rest_param_spec <- list(\n              type = \"name\",\n              name = rest_param,\n              pattern = NULL\n            )\n          } else if (is.call(rest_arg) || is.list(rest_arg)) {\n            rest_list <- if (is.call(rest_arg)) as.list(rest_arg) else rest_arg\n            is_pattern <- length(rest_list) >= 2 &&\n              is.symbol(rest_list[[1]]) &&\n              as.character(rest_list[[1]]) %in% c(\"pattern\", \"destructure\")\n\n            if (!is_pattern) {\n              stop(\"Rest parameter must be a symbol or (pattern <pat>)\")\n            }\n            if (length(rest_list) != 2) {\n              stop(\"Rest pattern must be (pattern <pat>), defaults not allowed\")\n            }\n\n            rest_pattern <- rest_list[[2]]\n            rest_param_spec <- list(\n              type = \"pattern\",\n              name = NULL,\n              pattern = rest_pattern\n            )\n          } else {\n            stop(\"Rest parameter must be a symbol or (pattern <pat>)\")\n          }\n\n          # Remove . and rest param from regular params\n          if (dot_idx > 1) {\n            arg_items <- arg_items[1:(dot_idx - 1)]\n          } else {\n            arg_items <- list()\n          }\n        }\n      }\n\n      # Parse regular parameters\n      param_specs <- list()\n      param_names <- character(0)\n      param_defaults <- list()\n\n      for (arg in arg_items) {\n        if (is.symbol(arg)) {\n          # Simple required parameter: x\n          name <- as.character(arg)\n          param_names <- c(param_names, name)\n          param_defaults[[name]] <- rye_missing_default()\n          param_specs[[length(param_specs) + 1]] <- list(\n            type = \"name\",\n            formal = name,\n            pattern = NULL\n          )\n\n        } else if (is.call(arg) || is.list(arg)) {\n          arg_list <- if (is.call(arg)) as.list(arg) else arg\n\n          # Check for incomplete pattern - (pattern) with no actual pattern\n          if (length(arg_list) == 1 && is.symbol(arg_list[[1]]) &&\n              as.character(arg_list[[1]]) %in% c(\"pattern\", \"destructure\")) {\n            stop(\"pattern must be (pattern <pat>) or (pattern <pat> <default>)\")\n          }\n\n          # Check if pattern wrapper\n          is_pattern <- length(arg_list) >= 2 &&\n            is.symbol(arg_list[[1]]) &&\n            as.character(arg_list[[1]]) %in% c(\"pattern\", \"destructure\")\n\n          # Check if simple default pair (name default)\n          is_default_pair <- length(arg_list) == 2 &&\n            is.symbol(arg_list[[1]]) &&\n            !is_pattern\n\n          if (is_pattern) {\n            # Pattern: (pattern (a b)) or (pattern (a b) (list 1 2))\n            if (length(arg_list) != 2 && length(arg_list) != 3) {\n              stop(\"pattern must be (pattern <pat>) or (pattern <pat> <default>)\")\n            }\n\n            pattern <- arg_list[[2]]\n            default_expr <- rye_missing_default()\n\n            if (length(arg_list) == 3) {\n              default_expr <- arg_list[[3]]\n              if (is.null(default_expr)) {\n                default_expr <- quote(NULL)\n              }\n            }\n\n            # Generate unique name for internal binding\n            tmp_name <- as.character(self$gensym(\".__rye_macro_arg\"))\n            param_names <- c(param_names, tmp_name)\n            param_defaults[[tmp_name]] <- default_expr\n            param_specs[[length(param_specs) + 1]] <- list(\n              type = \"pattern\",\n              formal = tmp_name,\n              pattern = pattern\n            )\n\n          } else if (is_default_pair) {\n            # Simple optional: (x 10)\n            name <- as.character(arg_list[[1]])\n            default_expr <- arg_list[[2]]\n            if (is.null(default_expr)) {\n              default_expr <- quote(NULL)\n            }\n\n            param_names <- c(param_names, name)\n            param_defaults[[name]] <- default_expr\n            param_specs[[length(param_specs) + 1]] <- list(\n              type = \"name\",\n              formal = name,\n              pattern = NULL\n            )\n\n          } else {\n            stop(\"defmacro parameters must be symbols, (name default), or (pattern ...)\")\n          }\n\n        } else {\n          stop(\"defmacro parameters must be symbols, (name default), or (pattern ...)\")\n        }\n      }\n\n      list(\n        param_specs = param_specs,\n        param_names = param_names,\n        param_defaults = param_defaults,\n        rest_param_spec = rest_param_spec\n      )\n    },\n    define_macro = function(name, params, body, env, docstring = NULL) {\n      # Debug: check body\n      if (FALSE && as.character(name) == \"empty-pat\") {\n        message(\"DEBUG define_macro for \", as.character(name))\n        message(\"  body class: \", class(body))\n        message(\"  body length: \", length(body))\n        if (length(body) > 0) {\n          message(\"  first body expr: \", deparse(body[[1]]))\n        }\n      }\n\n      # Parse parameters\n      parsed <- private$macro_parse_params(params)\n      param_specs <- parsed$param_specs\n      param_names <- parsed$param_names\n      param_defaults <- parsed$param_defaults\n      rest_param_spec <- parsed$rest_param_spec\n\n      macro_fn <- function(...) {\n        macro_env <- new.env(parent = env)\n        assign(\".rye_macroexpanding\", TRUE, envir = macro_env)\n        args <- match.call(expand.dots = FALSE)$...\n\n        if (!is.null(rest_param_spec)) {\n          # Extract regular param specs (before rest)\n          regular_param_specs <- param_specs\n\n          # Bind regular parameters\n          for (i in seq_along(regular_param_specs)) {\n            spec <- regular_param_specs[[i]]\n            param_name <- spec$formal\n\n            if (i <= length(args)) {\n              # Argument provided\n              value <- args[[i]]\n            } else {\n              # Check for default\n              default_expr <- param_defaults[[param_name]]\n              if (inherits(default_expr, \"rye_missing_default\")) {\n                stop(sprintf(\"Missing required parameter (position %d)\", i))\n              }\n              # Evaluate default\n              value <- private$eval_compiled_in_env(default_expr, env)\n            }\n\n            # Bind the value\n            if (spec$type == \"pattern\") {\n              # Destructure into macro_env\n              RyeEnv$new(macro_env)$destructure_bind(spec$pattern, value, mode = \"define\")\n            } else {\n              # Simple binding\n              assign(param_name, value, envir = macro_env)\n            }\n          }\n\n          # Bind rest parameter\n          if (length(args) > length(regular_param_specs)) {\n            rest_args <- args[(length(regular_param_specs) + 1):length(args)]\n          } else {\n            rest_args <- list()\n          }\n\n          if (rest_param_spec$type == \"pattern\") {\n            # Destructure rest args\n            RyeEnv$new(macro_env)$destructure_bind(rest_param_spec$pattern, rest_args, mode = \"define\")\n          } else {\n            # Simple rest binding\n            assign(rest_param_spec$name, rest_args, envir = macro_env)\n          }\n\n        } else {\n          # No rest parameter - bind all regular params\n          for (i in seq_along(param_specs)) {\n            spec <- param_specs[[i]]\n            param_name <- spec$formal\n\n            if (i <= length(args)) {\n              # Argument provided\n              value <- args[[i]]\n            } else {\n              # Check for default\n              default_expr <- param_defaults[[param_name]]\n              if (inherits(default_expr, \"rye_missing_default\")) {\n                stop(sprintf(\"Missing required parameter (position %d)\", i))\n              }\n              # Evaluate default\n              value <- private$eval_compiled_in_env(default_expr, env)\n            }\n\n            # Bind the value\n            if (spec$type == \"pattern\") {\n              # Destructure into macro_env\n              RyeEnv$new(macro_env)$destructure_bind(spec$pattern, value, mode = \"define\")\n            } else {\n              # Simple binding\n              assign(param_name, value, envir = macro_env)\n            }\n          }\n\n          # Check we didn't get too many args (no rest param to catch them)\n          if (length(args) > length(param_specs)) {\n            # Count required vs provided\n            required_count <- sum(vapply(param_specs, function(spec) {\n              inherits(param_defaults[[spec$formal]], \"rye_missing_default\")\n            }, logical(1)))\n            stop(sprintf(\"Macro %s expects %d-%d arguments, got %d\",\n                         as.character(name), required_count, length(param_specs), length(args)))\n          }\n        }\n\n        result <- NULL\n        for (expr in body) {\n          result <- private$eval_compiled_in_env(expr, macro_env)\n        }\n        result\n      }\n\n      attr(macro_fn, \"rye_macro\") <- list(\n        params = param_names,\n        param_defaults = param_defaults\n      )\n      if (!is.null(docstring)) {\n        attr(macro_fn, \"rye_doc\") <- list(description = docstring)\n      }\n\n      registry <- private$macro_registry(env, create = TRUE)\n      name_str <- as.character(name)\n      if (exists(name_str, envir = registry, inherits = FALSE)) {\n        rye_unlock_binding(name_str, registry)\n      }\n      registry[[name_str]] <- macro_fn\n      lockBinding(name_str, registry)\n      assign(name_str, macro_fn, envir = env)\n      # Invalidate cache after defining macro (optimization 1.3)\n      private$macro_names_cache <- NULL\n      private$macro_names_cache_env <- NULL\n      private$macro_names_set <- NULL\n    },\n    macroexpand_impl = function(expr, env, preserve_src, max_depth, walk) {\n      if (!is.call(expr) || length(expr) == 0) {\n        if (!walk || isTRUE(preserve_src)) {\n          return(expr)\n        }\n        return(self$context$source_tracker$strip_src(expr))\n      }\n\n      op <- expr[[1]]\n\n      if (private$is_macro_impl(op, env) && max_depth > 0) {\n        macro_fn <- private$get_macro_impl(op, env)\n        args <- as.list(expr[-1])\n        expanded <- tryCatch(\n          do.call(macro_fn, args),\n          error = function(e) {\n            if (isTRUE(getOption(\"rye.debug_macro\"))) {\n              op_name <- if (is.symbol(op)) as.character(op) else \"<macro>\"\n              stop(sprintf(\"macro expansion failed for %s: %s\", op_name, conditionMessage(e)), call. = FALSE)\n            }\n            stop(e)\n          }\n        )\n        expanded <- private$hygienize(expanded)\n        expanded <- private$hygiene_unwrap_impl(expanded)\n        expanded <- self$context$source_tracker$src_inherit(expanded, expr)\n\n        if (max_depth <= 1 || !walk) {\n          if (isTRUE(preserve_src)) {\n            return(expanded)\n          }\n          if (walk) {\n            return(self$context$source_tracker$strip_src(expanded))\n          }\n          return(expanded)\n        }\n\n        return(private$macroexpand_impl(expanded, env, preserve_src, max_depth - 1, walk = TRUE))\n      }\n\n      if (!walk) {\n        return(expr)\n      }\n\n      if (is.symbol(op)) {\n        op_name <- as.character(op)\n        if (op_name == \"lambda\" && length(expr) >= 3) {\n          args_expr <- expr[[2]]\n          if (!isTRUE(preserve_src)) {\n            args_expr <- self$context$source_tracker$strip_src(args_expr)\n          }\n          body_exprs <- lapply(as.list(expr)[-(1:2)], function(e) {\n            private$macroexpand_impl(e, env, preserve_src, max_depth, walk = TRUE)\n          })\n          out <- as.call(c(list(op), list(args_expr), body_exprs))\n          if (isTRUE(preserve_src)) {\n            return(self$context$source_tracker$src_inherit(out, expr))\n          }\n          return(self$context$source_tracker$strip_src(out))\n        }\n        if (op_name == \"define\" && length(expr) >= 3 && is.call(expr[[2]])) {\n          head_expr <- expr[[2]]\n          if (!isTRUE(preserve_src)) {\n            head_expr <- self$context$source_tracker$strip_src(head_expr)\n          }\n          body_exprs <- lapply(as.list(expr)[-(1:2)], function(e) {\n            private$macroexpand_impl(e, env, preserve_src, max_depth, walk = TRUE)\n          })\n          out <- as.call(c(list(op), list(head_expr), body_exprs))\n          if (isTRUE(preserve_src)) {\n            return(self$context$source_tracker$src_inherit(out, expr))\n          }\n          return(self$context$source_tracker$strip_src(out))\n        }\n        if (op_name %in% c(\"quote\", \"defmacro\")) {\n          if (isTRUE(preserve_src)) {\n            return(expr)\n          }\n          return(self$context$source_tracker$strip_src(expr))\n        }\n        if (op_name == \"quasiquote\") {\n          if (isTRUE(preserve_src)) {\n            return(expr)\n          }\n          return(self$context$source_tracker$strip_src(expr))\n        }\n      }\n\n      # Recurse into all elements (including the operator) so that e.g. (and 1 2 3)\n      # inside ((lambda (tmp) (if tmp (and 1 2 3) tmp)) #t) gets expanded.\n      result <- list()\n      for (i in seq_len(length(expr))) {\n        result[[i]] <- private$macroexpand_impl(expr[[i]], env, preserve_src, max_depth, walk = TRUE)\n      }\n\n      expanded <- self$context$source_tracker$src_inherit(as.call(result), expr)\n      if (isTRUE(preserve_src)) {\n        return(expanded)\n      }\n      self$context$source_tracker$strip_src(expanded)\n    }\n  )\n)\n","normpath":"/Users/will/github/rye/R/macro.R"},{"filename":"/R/rye-engine.R","content":"#' Core Rye engine\n#'\n#' Provides class-based organization for tokenization, parsing, macro expansion,\n#' compiled evaluation, and environment management.\n#'\n#' @importFrom R6 R6Class\n#' @field tokenizer Tokenizer instance used to lex source text.\n#' @field parser Parser instance used to read expressions.\n#' @field macro_expander Macro expander for Rye macros.\n#' @field compiled_runtime Compiled runtime helper for executing compiled expressions.\n#' @field compiler Compiler for AST-to-R translation.\n#' @field help_system Help system for Rye topics.\n#' @field env RyeEnv backing the engine.\n#' @field source_tracker Source tracker used for error context.\n#' @param env Optional environment or RyeEnv used as the engine base.\n#' @param parent Optional parent environment for the new environment.\n#' @param source Character string containing Rye source.\n#' @param source_name Optional source name for error reporting.\n#' @param tokens Token list produced by the tokenizer.\n#' @param expr Rye expression (symbol/call/atomic value).\n#' @param exprs List of Rye expressions to evaluate.\n#' @param text Character string of Rye code to read/eval.\n#' @param env Optional environment or RyeEnv to evaluate in (defaults to engine env).\n#' @param path File path to load.\n#' @param create_scope Logical; evaluate file in a child environment when TRUE.\n#' @param preserve_src Logical; keep source metadata when macroexpanding.\n#' @param topic Help topic as a single string.\n#' @param compiled_only Logical; if TRUE, require compiled evaluation.\n#' @examples\n#' engine <- RyeEngine$new()\n#' engine$eval_text(\"(+ 1 2 3)\")\n#' @export\nRyeEngine <- R6::R6Class(\n  \"RyeEngine\",\n  public = list(\n    tokenizer = NULL,\n    parser = NULL,\n    macro_expander = NULL,\n    compiled_runtime = NULL,\n    compiler = NULL,\n    help_system = NULL,\n    env = NULL,\n    source_tracker = NULL,\n    #' @description\n    #' Initialize engine components and base environment.\n    #' @param env Optional existing environment to use. If NULL, creates a new environment.\n    #' @param parent Optional parent environment for the new environment. Only used if env is NULL.\n    #'   Defaults to baseenv(). Cannot be specified together with env.\n    initialize = function(env = NULL, parent = NULL) {\n      self$env <- RyeEnv$new(env = env, parent = parent)\n      self$source_tracker <- SourceTracker$new()\n      self$tokenizer <- Tokenizer$new()\n      self$parser <- Parser$new(self$source_tracker)\n\n      # Create shared evaluation context\n      context <- EvalContext$new(self$env, self$source_tracker)\n\n      # Create components with context\n      self$macro_expander <- MacroExpander$new(context)\n      # Link components in context\n      context$macro_expander <- self$macro_expander\n\n      self$compiler <- Compiler$new(context)\n      context$compiler <- self$compiler\n\n      self$compiled_runtime <- CompiledRuntime$new(\n        context,\n        load_file_fn = function(path, env, create_scope = FALSE) self$load_file_in_env(path, env, create_scope),\n        help_fn = function(topic, env) self$help_in_env(topic, env)\n      )\n      context$compiled_runtime <- self$compiled_runtime\n      self$help_system <- HelpSystem$new(self$env, self$macro_expander)\n\n      self$initialize_environment()\n    },\n    #' @description\n    #' Tokenize and parse source into expressions.\n    read = function(source, source_name = NULL) {\n      tokens <- self$tokenizer$tokenize(source)\n      self$parser$parse(tokens, source_name = source_name)\n    },\n    #' @description\n    #' Tokenize source into Rye tokens.\n    tokenize = function(source) {\n      self$tokenizer$tokenize(source)\n    },\n    #' @description\n    #' Parse tokens into expressions.\n    parse = function(tokens, source_name = NULL) {\n      self$parser$parse(tokens, source_name = source_name)\n    },\n    #' @description\n    #' Evaluate a single expression via compiled evaluation.\n    eval = function(expr) {\n      private$eval_one_compiled(expr, self$env$env, compiled_only = TRUE)\n    },\n    #' @description\n    #' Evaluate a single expression in an explicit environment.\n    eval_in_env = function(expr, env) {\n      target_env <- private$resolve_env_arg(env)\n      private$eval_one_compiled(expr, target_env, compiled_only = TRUE)\n    },\n    #' @description\n    #' Evaluate expressions in order via compiled evaluation.\n    eval_seq = function(exprs, env = NULL) {\n      self$eval_exprs(exprs, env = env, compiled_only = TRUE)\n    },\n    #' @description\n    #' Evaluate expressions with source tracking.\n    eval_exprs = function(exprs, env = NULL, compiled_only = TRUE) {\n      target_env <- private$resolve_env_arg(env)\n      self$source_tracker$with_error_context(function() {\n        private$eval_seq_compiled(exprs, target_env, compiled_only = compiled_only)\n      })\n    },\n    #' @description\n    #' Read and evaluate text.\n    eval_text = function(text, env = NULL, source_name = \"<eval>\", compiled_only = TRUE) {\n      exprs <- self$read(text, source_name = source_name)\n      self$eval_exprs(exprs, env = env, compiled_only = compiled_only)\n    },\n    #' @description\n    #' Populate standard bindings\n    initialize_environment = function() {\n      env <- self$env$env\n\n      self$env$get_registry(\".rye_module_registry\", create = TRUE)\n      self$env$get_registry(\".rye_macros\", create = TRUE)\n\n      # Cons-cell primitives (bound in stdlib env so no globalenv/package lookup)\n      env$`__cons` <- function(car, cdr) RyeCons$new(car, cdr)\n      env$`pair?` <- function(x) r6_isinstance(x, \"RyeCons\")\n      env$`__cons-as-list` <- function(x) if (r6_isinstance(x, \"RyeCons\")) x$as_list() else list()\n      env$`__cons-parts` <- function(x) if (r6_isinstance(x, \"RyeCons\")) x$parts() else list(prefix = list(), tail = x)\n\n      env$gensym <- function(prefix = \"G\") {\n        self$macro_expander$gensym(prefix = prefix)\n      }\n\n      env$capture <- function(symbol, expr) {\n        self$macro_expander$capture(symbol, expr)\n      }\n\n      env$`macro?` <- function(x) {\n        is.symbol(x) && self$macro_expander$is_macro(x, env = env)\n      }\n\n      env$macroexpand <- function(expr, preserve_src = FALSE) {\n        self$macro_expander$macroexpand(expr, env = env, preserve_src = preserve_src)\n      }\n\n      env$`macroexpand-1` <- function(expr, preserve_src = FALSE) {\n        self$macro_expander$macroexpand_1(expr, env = env, preserve_src = preserve_src)\n      }\n\n      env$`macroexpand-all` <- env$macroexpand\n\n      env$eval <- function(expr, env = parent.frame()) {\n        self$eval_in_env(expr, env)\n      }\n      attr(env$eval, \"rye_doc\") <- list(\n        description = \"Evaluate expr in the current environment.\"\n      )\n\n      env$`stdlib-env` <- function() env\n      env$`current-env` <- function() {\n        if (exists(\".rye_env\", envir = parent.frame(), inherits = TRUE)) {\n          return(get(\".rye_env\", envir = parent.frame(), inherits = TRUE))\n        }\n        self$env$current_env()\n      }\n\n      env$`promise?` <- function(x) {\n        r6_isinstance(x, \"RyePromise\")\n      }\n      env$force <- function(x) {\n        if (!r6_isinstance(x, \"RyePromise\")) {\n          return(x)\n        }\n        x$value()\n      }\n\n      env$`promise-expr` <- function(p) {\n        if (!r6_isinstance(p, \"RyePromise\")) {\n          stop(\"promise-expr requires a promise (created with delay)\")\n        }\n        p$get_expr()\n      }\n\n      attr(env$`promise?`, \"rye_doc\") <- list(\n        description = \"Return TRUE if x is a promise.\"\n      )\n      attr(env$force, \"rye_doc\") <- list(\n        description = \"Force a promise or return x unchanged.\"\n      )\n      attr(env$`promise-expr`, \"rye_doc\") <- list(\n        description = \"Extract the unevaluated expression from a promise.\"\n      )\n\n      env$rye_read <- function(source, source_name = NULL) {\n        self$read(source, source_name = source_name)\n      }\n      env$rye_parse <- function(tokens, source_name = NULL) {\n        self$parse(tokens, source_name = source_name)\n      }\n      env$rye_tokenize <- function(source) {\n        self$tokenize(source)\n      }\n\n      env$rye_set_doc <- function(fn, docstring) {\n        # If fn is a primitive, wrap it in a regular function\n        if (is.primitive(fn)) {\n          prim <- fn\n          fn <- function(...) prim(...)\n        }\n        attr(fn, \"rye_doc\") <- list(description = docstring)\n        fn\n      }\n\n      env$rye_get_doc <- function(fn) {\n        doc_attr <- attr(fn, \"rye_doc\", exact = TRUE)\n        if (is.null(doc_attr)) NULL else doc_attr$description\n      }\n\n      # identical? - Thin wrapper around R's native identical() function\n      #\n      # Does structural comparison for value-semantic types (lists, vectors, S3, S4)\n      # Does pointer comparison for reference-semantic types (environments, RC, R6, external pointers)\n      #\n      # This is simply R's identical() exposed to Rye with no modifications.\n      # For configurable equality with numeric type coercion, use equal? with :strict keyword.\n      env$`identical?` <- base::identical\n      attr(env$`identical?`, \"rye_doc\") <- list(\n        description = \"R's native equality test. Structural comparison for value types, pointer comparison for reference types. This is R's identical() function with no modifications.\"\n      )\n\n      env$`r/eval` <- function(expr, env = NULL) {\n        if (is.null(env)) {\n          if (exists(\".rye_env\", envir = parent.frame(), inherits = TRUE)) {\n            env <- get(\".rye_env\", envir = parent.frame(), inherits = TRUE)\n          } else {\n            env <- self$env$current_env()\n          }\n        }\n        expr_expr <- substitute(expr)\n        expr_value <- expr\n        expr <- if (is.call(expr_value) || is.symbol(expr_value)) expr_value else expr_expr\n        expr <- self$macro_expander$hygiene_unwrap(expr)\n        # Unwrap (quote x) so we evaluate x in env; R's eval(quote(x), env) would look up x\n        if (is.call(expr) && length(expr) == 2L && identical(expr[[1L]], quote(quote))) {\n          expr <- expr[[2L]]\n        }\n        saved <- list()\n        if (is.call(expr) && length(expr) > 0) {\n          op <- expr[[1]]\n          if (is.symbol(op)) {\n            op_name <- as.character(op)\n            if (op_name == \"while\" && exists(\"while\", envir = env, inherits = FALSE)) {\n              saved[[\"while\"]] <- get(\"while\", envir = env, inherits = FALSE)\n              rm(\"while\", envir = env, inherits = FALSE)\n            }\n            if (op_name == \"for\" && exists(\"for\", envir = env, inherits = FALSE)) {\n              saved[[\"for\"]] <- get(\"for\", envir = env, inherits = FALSE)\n              rm(\"for\", envir = env, inherits = FALSE)\n            }\n          }\n        }\n        on.exit({\n          if (!is.null(saved[[\"while\"]])) {\n            assign(\"while\", saved[[\"while\"]], envir = env)\n          }\n          if (!is.null(saved[[\"for\"]])) {\n            assign(\"for\", saved[[\"for\"]], envir = env)\n          }\n        }, add = TRUE)\n        # R's eval(symbol, envir) can look up in the wrong env when called from\n        # do.call; use get() for symbols so lookup is explicitly in env.\n        if (is.symbol(expr)) {\n          get(as.character(expr), envir = env, inherits = TRUE)\n        } else {\n          eval(expr, envir = env)\n        }\n      }\n      attr(env$`r/eval`, \"rye_no_quote\") <- TRUE\n\n      self$load_stdlib_into_env(env)\n\n      env\n    },\n    #' @description\n    #' Load all stdlib modules in dependency order into an environment. Each module\n    #' is loaded and its exports attached into \\code{env}. Used by\n    #' \\code{initialize_environment()} and by the test helper for a custom env.\n    #' @param env Environment to load stdlib into (e.g. \\code{self$env$env} or a test env).\n    load_stdlib_into_env = function(env) {\n      resolved <- private$resolve_env_arg(env)\n      stdlib_dir <- system.file(\"rye\", package = \"rye\")\n      if (!dir.exists(stdlib_dir)) {\n        stop(\"stdlib directory not found\")\n      }\n      cache_path <- system.file(\"rye\", \"load-order.rds\", package = \"rye\")\n      if (nzchar(cache_path) && file.exists(cache_path)) {\n        load_order <- readRDS(cache_path)\n        if (!is.character(load_order) || length(load_order) == 0L) {\n          load_order <- NULL\n        }\n      } else {\n        load_order <- NULL\n      }\n      if (is.null(load_order)) {\n        deps <- FileDeps$new(dir = stdlib_dir)\n        load_order <- deps$get_load_order()\n      }\n      target_rye <- RyeEnv$new(resolved)\n      for (name in load_order) {\n        if (!target_rye$module_registry$exists(name)) {\n          path <- rye_resolve_stdlib_path(name)\n          if (is.null(path)) {\n            stop(\"stdlib module not found: \", name)\n          }\n          tryCatch(\n            self$load_file_in_env(path, resolved, create_scope = FALSE),\n            error = function(e) {\n              stop(sprintf(\"Failed to load stdlib module '%s': %s\", name, conditionMessage(e)), call. = FALSE)\n            }\n          )\n        }\n        tryCatch(\n          target_rye$module_registry$attach_into(name, resolved),\n          error = function(e) {\n            stop(sprintf(\"Failed to attach stdlib module '%s': %s\", name, conditionMessage(e)), call. = FALSE)\n          }\n        )\n      }\n      invisible(NULL)\n    },\n    #' @description\n    #' Load and evaluate a Rye source file in an isolated scope. The file runs in a\n    #' child of the engine's environment, so definitions and imports in the file\n    #' are not visible in the engine's main environment or to subsequent code. For\n    #' source-like behavior (definitions visible in the engine), use\n    #' \\code{load_file_in_env(path, env, create_scope = FALSE)}.\n    load_file = function(path) {\n      self$load_file_in_env(path, self$env$env, create_scope = TRUE)\n    },\n    #' @description\n    #' Load and evaluate a Rye source file in an explicit environment. By default\n    #' (\\code{create_scope = FALSE}) the file is evaluated in \\code{env}, so definitions\n    #' and imports in the file are visible in that environment. With\n    #' \\code{create_scope = TRUE}, the file runs in a child of \\code{env} and its\n    #' definitions are not visible in \\code{env}.\n    #' @param create_scope If TRUE, evaluate in a new child of \\code{env}; if FALSE, in \\code{env}.\n    load_file_in_env = function(path, env, create_scope = FALSE) {\n      if (!is.character(path) || length(path) != 1) {\n        stop(\"load requires a single file path string\")\n      }\n      resolved <- private$resolve_env_arg(env)\n      if (!grepl(\"[/\\\\\\\\]\", path)) {\n        if (RyeEnv$new(resolved)$module_registry$exists(path)) {\n          return(invisible(NULL))\n        }\n        stdlib_path <- rye_resolve_stdlib_path(path)\n        if (!is.null(stdlib_path)) {\n          path <- stdlib_path\n        }\n      }\n      if (!file.exists(path)) {\n        stop(sprintf(\"File not found: %s\", path))\n      }\n      text <- paste(readLines(path, warn = FALSE), collapse = \"\\n\")\n      target_env <- if (isTRUE(create_scope)) new.env(parent = resolved) else resolved\n      self$source_tracker$with_error_context(function() {\n        self$eval_seq(self$read(text, source_name = path), env = target_env)\n      })\n    },\n    #' @description\n    #' Expand macros recursively.\n    macroexpand = function(expr, preserve_src = FALSE) {\n      self$macro_expander$macroexpand(expr, env = self$env$env, preserve_src = preserve_src)\n    },\n    #' @description\n    #' Expand macros recursively in an explicit environment.\n    macroexpand_in_env = function(expr, env, preserve_src = FALSE) {\n      target_env <- private$resolve_env_arg(env)\n      self$macro_expander$macroexpand(expr, env = target_env, preserve_src = preserve_src)\n    },\n    #' @description\n    #' Expand a single macro layer.\n    macroexpand_1 = function(expr, preserve_src = FALSE) {\n      self$macro_expander$macroexpand_1(expr, env = self$env$env, preserve_src = preserve_src)\n    },\n    #' @description\n    #' Expand a single macro layer in an explicit environment.\n    macroexpand_1_in_env = function(expr, env, preserve_src = FALSE) {\n      target_env <- private$resolve_env_arg(env)\n      self$macro_expander$macroexpand_1(expr, env = target_env, preserve_src = preserve_src)\n    },\n    #' @description\n    #' Inspect expansion and compilation for debugging. Parse text, expand macros in env,\n    #' then compile to R. Returns parsed AST, expanded form, compiled R expression, and\n    #' deparsed R code so you can see exactly what a Rye program becomes.\n    #' @param text Character; Rye source (single expression or multiple).\n    #' @param env Environment or NULL (use engine env). Must have macros/stdlib if needed.\n    #' @param source_name Name for parse errors.\n    #' @return List with \\code{parsed} (first expr), \\code{expanded}, \\code{compiled} (R expr or NULL), \\code{compiled_deparsed} (character, or NULL).\n    inspect_compilation = function(text, env = NULL, source_name = \"<inspect>\") {\n      target_env <- private$resolve_env_arg(env)\n      exprs <- self$read(text, source_name = source_name)\n      if (length(exprs) == 0) {\n        return(list(parsed = NULL, expanded = NULL, compiled = NULL, compiled_deparsed = NULL))\n      }\n      parsed <- exprs[[1]]\n      expanded <- self$macroexpand_in_env(parsed, target_env)\n      compiled <- tryCatch(\n        self$compiler$compile(expanded, target_env, strict = FALSE),\n        error = function(e) NULL\n      )\n      compiled_deparsed <- if (!is.null(compiled)) deparse(compiled) else NULL\n      list(parsed = parsed, expanded = expanded, compiled = compiled, compiled_deparsed = compiled_deparsed)\n    },\n    #' @description\n    #' Show help for a topic.\n    help = function(topic) {\n      self$help_system$help(topic)\n    },\n    #' @description\n    #' Show help for a topic in an explicit environment.\n    help_in_env = function(topic, env) {\n      target_env <- private$resolve_env_arg(env)\n      self$help_system$help_in_env(topic, target_env)\n    },\n    #' @description\n    #' Start the Rye REPL using this engine.\n    repl = function() {\n      RyeREPL$new(engine = self)$run()\n    }\n  ),\n  private = list(\n    resolve_env_arg = function(env) {\n      if (r6_isinstance(env, \"RyeEnv\")) {\n        return(env$env)\n      }\n      if (is.environment(env)) {\n        return(env)\n      }\n      if (is.null(env)) {\n        return(self$env$env)\n      }\n      stop(\"Expected a RyeEnv or environment\")\n    },\n    eval_one_compiled = function(expr, env, compiled_only = TRUE) {\n      expanded <- self$macroexpand_in_env(expr, env, preserve_src = TRUE)\n      compiled <- self$compiler$compile(expanded, env, strict = isTRUE(compiled_only))\n      if (!is.null(compiled)) {\n        return(self$compiled_runtime$eval_compiled(compiled, env))\n      }\n      msg <- self$compiler$last_error\n      if (is.null(msg) || !nzchar(msg)) {\n        msg <- \"Expression could not be compiled\"\n      } else {\n        msg <- paste0(\"Expression could not be compiled: \", msg)\n      }\n      stop(msg, call. = FALSE)\n    },\n    eval_seq_compiled = function(exprs, target_env, compiled_only = TRUE) {\n      if (length(exprs) == 0) {\n        return(invisible(NULL))\n      }\n      result <- NULL\n      result_visible <- FALSE\n      for (expr in exprs) {\n        expanded <- self$macroexpand_in_env(expr, target_env, preserve_src = TRUE)\n        compiled <- self$compiler$compile(expanded, target_env, strict = isTRUE(compiled_only))\n        if (is.null(compiled)) {\n          msg <- self$compiler$last_error\n          if (is.null(msg) || !nzchar(msg)) {\n            msg <- \"Expression sequence could not be compiled\"\n          } else {\n            msg <- paste0(\"Expression sequence could not be compiled: \", msg)\n          }\n          stop(msg, call. = FALSE)\n        }\n        src <- self$source_tracker$src_get(expr)\n        if (!is.null(src)) {\n          self$source_tracker$push(src)\n        }\n        result_with_vis <- withVisible(self$compiled_runtime$eval_compiled(compiled, target_env))\n        if (!is.null(src)) {\n          self$source_tracker$pop()\n        }\n        result <- result_with_vis$value\n        result_visible <- isTRUE(result_with_vis$visible)\n      }\n      if (isTRUE(result_visible)) {\n        return(result)\n      }\n      invisible(result)\n    }\n  )\n)\n\n.rye_engine_state <- new.env(parent = emptyenv())\n\n#' Get the default Rye engine\n#'\n#' @export\nrye_default_engine <- function() {\n  engine <- get0(\"engine\", envir = .rye_engine_state, inherits = FALSE)\n  if (is.null(engine)) {\n    engine <- RyeEngine$new()\n    assign(\"engine\", engine, envir = .rye_engine_state)\n  }\n  engine\n}","normpath":"/Users/will/github/rye/R/rye-engine.R"},{"filename":"/R/compiler.R","content":"# Compiler: Compiles macro-expanded Rye AST to R expressions for single eval().\n# Used for the optional compiled evaluation path; falls back to interpreter on failure.\n#\n# Reserved name: .rye_env is used for the current environment in compiled code.\n# (define .rye_env x) and (set! .rye_env x) are not compiled (return NULL).\n\n#' @keywords internal\n#' @noRd\nCompiler <- R6::R6Class(\n  \"Compiler\",\n  public = list(\n    context = NULL,\n    # Reserved name for current env in compiled code. User code that defines/sets this is not compiled.\n    env_var_name = \".rye_env\",\n    # Env used as parent for compiled closures (so they see .rye_true_p etc.). Set by engine before compile.\n    current_env = NULL,\n    # When TRUE, invalid forms raise errors instead of returning NULL.\n    strict = FALSE,\n    # When TRUE, compile quasiquote via macro-expander helper (for macro evaluation).\n    macro_eval = FALSE,\n    # Last compilation error (message) when compile() returns NULL.\n    last_error = NULL,\n    # @param context EvalContext (for source_tracker).\n    initialize = function(context) {\n      if (!r6_isinstance(context, \"EvalContext\")) {\n        stop(\"Compiler requires an EvalContext\")\n      }\n      self$context <- context\n    },\n    # @description Compile one expression. Returns R expression or NULL (cannot compile).\n    # @param expr Macro-expanded Rye expression.\n    # @return R expression (language object) or NULL.\n    compile = function(expr, env = NULL, strict = NULL) {\n      if (!is.null(env)) {\n        self$current_env <- env\n      }\n      if (!is.null(strict)) {\n        self$strict <- isTRUE(strict)\n      }\n      self$last_error <- NULL\n      if (isTRUE(self$strict)) {\n        return(private$compile_impl(expr))\n      }\n      tryCatch(private$compile_impl(expr), error = function(e) {\n        if (is.null(self$last_error)) {\n          self$last_error <- conditionMessage(e)\n        }\n        NULL\n      })\n    },\n    # @description Compile a sequence of expressions to a single R expression (block).\n    # @param exprs List of Rye expressions.\n    # @return R expression or NULL.\n    compile_seq = function(exprs, env = NULL, strict = NULL) {\n      if (length(exprs) == 0) {\n        return(private$fail(\"empty expression list\"))\n      }\n      if (!is.null(env)) {\n        self$current_env <- env\n      }\n      if (!is.null(strict)) {\n        self$strict <- isTRUE(strict)\n      }\n      self$last_error <- NULL\n      if (length(exprs) == 1) {\n        return(self$compile(exprs[[1]], env, strict = self$strict))\n      }\n      compiled <- vector(\"list\", length(exprs))\n      for (i in seq_along(exprs)) {\n        compiled[[i]] <- private$compile_impl(exprs[[i]])\n        if (is.null(compiled[[i]])) {\n          return(private$fail(\"unable to compile expression sequence\"))\n        }\n      }\n      private$src_inherit(as.call(c(list(quote(`{`)), compiled)), exprs[[1]])\n    }\n  ),\n  private = list(\n    compiled_nil = function() {\n      as.call(list(quote(quote), NULL))\n    },\n    fail = function(msg) {\n      self$last_error <- msg\n      if (isTRUE(self$strict)) {\n        stop(msg, call. = FALSE)\n      }\n      NULL\n    },\n    src_get = function(expr) {\n      if (is.null(self$context) || is.null(self$context$source_tracker)) {\n        return(NULL)\n      }\n      self$context$source_tracker$src_get(expr)\n    },\n    src_set = function(expr, src) {\n      if (is.null(self$context) || is.null(self$context$source_tracker) || is.null(src)) {\n        return(expr)\n      }\n      if (is.symbol(expr)) {\n        return(expr)\n      }\n      self$context$source_tracker$src_set(expr, src)\n    },\n    src_inherit = function(expr, from) {\n      src <- private$src_get(from)\n      if (is.null(src)) {\n        return(expr)\n      }\n      private$src_set(expr, src)\n    },\n    strip_src = function(expr) {\n      if (is.null(self$context) || is.null(self$context$source_tracker)) {\n        return(expr)\n      }\n      self$context$source_tracker$strip_src(expr)\n    },\n    compile_impl = function(expr) {\n      if (is.null(expr)) {\n        return(private$compiled_nil())\n      }\n      # Atoms (self-evaluating)\n      if (!is.call(expr) && !is.symbol(expr)) {\n        return(private$strip_src(expr))\n      }\n      if (inherits(expr, \"rye_keyword\")) {\n        return(expr)\n      }\n      # Symbol: .rye_nil is the parser sentinel for #nil; compile to NULL\n      if (is.symbol(expr)) {\n        if (identical(expr, as.symbol(\".rye_nil\"))) {\n          return(private$compiled_nil())\n        }\n        return(expr)\n      }\n      # Empty list\n      if (is.call(expr) && length(expr) == 0) {\n        return(expr)\n      }\n      op <- expr[[1]]\n      op_name <- if (is.symbol(op)) as.character(op) else NULL\n      # Special forms\n      if (!is.null(op_name)) {\n        out <- switch(op_name,\n          quote = private$compile_quote(expr),\n          quasiquote = if (isTRUE(self$macro_eval)) private$compile_macro_quasiquote(expr) else private$compile_quasiquote(expr),\n          `if` = private$compile_if(expr),\n          begin = private$compile_begin(expr),\n          define = private$compile_define(expr),\n          `set!` = private$compile_set(expr),\n          lambda = private$compile_lambda(expr),\n          load = private$compile_load(expr),\n          run = private$compile_run(expr),\n          import = private$compile_import(expr),\n          help = private$compile_help(expr),\n          `while` = private$compile_while(expr),\n          and = private$compile_and(expr),\n          or = private$compile_or(expr),\n          delay = private$compile_delay(expr),\n          defmacro = private$compile_defmacro(expr),\n          module = private$compile_module(expr),\n          `~` = private$compile_formula(expr),\n          `::` = private$compile_package_access(expr),\n          `:::` = private$compile_package_access(expr),\n          private$compile_application(expr)\n        )\n        if (!is.null(out)) {\n          return(private$src_inherit(out, expr))\n        }\n        return(out)\n      }\n      # Application (unknown call)\n      private$src_inherit(private$compile_application(expr), expr)\n    },\n    compile_quote = function(expr) {\n      if (length(expr) != 2) {\n        return(private$fail(\"quote requires exactly 1 argument\"))\n      }\n      # Return R (quote x) so that eval(compiled, env) yields the quoted value, not a lookup of x.\n      as.call(list(quote(quote), private$strip_src(expr[[2]])))\n    },\n    compile_quasiquote = function(expr) {\n      if (length(expr) != 2) {\n        return(private$fail(\"quasiquote requires exactly 1 argument\"))\n      }\n      private$compile_quasiquote_impl(expr[[2]], 1L)\n    },\n    compile_macro_quasiquote = function(expr) {\n      if (length(expr) != 2) {\n        return(private$fail(\"quasiquote requires exactly 1 argument\"))\n      }\n      as.call(list(\n        as.symbol(\".rye_macro_quasiquote\"),\n        as.call(list(quote(quote), private$strip_src(expr[[2]]))),\n        as.symbol(self$env_var_name)\n      ))\n    },\n    compile_quasiquote_impl = function(template, depth) {\n      env_sym <- as.symbol(self$env_var_name)\n      eval_in_env <- function(compiled) {\n        as.call(list(quote(base::eval), as.call(list(quote(quote), compiled)), envir = env_sym))\n      }\n      if (!is.call(template)) {\n        return(as.call(list(quote(quote), template)))\n      }\n      op <- template[[1]]\n      op_char <- if (is.symbol(op)) as.character(op) else \"\"\n      if (op_char == \"unquote\") {\n        if (length(template) != 2) {\n          return(private$fail(\"unquote requires exactly 1 argument\"))\n        }\n        if (depth == 1L) {\n          inner <- private$compile_impl(template[[2]])\n          if (is.null(inner)) return(NULL)\n          return(eval_in_env(inner))\n        }\n        inner <- private$compile_quasiquote_impl(template[[2]], depth - 1L)\n        return(as.call(list(quote(quote), as.call(list(as.symbol(\"unquote\"), inner)))))\n      }\n      if (op_char == \"unquote-splicing\") {\n        if (depth == 1L) {\n          return(private$fail(\"unquote-splicing can only appear in list context\"))\n        }\n        if (length(template) != 2) {\n          return(private$fail(\"unquote-splicing requires exactly 1 argument\"))\n        }\n        inner <- private$compile_quasiquote_impl(template[[2]], depth - 1L)\n        return(as.call(list(quote(quote), as.call(list(as.symbol(\"unquote-splicing\"), inner)))))\n      }\n      if (op_char == \"quasiquote\") {\n        if (length(template) != 2) return(private$fail(\"quasiquote requires exactly 1 argument\"))\n        inner <- private$compile_quasiquote_impl(template[[2]], depth + 1L)\n        return(as.call(list(quote(quote), as.call(list(as.symbol(\"quasiquote\"), inner)))))\n      }\n      if (length(template) == 0) {\n        return(as.call(list(quote(quote), template)))\n      }\n      segments <- vector(\"list\", length(template))\n      for (i in seq_len(length(template))) {\n        elem <- template[[i]]\n        if (is.call(elem) && length(elem) >= 1L && is.symbol(elem[[1]])) {\n          elem_op <- as.character(elem[[1]])\n          if (elem_op == \"unquote-splicing\" && depth == 1L) {\n            if (length(elem) != 2) return(private$fail(\"unquote-splicing requires exactly 1 argument\"))\n            compiled <- private$compile_impl(elem[[2]])\n            if (is.null(compiled)) return(private$fail(\"unquote-splicing could not be compiled\"))\n            segments[[i]] <- as.call(list(quote(as.list), eval_in_env(compiled)))\n            next\n          }\n          if (elem_op == \"unquote\" && depth == 1L) {\n            if (length(elem) != 2) return(private$fail(\"unquote requires exactly 1 argument\"))\n            compiled <- private$compile_impl(elem[[2]])\n            if (is.null(compiled)) return(private$fail(\"unquote could not be compiled\"))\n            segments[[i]] <- as.call(list(quote(list), eval_in_env(compiled)))\n            next\n          }\n        }\n        part <- private$compile_quasiquote_impl(elem, depth)\n        segments[[i]] <- as.call(list(quote(list), part))\n      }\n      as.call(c(list(quote(as.call), as.call(c(list(quote(c)), segments)))))\n    },\n    compile_if = function(expr) {\n      if (length(expr) < 3 || length(expr) > 4) {\n        return(private$fail(\"if requires 2 or 3 arguments: (if test then [else])\"))\n      }\n      test <- private$compile_impl(expr[[2]])\n      if (is.null(test)) {\n        return(private$fail(\"if test could not be compiled\"))\n      }\n      then_expr <- private$compile_impl(expr[[3]])\n      if (is.null(then_expr)) {\n        return(private$fail(\"if then-branch could not be compiled\"))\n      }\n      # Rye: only #f and #nil are false\n      test_pred <- as.call(list(as.symbol(\".rye_true_p\"), test))\n      if (length(expr) == 4) {\n        else_expr <- private$compile_impl(expr[[4]])\n        if (is.null(else_expr)) {\n          return(private$fail(\"if else-branch could not be compiled\"))\n        }\n        as.call(list(quote(`if`), test_pred, then_expr, else_expr))\n      } else {\n        as.call(list(quote(`if`), test_pred, then_expr, private$compiled_nil()))\n      }\n    },\n    compile_begin = function(expr) {\n      if (length(expr) <= 1) {\n        return(quote(invisible(NULL)))\n      }\n      parts <- as.list(expr)[-1]\n      # Use early-exit loop with preallocation\n      compiled <- vector(\"list\", length(parts))\n      for (i in seq_along(parts)) {\n        compiled[[i]] <- private$compile_impl(parts[[i]])\n        if (is.null(compiled[[i]])) {\n          return(NULL)  # Early exit on failure\n        }\n      }\n      as.call(c(list(quote(`{`)), compiled))\n    },\n    compile_define = function(expr) {\n      if (length(expr) != 3) {\n        return(private$fail(\"define requires exactly 2 arguments: (define name value)\"))\n      }\n      name <- expr[[2]]\n      if (is.symbol(name) && identical(as.character(name), self$env_var_name)) {\n        return(private$fail(\"define cannot bind reserved name .rye_env\"))\n      }\n      val <- private$compile_impl(expr[[3]])\n      if (is.null(val)) {\n        return(private$fail(\"define value could not be compiled\"))\n      }\n      # Pass pattern unevaluated for destructuring: symbol -> string; list/call -> .rye_quote(pattern)\n      pattern_arg <- if (is.symbol(name)) as.character(name) else as.call(list(as.symbol(\".rye_quote\"), name))\n      tmp_sym <- if (!is.null(self$context) && !is.null(self$context$macro_expander)) {\n        self$context$macro_expander$gensym(\".__rye_define_value\")\n      } else {\n        as.symbol(paste0(\".__rye_define_value\", as.integer(stats::runif(1, 1, 1e9))))\n      }\n      assign_tmp <- as.call(list(quote(`<-`), tmp_sym, val))\n      assign_call <- as.call(list(\n        as.symbol(\".rye_assign_pattern\"),\n        as.symbol(self$env_var_name),\n        pattern_arg,\n        tmp_sym,\n        \"define\"\n      ))\n      # (define x v) returns invisible(v) like the interpreter; evaluate v once.\n      as.call(list(quote(`{`), assign_tmp, assign_call, as.call(list(quote(invisible), tmp_sym))))\n    },\n    compile_set = function(expr) {\n      if (length(expr) != 3) {\n        return(private$fail(\"set! requires exactly 2 arguments: (set! name value)\"))\n      }\n      name <- expr[[2]]\n      if (is.symbol(name) && identical(as.character(name), self$env_var_name)) {\n        return(private$fail(\"set! cannot bind reserved name .rye_env\"))\n      }\n      val <- private$compile_impl(expr[[3]])\n      if (is.null(val)) {\n        return(private$fail(\"set! value could not be compiled\"))\n      }\n      # Pass pattern unevaluated for destructuring: symbol -> string; list/call -> .rye_quote(pattern)\n      pattern_arg <- if (is.symbol(name)) as.character(name) else as.call(list(as.symbol(\".rye_quote\"), name))\n      as.call(list(\n        as.symbol(\".rye_assign_pattern\"),\n        as.symbol(self$env_var_name),\n        pattern_arg,\n        val,\n        \"set\"\n      ))\n    },\n    compile_lambda = function(expr) {\n      if (length(expr) < 3) {\n        return(private$fail(\"lambda requires at least 2 arguments: (lambda (args...) body...)\"))\n      }\n      args_expr <- expr[[2]]\n      params <- private$lambda_params(args_expr)\n      if (is.null(params)) {\n        return(private$fail(\"lambda arguments must be a list\"))\n      }\n      body_exprs <- if (length(expr) >= 3) {\n        as.list(expr)[-(1:2)]\n      } else {\n        list()\n      }\n      docstring <- NULL\n      if (length(body_exprs) > 0) {\n        first_body <- private$strip_src(body_exprs[[1]])\n        if (is.character(first_body) && length(first_body) == 1L) {\n          docstring <- first_body\n          body_exprs <- body_exprs[-1]\n        }\n      }\n      if (length(body_exprs) == 0) {\n        body_exprs <- list(private$compiled_nil())\n      }\n      # Use early-exit loop with preallocation\n      compiled_body <- vector(\"list\", length(body_exprs))\n      for (i in seq_along(body_exprs)) {\n        compiled_body[[i]] <- private$compile_impl(body_exprs[[i]])\n        if (is.null(compiled_body[[i]])) {\n          return(private$fail(\"lambda body could not be compiled\"))  # Early exit on failure\n        }\n      }\n      # Prepend .rye_env <- environment() so closure body sees correct current env\n      env_bind <- as.call(list(quote(`<-`), as.symbol(self$env_var_name), quote(environment())))\n      # Preallocate body_parts: 1 (env_bind) + has_rest + param_bindings + rest_param_spec + compiled_body\n      size <- 1 +\n              as.integer(params$has_rest && !is.null(params$rest_param)) +\n              length(params$param_bindings) +\n              as.integer(!is.null(params$rest_param_spec) && identical(params$rest_param_spec$type, \"pattern\")) +\n              length(compiled_body)\n      body_parts <- vector(\"list\", size)\n      idx <- 1\n      body_parts[[idx]] <- env_bind\n      idx <- idx + 1\n      if (params$has_rest && !is.null(params$rest_param)) {\n        body_parts[[idx]] <- as.call(list(quote(`<-`), as.symbol(params$rest_param), quote(list(...))))\n        idx <- idx + 1\n      }\n      if (length(params$param_bindings) > 0) {\n        for (binding in params$param_bindings) {\n          pattern_arg <- as.call(list(as.symbol(\".rye_quote\"), binding$pattern))\n          body_parts[[idx]] <- as.call(list(\n            as.symbol(\".rye_assign_pattern\"),\n            as.symbol(self$env_var_name),\n            pattern_arg,\n            as.symbol(binding$name),\n            \"define\"\n          ))\n          idx <- idx + 1\n        }\n      }\n      if (!is.null(params$rest_param_spec) && identical(params$rest_param_spec$type, \"pattern\")) {\n        pattern_arg <- as.call(list(as.symbol(\".rye_quote\"), params$rest_param_spec$pattern))\n        rest_val <- as.call(list(quote(list), quote(...)))\n        body_parts[[idx]] <- as.call(list(\n          as.symbol(\".rye_assign_pattern\"),\n          as.symbol(self$env_var_name),\n          pattern_arg,\n          rest_val,\n          \"define\"\n        ))\n        idx <- idx + 1\n      }\n      for (i in seq_along(compiled_body)) {\n        body_parts[[idx]] <- compiled_body[[i]]\n        idx <- idx + 1\n      }\n      body_call <- as.call(c(list(quote(`{`)), body_parts))\n      formals_list <- params$formals_list\n      fn_expr <- as.call(list(\n        quote(as.function),\n        c(formals_list, list(body_call)),\n        envir = as.symbol(self$env_var_name)\n      ))\n      if (is.null(docstring)) {\n        return(fn_expr)\n      }\n      fn_sym <- as.symbol(\".__rye_compiled_fn\")\n      as.call(list(\n        quote(`{`),\n        as.call(list(quote(`<-`), fn_sym, fn_expr)),\n        as.call(list(\n          quote(`<-`),\n          as.call(list(quote(attr), fn_sym, \"rye_doc\")),\n          list(description = docstring)\n        )),\n        fn_sym\n      ))\n    },\n    lambda_params = function(args_expr) {\n      arg_items <- if (is.null(args_expr)) {\n        list()\n      } else if (r6_isinstance(args_expr, \"RyeCons\")) {\n        parts <- args_expr$parts()\n        c(parts$prefix, list(as.symbol(\".\")), list(parts$tail))\n      } else if (is.call(args_expr) && length(args_expr) > 0) {\n        as.list(args_expr)\n      } else if (is.list(args_expr)) {\n        args_expr\n      } else {\n        return(private$fail(\"lambda arguments must be a list\"))\n      }\n      rest_param <- NULL\n      rest_param_spec <- NULL\n      if (length(arg_items) > 0) {\n        dot_idx <- which(vapply(arg_items, function(a) {\n          is.symbol(a) && identical(as.character(a), \".\")\n        }, logical(1)))\n        if (length(dot_idx) > 1) {\n          return(private$fail(\"Dotted parameter list can only contain one '.'\"))\n        }\n        if (length(dot_idx) == 1) {\n          if (dot_idx != length(arg_items) - 1) {\n            return(private$fail(\"Dotted parameter list must have exactly one parameter after '.'\"))\n          }\n          rest_arg <- arg_items[[dot_idx + 1]]\n          if (is.symbol(rest_arg)) {\n            rest_param <- as.character(rest_arg)\n            rest_param_spec <- list(type = \"name\", name = rest_param, pattern = NULL)\n          } else {\n            rest_list <- if (is.call(rest_arg)) as.list(rest_arg) else if (is.list(rest_arg)) rest_arg else NULL\n            if (is.null(rest_list) || length(rest_list) < 2 ||\n                !is.symbol(rest_list[[1]]) ||\n                !(as.character(rest_list[[1]]) %in% c(\"pattern\", \"destructure\"))) {\n              return(private$fail(\"Rest parameter must be a symbol or (pattern <pat>)\"))\n            }\n            if (length(rest_list) != 2) {\n              return(private$fail(\"Rest pattern must be (pattern <pat>)\"))\n            }\n            rest_pattern <- rest_list[[2]]\n            rest_display <- paste(deparse(rest_pattern, width.cutoff = 500), collapse = \" \")\n            rest_param_spec <- list(\n              type = \"pattern\",\n              name = NULL,\n              pattern = rest_pattern,\n              display = rest_display\n            )\n          }\n          arg_items <- if (dot_idx > 1) arg_items[1:(dot_idx - 1)] else list()\n        }\n      }\n      formals_list <- list()\n      param_bindings <- list()\n      for (arg in arg_items) {\n        if (is.symbol(arg)) {\n          name <- as.character(arg)\n          formals_list[[name]] <- base::quote(expr = )\n        } else if (is.call(arg) && length(arg) >= 2 && is.symbol(arg[[1]])) {\n          op_char <- as.character(arg[[1]])\n          if (op_char %in% c(\"pattern\", \"destructure\")) {\n            if (length(arg) != 2 && length(arg) != 3) {\n              return(private$fail(\"pattern wrapper must be (pattern <pat>) or (pattern <pat> <default>)\"))\n            }\n            pattern <- arg[[2]]\n            tmp_sym <- if (!is.null(self$context) && !is.null(self$context$macro_expander)) {\n              self$context$macro_expander$gensym(\".__rye_arg\")\n            } else {\n              as.symbol(paste0(\".__rye_arg\", as.integer(stats::runif(1, 1, 1e9))))\n            }\n            tmp_name <- as.character(tmp_sym)\n            if (length(arg) == 3) {\n              default_expr <- private$compile_impl(arg[[3]])\n              if (is.null(default_expr)) {\n                return(private$fail(\"lambda default value could not be compiled\"))\n              }\n              formals_list[[tmp_name]] <- default_expr\n            } else {\n              formals_list[[tmp_name]] <- base::quote(expr = )\n            }\n            display <- paste(deparse(pattern, width.cutoff = 500), collapse = \" \")\n            param_bindings[[length(param_bindings) + 1]] <- list(\n              type = \"pattern\",\n              name = tmp_name,\n              pattern = pattern,\n              display = display\n            )\n          } else if (length(arg) == 2) {\n            name <- op_char\n            default_expr <- private$compile_impl(arg[[2]])\n            if (is.null(default_expr)) {\n              return(private$fail(\"lambda default value could not be compiled\"))\n            }\n            formals_list[[name]] <- default_expr\n          } else {\n            return(private$fail(\"lambda arguments must be symbols, (name default) pairs, or (pattern <pat> [default])\"))\n          }\n        } else {\n          return(private$fail(\"lambda arguments must be symbols, (name default) pairs, or (pattern <pat> [default])\"))\n        }\n      }\n      if (!is.null(rest_param) || !is.null(rest_param_spec)) {\n        formals_list[[\"...\"]] <- base::quote(expr = )\n      }\n      list(\n        formals_list = formals_list,\n        has_rest = !is.null(rest_param) || !is.null(rest_param_spec),\n        rest_param = rest_param,\n        rest_param_spec = rest_param_spec,\n        param_bindings = param_bindings\n      )\n    },\n    compile_load = function(expr) {\n      if (length(expr) != 2) {\n        return(private$fail(\"load requires exactly 1 argument: (load \\\"path\\\")\"))\n      }\n      path <- private$compile_impl(expr[[2]])\n      if (is.null(path)) {\n        return(private$fail(\"load path could not be compiled\"))\n      }\n      as.call(list(\n        as.symbol(\".rye_load\"),\n        path,\n        as.symbol(self$env_var_name),\n        FALSE\n      ))\n    },\n    compile_run = function(expr) {\n      if (length(expr) != 2) {\n        return(private$fail(\"run requires exactly 1 argument: (run \\\"path\\\")\"))\n      }\n      path <- private$compile_impl(expr[[2]])\n      if (is.null(path)) {\n        return(private$fail(\"run path could not be compiled\"))\n      }\n      as.call(list(\n        as.symbol(\".rye_load\"),\n        path,\n        as.symbol(self$env_var_name),\n        TRUE\n      ))\n    },\n    compile_import = function(expr) {\n      if (length(expr) != 2) {\n        return(private$fail(\"import requires exactly 1 argument: (import name)\"))\n      }\n      # Pass argument unevaluated (module name is a symbol/string, not a variable lookup)\n      arg_quoted <- as.call(list(quote(quote), expr[[2]]))\n      as.call(list(\n        as.symbol(\".rye_import\"),\n        arg_quoted,\n        as.symbol(self$env_var_name)\n      ))\n    },\n    compile_help = function(expr) {\n      if (length(expr) != 2) {\n        return(private$fail(\"help requires exactly 1 argument: (help topic)\"))\n      }\n      topic_quoted <- as.call(list(quote(quote), expr[[2]]))\n      as.call(list(\n        as.symbol(\".rye_help\"),\n        topic_quoted,\n        as.symbol(self$env_var_name)\n      ))\n    },\n    compile_while = function(expr) {\n      if (length(expr) < 3) {\n        return(private$fail(\"while requires at least 2 arguments: (while test body...)\"))\n      }\n      test <- private$compile_impl(expr[[2]])\n      if (is.null(test)) {\n        return(private$fail(\"while test could not be compiled\"))\n      }\n      body_expr <- if (length(expr) == 3) expr[[3]] else as.call(c(list(quote(begin)), as.list(expr)[-(1:2)]))\n      body_compiled <- private$compile_impl(body_expr)\n      if (is.null(body_compiled)) {\n        return(private$fail(\"while body could not be compiled\"))\n      }\n      test_pred <- as.call(list(as.symbol(\".rye_true_p\"), test))\n      as.call(list(quote(`while`), test_pred, body_compiled))\n    },\n    compile_delay = function(expr) {\n      if (length(expr) != 2) {\n        return(private$fail(\"delay requires exactly 1 argument\"))\n      }\n      compiled <- private$compile_impl(expr[[2]])\n      if (is.null(compiled)) {\n        return(private$fail(\"delay expression could not be compiled\"))\n      }\n      # Compiled delay uses .rye_delay; promise memoization may differ from interpreter.\n      as.call(list(\n        as.symbol(\".rye_delay\"),\n        as.call(list(quote(quote), compiled)),\n        as.symbol(self$env_var_name)\n      ))\n    },\n    compile_and = function(expr) {\n      if (length(expr) < 2) {\n        return(private$fail(\"and requires at least 1 argument\"))\n      }\n      # Preallocate args list\n      args <- vector(\"list\", length(expr) - 1)\n      for (i in 2:length(expr)) {\n        compiled <- private$compile_impl(expr[[i]])\n        if (is.null(compiled)) {\n          return(private$fail(\"and argument could not be compiled\"))\n        }\n        args[[i - 1]] <- compiled\n      }\n      gensym_tmp <- function() {\n        if (!is.null(self$context) && !is.null(self$context$macro_expander)) {\n          return(self$context$macro_expander$gensym(\".__rye_tmp\"))\n        }\n        as.symbol(paste0(\".__rye_tmp\", as.integer(stats::runif(1, 1, 1e9))))\n      }\n      build <- function(idx) {\n        if (idx == length(args)) {\n          return(args[[idx]])\n        }\n        tmp_sym <- gensym_tmp()\n        as.call(c(list(quote(`{`)),\n          list(as.call(list(quote(`<-`), tmp_sym, args[[idx]]))),\n          list(as.call(list(\n            quote(`if`),\n            as.call(list(as.symbol(\".rye_true_p\"), tmp_sym)),\n            build(idx + 1L),\n            tmp_sym\n          )))\n        ))\n      }\n      build(1L)\n    },\n    compile_or = function(expr) {\n      if (length(expr) < 2) {\n        return(private$fail(\"or requires at least 1 argument\"))\n      }\n      # Preallocate args list\n      args <- vector(\"list\", length(expr) - 1)\n      for (i in 2:length(expr)) {\n        compiled <- private$compile_impl(expr[[i]])\n        if (is.null(compiled)) {\n          return(private$fail(\"or argument could not be compiled\"))\n        }\n        args[[i - 1]] <- compiled\n      }\n      gensym_tmp <- function() {\n        if (!is.null(self$context) && !is.null(self$context$macro_expander)) {\n          return(self$context$macro_expander$gensym(\".__rye_tmp\"))\n        }\n        as.symbol(paste0(\".__rye_tmp\", as.integer(stats::runif(1, 1, 1e9))))\n      }\n      build <- function(idx) {\n        if (idx == length(args)) {\n          return(args[[idx]])\n        }\n        tmp_sym <- gensym_tmp()\n        as.call(c(list(quote(`{`)),\n          list(as.call(list(quote(`<-`), tmp_sym, args[[idx]]))),\n          list(as.call(list(\n            quote(`if`),\n            as.call(list(as.symbol(\".rye_true_p\"), tmp_sym)),\n            tmp_sym,\n            build(idx + 1L)\n          )))\n        ))\n      }\n      build(1L)\n    },\n    compile_defmacro = function(expr) {\n      if (length(expr) < 4) {\n        return(private$fail(\"defmacro requires at least 3 arguments: (defmacro name (params...) body...)\"))\n      }\n      name <- expr[[2]]\n      if (!is.symbol(name)) {\n        return(private$fail(\"defmacro requires a symbol as the first argument\"))\n      }\n      params_expr <- expr[[3]]\n      if (r6_isinstance(params_expr, \"RyeCons\")) {\n        parts <- params_expr$parts()\n        params_expr <- as.call(c(parts$prefix, list(as.symbol(\".\")), list(parts$tail)))\n      }\n      if (!is.call(params_expr) && !is.null(params_expr)) {\n        return(private$fail(\"defmacro parameters must be a list\"))\n      }\n      if (is.call(params_expr) && length(params_expr) > 0) {\n        for (i in seq_along(params_expr)) {\n          item <- params_expr[[i]]\n          if (is.symbol(item)) {\n            next\n          }\n          if (is.call(item)) {\n            if (length(item) < 1) {\n              return(private$fail(\"defmacro parameters must be symbols, (name default), or (pattern ...)\"))\n            }\n            op_char <- if (is.symbol(item[[1]])) as.character(item[[1]]) else NULL\n            if (!is.null(op_char) && op_char %in% c(\"pattern\", \"destructure\")) {\n              if (length(item) != 2 && length(item) != 3) {\n                return(private$fail(\"pattern must be (pattern <pat>) or (pattern <pat> <default>)\"))\n              }\n              next\n            }\n            if (length(item) == 2 && is.symbol(item[[1]])) {\n              next\n            }\n          } else if (is.list(item)) {\n            item_list <- item\n            if (length(item_list) == 0) {\n              return(private$fail(\"defmacro parameters must be symbols, (name default), or (pattern ...)\"))\n            }\n            op_char <- if (is.symbol(item_list[[1]])) as.character(item_list[[1]]) else NULL\n            if (!is.null(op_char) && op_char %in% c(\"pattern\", \"destructure\")) {\n              if (length(item_list) != 2 && length(item_list) != 3) {\n                return(private$fail(\"pattern must be (pattern <pat>) or (pattern <pat> <default>)\"))\n              }\n              next\n            }\n            if (length(item_list) == 2 && is.symbol(item_list[[1]])) {\n              next\n            }\n          }\n          return(private$fail(\"defmacro parameters must be symbols, (name default), or (pattern ...)\"))\n        }\n      }\n      body_exprs <- as.list(expr)[-(1:3)]\n      docstring <- NULL\n      if (length(body_exprs) > 0) {\n        first <- private$strip_src(body_exprs[[1]])\n        if (is.character(first) && length(first) == 1L) {\n          docstring <- first\n          body_exprs <- body_exprs[-1]\n        }\n      }\n      body_quoted <- as.call(list(quote(quote), as.call(c(list(quote(begin)), body_exprs))))\n      docstring_arg <- if (is.null(docstring)) private$compiled_nil() else docstring\n      as.call(list(\n        as.symbol(\".rye_defmacro\"),\n        as.call(list(quote(quote), name)),\n        as.call(list(quote(quote), params_expr)),\n        body_quoted,\n        docstring_arg,\n        as.symbol(self$env_var_name)\n      ))\n    },\n    compile_module = function(expr) {\n      if (length(expr) < 3) {\n        return(private$fail(\"module requires at least 2 arguments: (module name (export ...) body...)\"))\n      }\n      module_name <- expr[[2]]\n      name_str <- if (is.symbol(module_name)) as.character(module_name) else if (is.character(module_name) && length(module_name) == 1L) module_name else NULL\n      if (is.null(name_str)) {\n        return(private$fail(\"module name must be a symbol or string\"))\n      }\n      exports_expr <- expr[[3]]\n      if (!is.call(exports_expr) || length(exports_expr) < 1 || !is.symbol(exports_expr[[1]])) {\n        return(private$fail(\"module requires an export list: (module name (export ...) body...)\"))\n      }\n      export_tag <- as.character(exports_expr[[1]])\n      export_all <- FALSE\n      exports <- character(0)\n      if (identical(export_tag, \"export\")) {\n        if (length(exports_expr) > 1) {\n          for (i in 2:length(exports_expr)) {\n            item <- exports_expr[[i]]\n            if (!is.symbol(item)) {\n              return(private$fail(\"module exports must be symbols\"))\n            }\n            exports <- c(exports, as.character(item))\n          }\n        }\n      } else if (identical(export_tag, \"export-all\")) {\n        if (length(exports_expr) > 1) {\n          return(private$fail(\"export-all does not take any arguments\"))\n        }\n        export_all <- TRUE\n      } else {\n        return(private$fail(\"module requires an export list: (module name (export ...) body...)\"))\n      }\n      body_exprs <- as.list(expr)[-(1:3)]\n      body_exprs <- if (length(body_exprs) == 0) list() else body_exprs\n      src <- private$src_get(expr)\n      src_file <- NULL\n      if (!is.null(src) && !is.null(src$file) && is.character(src$file) && nzchar(src$file) && grepl(\"[/\\\\\\\\]\", src$file)) {\n        src_file <- src$file\n      }\n      compiled_body_quoted <- as.call(list(quote(quote), body_exprs))\n      as.call(list(\n        as.symbol(\".rye_module\"),\n        name_str,\n        exports,\n        export_all,\n        compiled_body_quoted,\n        src_file,\n        as.symbol(self$env_var_name)\n      ))\n    },\n    compile_formula = function(expr) {\n      formula_parts <- list(as.symbol(\"~\"))\n      if (length(expr) > 1) {\n        for (i in 2:length(expr)) {\n          formula_parts <- c(formula_parts, list(expr[[i]]))\n        }\n      }\n      as.call(formula_parts)\n    },\n    compile_package_access = function(expr) {\n      if (length(expr) != 3) {\n        return(private$fail(sprintf(\"%s requires exactly 2 arguments: (%s pkg name)\", as.character(expr[[1]]), as.character(expr[[1]]))))\n      }\n      # Pass package and name as strings so lookup works without namespace in env\n      pkg_str <- if (is.symbol(expr[[2]])) as.character(expr[[2]]) else if (is.character(expr[[2]]) && length(expr[[2]]) == 1L) expr[[2]] else NULL\n      name_str <- if (is.symbol(expr[[3]])) as.character(expr[[3]]) else if (is.character(expr[[3]]) && length(expr[[3]]) == 1L) expr[[3]] else NULL\n      if (is.null(pkg_str)) {\n        return(private$fail(\"Package name must be a symbol or string\"))\n      }\n      if (is.null(name_str)) {\n        return(private$fail(\"Function/object name must be a symbol or string\"))\n      }\n      as.call(list(\n        as.symbol(\".rye_pkg_access\"),\n        as.character(expr[[1]]),\n        pkg_str,\n        name_str,\n        as.symbol(self$env_var_name)\n      ))\n    },\n    compile_application = function(expr) {\n      op <- private$compile_impl(expr[[1]])\n      if (is.null(op)) {\n        return(private$fail(\"attempt to call non-function\"))\n      }\n      # Helper to collect keyword/positional arguments with preallocation\n      collect_args <- function() {\n        # Preallocate: worst case is all positional (expr_len - 1)\n        max_args <- length(expr) - 1\n        args <- vector(\"list\", max_args)\n        arg_names <- character(max_args)\n        arg_idx <- 1\n        i <- 2\n        while (i <= length(expr)) {\n          arg_expr <- expr[[i]]\n          if (inherits(arg_expr, \"rye_keyword\")) {\n            if (i + 1 > length(expr)) {\n              return(private$fail(sprintf(\"Keyword :%s requires a value\", arg_expr)))\n            }\n            keyword_name <- as.character(arg_expr)\n            val <- private$compile_impl(expr[[i + 1]])\n            if (is.null(val)) {\n              return(private$fail(\"argument could not be compiled\"))\n            }\n            args[[arg_idx]] <- val\n            arg_names[arg_idx] <- keyword_name\n            arg_idx <- arg_idx + 1\n            i <- i + 2\n          } else {\n            val <- private$compile_impl(arg_expr)\n            if (is.null(val)) {\n              return(private$fail(\"argument could not be compiled\"))\n            }\n            args[[arg_idx]] <- val\n            arg_names[arg_idx] <- \"\"\n            arg_idx <- arg_idx + 1\n            i <- i + 1\n          }\n        }\n        # Trim to actual size (handle zero-argument case)\n        if (arg_idx == 1) {\n          # No arguments\n          return(list())\n        }\n        args <- args[seq_len(arg_idx - 1)]\n        names(args) <- arg_names[seq_len(arg_idx - 1)]\n        args\n      }\n      if (is.symbol(op)) {\n        op_char <- as.character(op)\n        if (op_char %in% c(\"$\", \"[\", \"[[\")) {\n          args <- collect_args()\n          if (is.null(args)) return(NULL)  # Error occurred\n          return(as.call(list(\n            as.symbol(\".rye_subscript_call\"),\n            op_char,\n            as.call(c(list(quote(list)), args)),\n            as.symbol(self$env_var_name)\n          )))\n        }\n      }\n      args <- collect_args()\n      if (is.null(args)) return(NULL)  # Error occurred\n      as.call(c(list(op), args))\n    }\n  )\n)\n","normpath":"/Users/will/github/rye/R/compiler.R"},{"filename":"/R/source-tracker.R","content":"# SourceTracker: Attaches source locations (file, line, col) to expressions for error\n# reporting. Used by parser and compiled runtime.\n#\n# @field (private) stack List of rye_src for current evaluation context.\n#\n#' @keywords internal\n#' @noRd\nSourceTracker <- R6::R6Class(\n  \"SourceTracker\",\n  private = list(\n    stack = list()\n  ),\n  public = list(\n    # @description Create a rye_src structure for a source location.\n    # @param file File name or NULL.\n    # @param start_line Start line number.\n    # @param start_col Start column number.\n    # @param end_line End line (default start_line).\n    # @param end_col End column (default start_col).\n    # @return Object of class \"rye_src\".\n    src_new = function(file, start_line, start_col, end_line = start_line, end_col = start_col) {\n      structure(\n        list(\n          file = file,\n          start_line = start_line,\n          start_col = start_col,\n          end_line = end_line,\n          end_col = end_col\n        ),\n        class = \"rye_src\"\n      )\n    },\n    # @description Get rye_src attribute from an expression.\n    # @param expr Expression (call, list, etc.).\n    # @return rye_src or NULL.\n    src_get = function(expr) {\n      if (is.null(expr)) {\n        return(NULL)\n      }\n      attr(expr, \"rye_src\", exact = TRUE)\n    },\n    # @description Attach rye_src to an expression.\n    # @param expr Expression to attach to.\n    # @param src rye_src from src_new.\n    # @return expr (invisibly) or expr unchanged if symbol.\n    src_set = function(expr, src) {\n      if (is.null(expr) || is.null(src)) {\n        return(expr)\n      }\n      if (is.symbol(expr)) {\n        return(expr)\n      }\n      attr(expr, \"rye_src\") <- src\n      expr\n    },\n    # @description Copy source from one expression to another if expr has none.\n    # @param expr Expression to possibly attach to.\n    # @param from Expression to take rye_src from.\n    # @return expr.\n    src_inherit = function(expr, from) {\n      src <- self$src_get(from)\n      if (is.null(src)) {\n        return(expr)\n      }\n      if (!is.null(self$src_get(expr))) {\n        return(expr)\n      }\n      self$src_set(expr, src)\n    },\n    # @description Recursively remove rye_src attributes from a value (for returning from eval).\n    # @param value Any value (call, list, etc.).\n    # @return Value with rye_src stripped.\n    strip_src = function(value) {\n      if (is.null(value) || is.symbol(value)) {\n        return(value)\n      }\n\n      if (r6_isinstance(value, \"RyeCons\")) {\n        value$car <- self$strip_src(value$car)\n        value$cdr <- self$strip_src(value$cdr)\n        return(value)\n      }\n\n      has_src_attr <- !is.null(attr(value, \"rye_src\", exact = TRUE))\n\n      if (!is.call(value) && (!is.list(value) || !is.null(attr(value, \"class\", exact = TRUE)))) {\n        if (has_src_attr) {\n          attr(value, \"rye_src\") <- NULL\n        }\n        return(value)\n      }\n\n      if (is.call(value) && !is.null(attr(value, \"class\", exact = TRUE))) {\n        if (has_src_attr) {\n          attr(value, \"rye_src\") <- NULL\n        }\n        return(value)\n      }\n\n      if (!has_src_attr && length(value) == 0) {\n        return(value)\n      }\n\n      if (has_src_attr) {\n        attr(value, \"rye_src\") <- NULL\n      }\n\n      if (is.call(value)) {\n        stripped <- lapply(as.list(value), self$strip_src)\n        return(as.call(stripped))\n      }\n\n      if (is.list(value) && is.null(attr(value, \"class\", exact = TRUE))) {\n        stripped <- lapply(value, self$strip_src)\n        if (!is.null(names(value))) {\n          names(stripped) <- names(value)\n        }\n        return(stripped)\n      }\n\n      value\n    },\n    # @description Return the current source stack (list of rye_src).\n    # @return List.\n    get = function() {\n      private$stack\n    },\n    # @description Clear the source stack.\n    reset = function() {\n      private$stack <- list()\n      invisible(NULL)\n    },\n    # @description Push a rye_src onto the stack (used during eval for error context).\n    # @param src rye_src from src_new.\n    push = function(src) {\n      private$stack <- c(private$stack, list(src))\n      invisible(NULL)\n    },\n    # @description Pop the top rye_src from the stack.\n    # @return The popped rye_src or NULL if empty.\n    pop = function() {\n      if (length(private$stack) == 0) {\n        return(NULL)\n      }\n      last <- private$stack[[length(private$stack)]]\n      private$stack <- private$stack[-length(private$stack)]\n      last\n    },\n    # @description Format a rye_src as \"file:line:col\" or \"file:line:col-line:col\".\n    # @param src rye_src or NULL.\n    # @return Character string or NULL.\n    format_src = function(src) {\n      if (is.null(src)) {\n        return(NULL)\n      }\n      file <- src$file\n      if (is.null(file) || !is.character(file) || length(file) != 1 || !nzchar(file)) {\n        file <- \"<input>\"\n      }\n      start <- paste0(src$start_line, \":\", src$start_col)\n      end <- paste0(src$end_line, \":\", src$end_col)\n      if (identical(start, end)) {\n        return(paste0(file, \":\", start))\n      }\n      paste0(file, \":\", start, \"-\", end)\n    },\n    format_error = function(e, include_r_stack = TRUE) {\n      lines <- c(paste0(\"Error: \", conditionMessage(e)))\n      if (inherits(e, \"rye_error\")) {\n        src_stack <- e$src_stack\n        if (!is.null(src_stack) && length(src_stack) > 0) {\n          loc <- self$format_src(src_stack[[length(src_stack)]])\n          if (!is.null(loc)) {\n            lines <- c(lines, paste0(\"Location: \", loc))\n          }\n          if (length(src_stack) > 1) {\n            lines <- c(lines, \"Rye stack:\")\n            for (src in rev(src_stack)) {\n              loc <- self$format_src(src)\n              if (!is.null(loc)) {\n                lines <- c(lines, paste0(\"  at \", loc))\n              }\n            }\n          }\n        }\n        if (isTRUE(include_r_stack)) {\n          r_stack <- e$r_stack\n          if (!is.null(r_stack) && length(r_stack) > 0) {\n            lines <- c(lines, \"R stack:\")\n            max_frames <- 20\n            calls <- r_stack\n            if (length(calls) > max_frames) {\n              calls <- utils::tail(calls, max_frames)\n            }\n            for (call in rev(calls)) {\n              lines <- c(lines, paste0(\"  \", paste(deparse(call), collapse = \"\")))\n            }\n            if (length(r_stack) > max_frames) {\n              lines <- c(lines, \"  ...\")\n            }\n          }\n        }\n      }\n      paste(lines, collapse = \"\\n\")\n    },\n    print_error = function(e, file = stderr()) {\n      cat(self$format_error(e), \"\\n\", sep = \"\", file = file)\n    },\n    # @description Build a rye_error condition with message and optional Rye/R stack traces.\n    # @param message Error message string.\n    # @param src_stack List of rye_src for Rye stack (default empty).\n    # @param r_stack List of call objects for R stack (default empty).\n    # @return Condition of class rye_error.\n    create_error = function(message, src_stack = list(), r_stack = list()) {\n      structure(\n        list(message = message, src_stack = src_stack, r_stack = r_stack),\n        class = c(\"rye_error\", \"error\", \"condition\")\n      )\n    },\n    # @description Run fn(); on error, augment condition with current stack for location in message.\n    # @param fn Function of no arguments to run.\n    # @return Result of fn().\n    with_error_context = function(fn) {\n      prev_stack <- self$get()\n      on.exit({\n        self$reset()\n        if (!is.null(prev_stack) && length(prev_stack) > 0) {\n          for (src in prev_stack) {\n            self$push(src)\n          }\n        }\n      }, add = TRUE)\n      self$reset()\n      result_with_vis <- tryCatch(\n        withVisible(fn()),\n        error = function(e) {\n          if (inherits(e, \"rye_error\")) {\n            stop(e)\n          }\n          cond <- self$create_error(conditionMessage(e), self$get(), sys.calls())\n          stop(cond)\n        }\n      )\n      # Preserve invisibility\n      if (result_with_vis$visible) {\n        result_with_vis$value\n      } else {\n        invisible(result_with_vis$value)\n      }\n    }\n  )\n)\n","normpath":"/Users/will/github/rye/R/source-tracker.R"},{"filename":"/R/utils.R","content":"#' Test if an object is an R6 instance of a given class\n#'\n#' @param obj Any object.\n#' @param cls Character class name (e.g. \\code{\"RyeCons\"}).\n#' @return Logical.\n#' @keywords internal\n#' @noRd\n#' @importFrom R6 is.R6\nr6_isinstance <- function(obj, cls) {\n  R6::is.R6(obj) && inherits(obj, cls)\n}\n\n#' Test if an object is an R6 class generator for a given class name\n#'\n#' @param obj Any object.\n#' @param cls Character class name (e.g. \\code{\"RyeCons\"}).\n#' @return Logical.\n#' @keywords internal\n#' @noRd\n#' @importFrom R6 is.R6Class\nr6_issubclass <- function(obj, cls) {\n  R6::is.R6Class(obj) && identical(obj$classname, cls)\n}\n\n# Wrapper for unlockBinding to avoid R CMD check NOTE\n# R CMD check flags direct calls to unlockBinding as \"possibly unsafe\"\nrye_unlock_binding <- function(sym, env) {\n  if (bindingIsLocked(sym, env)) {\n    do.call(\"unlockBinding\", list(sym, env))\n  }\n}\n\nrye_resolve_stdlib_path <- function(name) {\n  if (!is.character(name) || length(name) != 1) {\n    return(NULL)\n  }\n  dir_path <- system.file(\"rye\", package = \"rye\")\n  if (identical(dir_path, \"\")) {\n    return(NULL)\n  }\n  candidates <- c(\n    file.path(dir_path, name),\n    file.path(dir_path, paste0(name, \".rye\"))\n  )\n  for (path in candidates) {\n    if (file.exists(path)) {\n      return(path)\n    }\n  }\n  NULL\n}\n\nrye_resolve_module_path <- function(name) {\n  if (!is.character(name) || length(name) != 1) {\n    return(NULL)\n  }\n  has_separator <- grepl(\"[/\\\\\\\\]\", name)\n  if (has_separator) {\n    if (file.exists(name)) {\n      return(name)\n    }\n    return(NULL)\n  }\n  stdlib_path <- rye_resolve_stdlib_path(name)\n  if (!is.null(stdlib_path)) {\n    return(stdlib_path)\n  }\n  candidates <- c(name, paste0(name, \".rye\"))\n  for (candidate in candidates) {\n    if (file.exists(candidate)) {\n      return(candidate)\n    }\n  }\n  NULL\n}\n\n# Path-only resolution: find file at path or path.rye (no stdlib lookup).\n# Used when import argument is a string (path). Returns NULL if not found.\nrye_resolve_path_only <- function(path) {\n  if (!is.character(path) || length(path) != 1) {\n    return(NULL)\n  }\n  if (file.exists(path)) {\n    return(path)\n  }\n  with_ext <- paste0(path, \".rye\")\n  if (file.exists(with_ext)) {\n    return(with_ext)\n  }\n  NULL\n}\n\n# Normalize a file path to absolute form for consistent registry keys.\n# Relative paths are resolved relative to getwd(). Uses forward slashes.\nrye_normalize_path_absolute <- function(path) {\n  if (!is.character(path) || length(path) != 1 || !nzchar(path)) {\n    return(path)\n  }\n  normalized <- tryCatch(\n    normalizePath(path, mustWork = FALSE, winslash = \"/\"),\n    error = function(e) path\n  )\n  if (is.na(normalized) || !nzchar(normalized)) {\n    return(path)\n  }\n  normalized\n}","normpath":"/Users/will/github/rye/R/utils.R"}],"prof_output":"/var/folders/mb/xhtbr_4x1qvgvdqz30bs79pw0000gn/T//Rtmp4NI83n/file1504244c8200.prof","highlight":{"output":["^output\\$"],"gc":["^<GC>$"],"stacktrace":["^\\.\\.stacktraceo(n|ff)\\.\\.$"]},"split":"h"}},"evals":[],"jsHooks":[]}</script>
<script type="application/htmlwidget-sizing" data-for="htmlwidget-89e5514ce0463ba183ca">{"viewer":{"width":450,"height":350,"padding":0,"fill":true},"browser":{"width":960,"height":500,"padding":0,"fill":true}}</script>
</body>
</html>
