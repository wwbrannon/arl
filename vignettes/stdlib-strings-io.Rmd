---
title: "Standard Library: Strings, I/O, and Arithmetic"
output:
  rmarkdown::html_vignette:
    highlight: null
vignette: >
  %\VignetteIndexEntry{Standard Library: Strings, I/O, and Arithmetic}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
```

## String and I/O

### str

Concatenates values into a string.

**Signature:** `(str value...)`

**Examples:**
```lisp
(str "hello" " " "world")  ; => "hello world"
(str "x = " 42)            ; => "x = 42"
(str)                      ; => ""
```

**See also:** string-join, format

---

### string-join

Joins a list of strings with a separator.

**Signature:** `(string-join lst sep)`

**Examples:**
```lisp
(string-join (list "a" "b" "c") "-")  ; => "a-b-c"
(string-join (list "hello" "world") " ")  ; => "hello world"
```

**See also:** string-split, str

---

### string-split

Splits a string by a separator.

**Signature:** `(string-split str sep)`

**Examples:**
```lisp
(string-split "a-b-c" "-")  ; => ["a" "b" "c"]
(string-split "hello world" " ")  ; => ["hello" "world"]
```

**See also:** string-join

---

### trim

Removes leading and trailing whitespace.

**Signature:** `(trim str)`

**Examples:**
```lisp
(trim "  hello  ")  ; => "hello"
(trim "world")      ; => "world"
```

---

### string-contains?

Checks whether a substring occurs in a string.

**Signature:** `(string-contains? str pattern [:fixed #t])`

**Examples:**
```lisp
(string-contains? "hello" "ell")          ; => #t
(string-contains? "hello" "^ell")         ; => #f
(string-contains? "hello" "^he" :fixed #f) ; => #t
```

---

### string-match?

Checks whether a regex pattern matches a string.

**Signature:** `(string-match? str pattern [:fixed #f])`

**Examples:**
```lisp
(string-match? "hello" "^he")           ; => #t
(string-match? "hello" "ELL")           ; => #f
(string-match? "hello" "ELL" :fixed #t) ; => #f
```

---

### string-find

Returns the 0-based index of the first match or `#nil`.

**Signature:** `(string-find str pattern [:fixed #t])`

**Examples:**
```lisp
(string-find "hello" "ll")         ; => 2
(string-find "hello" "nope")       ; => #nil
(string-find "hello" "^he" :fixed #f) ; => 0
```

---

### string-replace

Replaces the first match in a string.

**Signature:** `(string-replace str pattern replacement [:fixed #f])`

**Examples:**
```lisp
(string-replace "hello" "l" "L") ; => "heLlo"
```

---

### string-replace-all

Replaces all matches in a string.

**Signature:** `(string-replace-all str pattern replacement [:fixed #f])`

**Examples:**
```lisp
(string-replace-all "hello" "l" "L") ; => "heLLo"
```

---

### format

Formats a string with values (using R's sprintf).

**Signature:** `(format fmt ...)`

**Examples:**
```lisp
(format "x = %d, y = %d" 10 20)  ; => "x = 10, y = 20"
(format "%.2f" 3.14159)          ; => "3.14"
```

**See also:** str

---

### display

Prints a value (alias: `println`).

**Signature:** `(display value)`

**Examples:**
```lisp
(display "Hello, world!")
(display (+ 1 2))
```

**See also:** println, trace

---

### println

Alias for `display`.

**Signature:** `(println value)`

**See also:** display

---

### read-line

Reads a line from stdin.

**Signature:** `(read-line)`

**Examples:**
```lisp
(define name (read-line))
(println (str "Hello, " name))
```

---

### read-file

Reads an entire file into a single string.

**Signature:** `(read-file path [:encoding enc])`

**Examples:**
```lisp
(read-file "notes.txt")
```

---

### read-lines

Reads a file into a list of lines.

**Signature:** `(read-lines path [:encoding enc])`

**Examples:**
```lisp
(read-lines "notes.txt")
```

---

### write-file

Writes content to a file, replacing any existing contents.

**Signature:** `(write-file path content [:sep s] [:encoding enc])`

**Examples:**
```lisp
(write-file "notes.txt" "hello")
(write-file "notes.txt" (list "a" "b" "c") :sep "\n")
```

---

### write-lines

Writes a list of lines to a file.

**Signature:** `(write-lines path lines [:encoding enc])`

**Examples:**
```lisp
(write-lines "notes.txt" (list "a" "b" "c"))
```

---

### append-file

Appends content to a file.

**Signature:** `(append-file path content [:sep s] [:encoding enc])`

**Examples:**
```lisp
(append-file "notes.txt" (list "more" "lines"))
```

---

### file-exists?

Checks whether a file exists.

**Signature:** `(file-exists? path)`

**Examples:**
```lisp
(file-exists? "notes.txt")
```

---

## Arithmetic and Comparison

### %

Modulo operation.

**Signature:** `(% a b)`

**Examples:**
```lisp
(% 10 3)   ; => 1
(% 17 5)   ; => 2
```

---

### =

Equality test.

**Signature:** `(= a b)`

**Examples:**
```lisp
(= 1 1)           ; => #t
(= "a" "a")       ; => #t
(= 1 2)           ; => #f
```

**Note:** All other R arithmetic operators (`+`, `-`, `*`, `/`, `<`, `>`, etc.) are available directly.
