% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rye-engine.R
\name{RyeEngine}
\alias{RyeEngine}
\title{Core Rye engine}
\description{
Core Rye engine

Core Rye engine
}
\details{
Provides class-based organization for tokenization, parsing, macro expansion,
evaluation, and environment management.
}
\examples{
engine <- RyeEngine$new()
engine$eval_text("(+ 1 2 3)")
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{tokenizer}}{Tokenizer instance used to lex source text.}

\item{\code{parser}}{Parser instance used to read expressions.}

\item{\code{macro_expander}}{Macro expander for Rye macros.}

\item{\code{evaluator}}{Evaluator used for expression execution.}

\item{\code{help_system}}{Help system for Rye topics.}

\item{\code{env}}{RyeEnv backing the engine.}

\item{\code{source_tracker}}{Source tracker used for error context.}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-RyeEngine-new}{\code{RyeEngine$new()}}
\item \href{#method-RyeEngine-read}{\code{RyeEngine$read()}}
\item \href{#method-RyeEngine-tokenize}{\code{RyeEngine$tokenize()}}
\item \href{#method-RyeEngine-parse}{\code{RyeEngine$parse()}}
\item \href{#method-RyeEngine-eval}{\code{RyeEngine$eval()}}
\item \href{#method-RyeEngine-eval_in_env}{\code{RyeEngine$eval_in_env()}}
\item \href{#method-RyeEngine-eval_seq}{\code{RyeEngine$eval_seq()}}
\item \href{#method-RyeEngine-eval_seq_in_env}{\code{RyeEngine$eval_seq_in_env()}}
\item \href{#method-RyeEngine-eval_exprs}{\code{RyeEngine$eval_exprs()}}
\item \href{#method-RyeEngine-eval_exprs_in_env}{\code{RyeEngine$eval_exprs_in_env()}}
\item \href{#method-RyeEngine-eval_text}{\code{RyeEngine$eval_text()}}
\item \href{#method-RyeEngine-eval_text_in_env}{\code{RyeEngine$eval_text_in_env()}}
\item \href{#method-RyeEngine-initialize_environment}{\code{RyeEngine$initialize_environment()}}
\item \href{#method-RyeEngine-load_file}{\code{RyeEngine$load_file()}}
\item \href{#method-RyeEngine-load_file_in_env}{\code{RyeEngine$load_file_in_env()}}
\item \href{#method-RyeEngine-macroexpand}{\code{RyeEngine$macroexpand()}}
\item \href{#method-RyeEngine-macroexpand_in_env}{\code{RyeEngine$macroexpand_in_env()}}
\item \href{#method-RyeEngine-macroexpand_1}{\code{RyeEngine$macroexpand_1()}}
\item \href{#method-RyeEngine-macroexpand_1_in_env}{\code{RyeEngine$macroexpand_1_in_env()}}
\item \href{#method-RyeEngine-help}{\code{RyeEngine$help()}}
\item \href{#method-RyeEngine-help_in_env}{\code{RyeEngine$help_in_env()}}
\item \href{#method-RyeEngine-repl}{\code{RyeEngine$repl()}}
\item \href{#method-RyeEngine-clone}{\code{RyeEngine$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-new"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-new}{}}}
\subsection{Method \code{new()}}{
Initialize engine components and base environment.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$new(env = NULL, parent = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{env}}{Optional existing environment to use. If NULL, creates a new environment.}

\item{\code{parent}}{Optional parent environment for the new environment. Only used if env is NULL.
Defaults to baseenv(). Cannot be specified together with env.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-read"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-read}{}}}
\subsection{Method \code{read()}}{
Tokenize and parse source into expressions.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$read(source, source_name = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{source}}{Character string containing Rye source.}

\item{\code{source_name}}{Optional source name for error reporting.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-tokenize"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-tokenize}{}}}
\subsection{Method \code{tokenize()}}{
Tokenize source into Rye tokens.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$tokenize(source)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{source}}{Character string containing Rye source.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-parse"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-parse}{}}}
\subsection{Method \code{parse()}}{
Parse tokens into expressions.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$parse(tokens, source_name = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{tokens}}{Token list produced by the tokenizer.}

\item{\code{source_name}}{Optional source name for error reporting.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-eval"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-eval}{}}}
\subsection{Method \code{eval()}}{
Evaluate a single expression.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$eval(expr)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{expr}}{Rye expression (symbol/call/atomic value).}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-eval_in_env"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-eval_in_env}{}}}
\subsection{Method \code{eval_in_env()}}{
Evaluate a single expression in an explicit environment.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$eval_in_env(expr, env)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{expr}}{Rye expression (symbol/call/atomic value).}

\item{\code{env}}{Optional environment or RyeEnv used as the engine base.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-eval_seq"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-eval_seq}{}}}
\subsection{Method \code{eval_seq()}}{
Evaluate expressions in order.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$eval_seq(exprs)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{exprs}}{List of Rye expressions to evaluate.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-eval_seq_in_env"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-eval_seq_in_env}{}}}
\subsection{Method \code{eval_seq_in_env()}}{
Evaluate expressions in order in an explicit environment.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$eval_seq_in_env(exprs, env)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{exprs}}{List of Rye expressions to evaluate.}

\item{\code{env}}{Optional environment or RyeEnv used as the engine base.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-eval_exprs"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-eval_exprs}{}}}
\subsection{Method \code{eval_exprs()}}{
Evaluate expressions with source tracking.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$eval_exprs(exprs)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{exprs}}{List of Rye expressions to evaluate.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-eval_exprs_in_env"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-eval_exprs_in_env}{}}}
\subsection{Method \code{eval_exprs_in_env()}}{
Evaluate expressions with source tracking in an explicit environment.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$eval_exprs_in_env(exprs, env)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{exprs}}{List of Rye expressions to evaluate.}

\item{\code{env}}{Optional environment or RyeEnv used as the engine base.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-eval_text"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-eval_text}{}}}
\subsection{Method \code{eval_text()}}{
Read and evaluate text.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$eval_text(text, source_name = "<eval>")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{text}}{Character string of Rye code to read/eval.}

\item{\code{source_name}}{Optional source name for error reporting.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-eval_text_in_env"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-eval_text_in_env}{}}}
\subsection{Method \code{eval_text_in_env()}}{
Read and evaluate text in an explicit environment.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$eval_text_in_env(text, env, source_name = "<eval>")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{text}}{Character string of Rye code to read/eval.}

\item{\code{env}}{Optional environment or RyeEnv used as the engine base.}

\item{\code{source_name}}{Optional source name for error reporting.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-initialize_environment"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-initialize_environment}{}}}
\subsection{Method \code{initialize_environment()}}{
Populate standard bindings
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$initialize_environment()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-load_file"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-load_file}{}}}
\subsection{Method \code{load_file()}}{
Load and evaluate a Rye source file in an isolated scope. The file runs in a
child of the engine's environment, so definitions and imports in the file
are not visible in the engine's main environment or to subsequent code. For
source-like behavior (definitions visible in the engine), use
\code{load_file_in_env(path, env, create_scope = FALSE)}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$load_file(path)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{path}}{File path to load.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-load_file_in_env"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-load_file_in_env}{}}}
\subsection{Method \code{load_file_in_env()}}{
Load and evaluate a Rye source file in an explicit environment. By default
(\code{create_scope = FALSE}) the file is evaluated in \code{env}, so definitions
and imports in the file are visible in that environment. With
\code{create_scope = TRUE}, the file runs in a child of \code{env} and its
definitions are not visible in \code{env}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$load_file_in_env(path, env, create_scope = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{path}}{File path to load.}

\item{\code{env}}{Optional environment or RyeEnv used as the engine base.}

\item{\code{create_scope}}{If TRUE, evaluate in a new child of \code{env}; if FALSE, in \code{env}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-macroexpand"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-macroexpand}{}}}
\subsection{Method \code{macroexpand()}}{
Expand macros recursively.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$macroexpand(expr, preserve_src = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{expr}}{Rye expression (symbol/call/atomic value).}

\item{\code{preserve_src}}{Logical; keep source metadata when macroexpanding.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-macroexpand_in_env"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-macroexpand_in_env}{}}}
\subsection{Method \code{macroexpand_in_env()}}{
Expand macros recursively in an explicit environment.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$macroexpand_in_env(expr, env, preserve_src = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{expr}}{Rye expression (symbol/call/atomic value).}

\item{\code{env}}{Optional environment or RyeEnv used as the engine base.}

\item{\code{preserve_src}}{Logical; keep source metadata when macroexpanding.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-macroexpand_1"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-macroexpand_1}{}}}
\subsection{Method \code{macroexpand_1()}}{
Expand a single macro layer.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$macroexpand_1(expr, preserve_src = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{expr}}{Rye expression (symbol/call/atomic value).}

\item{\code{preserve_src}}{Logical; keep source metadata when macroexpanding.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-macroexpand_1_in_env"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-macroexpand_1_in_env}{}}}
\subsection{Method \code{macroexpand_1_in_env()}}{
Expand a single macro layer in an explicit environment.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$macroexpand_1_in_env(expr, env, preserve_src = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{expr}}{Rye expression (symbol/call/atomic value).}

\item{\code{env}}{Optional environment or RyeEnv used as the engine base.}

\item{\code{preserve_src}}{Logical; keep source metadata when macroexpanding.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-help"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-help}{}}}
\subsection{Method \code{help()}}{
Show help for a topic.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$help(topic)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{topic}}{Help topic as a single string.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-help_in_env"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-help_in_env}{}}}
\subsection{Method \code{help_in_env()}}{
Show help for a topic in an explicit environment.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$help_in_env(topic, env)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{topic}}{Help topic as a single string.}

\item{\code{env}}{Optional environment or RyeEnv used as the engine base.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-repl"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-repl}{}}}
\subsection{Method \code{repl()}}{
Start the Rye REPL using this engine.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$repl()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-RyeEngine-clone"></a>}}
\if{latex}{\out{\hypertarget{method-RyeEngine-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{RyeEngine$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
