;; Tests for extended math operations (Phase 1)
;; These tests define the expected behavior BEFORE implementation

;; ============================================================================
;; Rounding and Truncation Functions
;; ============================================================================

(define test-abs-positive (lambda ()
  (assert-equal (abs 5) 5)))

(define test-abs-negative (lambda ()
  (assert-equal (abs -5) 5)))

(define test-abs-zero (lambda ()
  (assert-equal (abs 0) 0)))

(define test-floor-positive (lambda ()
  (assert-equal (floor 3.7) 3)))

(define test-floor-negative (lambda ()
  (assert-equal (floor -3.7) -4)))

(define test-floor-integer (lambda ()
  (assert-equal (floor 5) 5)))

(define test-ceiling-positive (lambda ()
  (assert-equal (ceiling 3.2) 4)))

(define test-ceiling-negative (lambda ()
  (assert-equal (ceiling -3.2) -3)))

(define test-ceiling-integer (lambda ()
  (assert-equal (ceiling 5) 5)))

(define test-truncate-positive (lambda ()
  (assert-equal (truncate 3.7) 3)))

(define test-truncate-negative (lambda ()
  (assert-equal (truncate -3.7) -3)))

(define test-truncate-integer (lambda ()
  (assert-equal (truncate 5) 5)))

(define test-round-half (lambda ()
  (assert-equal (round 3.5) 4)))

(define test-round-with-digits (lambda ()
  (assert-equal (round 3.14159 2) 3.14)))

(define test-round-default (lambda ()
  (assert-equal (round 3.7) 4)))

(define test-signum-positive (lambda ()
  (assert-equal (signum 5) 1)))

(define test-signum-negative (lambda ()
  (assert-equal (signum -5) -1)))

(define test-signum-zero (lambda ()
  (assert-equal (signum 0) 0)))

;; ============================================================================
;; Power and Roots
;; ============================================================================

(define test-sqrt-perfect-square (lambda ()
  (assert-equal (sqrt 4) 2)))

(define test-sqrt-nine (lambda ()
  (assert-equal (sqrt 9) 3)))

(define test-sqrt-one (lambda ()
  (assert-equal (sqrt 1) 1)))

(define test-expt-basic (lambda ()
  (assert-equal (expt 2 10) 1024)))

(define test-expt-cube (lambda ()
  (assert-equal (expt 3 3) 27)))

(define test-expt-zero-power (lambda ()
  (assert-equal (expt 5 0) 1)))

(define test-expt-negative-power (lambda ()
  (assert-equal (expt 2 -1) 0.5)))

;; ============================================================================
;; Logarithmic and Exponential
;; ============================================================================

(define test-log-exp-inverse (lambda ()
  (define x 10)
  (define result (exp (log x)))
  (assert-true (< (abs (- result x)) 0.001))))

(define test-log10-hundred (lambda ()
  (assert-equal (log10 100) 2)))

(define test-log10-thousand (lambda ()
  (assert-equal (log10 1000) 3)))

(define test-log2-eight (lambda ()
  (assert-equal (log2 8) 3)))

(define test-log2-1024 (lambda ()
  (assert-equal (log2 1024) 10)))

(define test-logb-with-base (lambda ()
  ;; log base 2 of 8 should be 3
  (assert-equal (logb 8 2) 3)))

(define test-exp-zero (lambda ()
  (assert-equal (exp 0) 1)))

;; ============================================================================
;; Trigonometric Functions
;; ============================================================================

(define test-sin-zero (lambda ()
  (assert-true (< (abs (sin 0)) 0.001))))

(define test-sin-pi-half (lambda ()
  (define pi-half (/ 3.141592653589793 2))
  (assert-true (< (abs (- (sin pi-half) 1)) 0.001))))

(define test-cos-zero (lambda ()
  (assert-true (< (abs (- (cos 0) 1)) 0.001))))

(define test-tan-zero (lambda ()
  (assert-true (< (abs (tan 0)) 0.001))))

(define test-asin-one (lambda ()
  (define result (asin 1))
  (define pi-half (/ 3.141592653589793 2))
  (assert-true (< (abs (- result pi-half)) 0.001))))

(define test-acos-one (lambda ()
  (assert-true (< (abs (acos 1)) 0.001))))

(define test-atan-zero (lambda ()
  (assert-true (< (abs (atan 0)) 0.001))))

(define test-atan2-quadrants (lambda ()
  ;; atan2(1, 1) should be pi/4
  (define result (atan2 1 1))
  (define pi-quarter (/ 3.141592653589793 4))
  (assert-true (< (abs (- result pi-quarter)) 0.001))))

;; ============================================================================
;; Integer Division
;; ============================================================================

(define test-quotient-positive (lambda ()
  (assert-equal (quotient 17 5) 3)))

(define test-quotient-negative-numerator (lambda ()
  (assert-equal (quotient -17 5) -3)))

(define test-quotient-both-negative (lambda ()
  (assert-equal (quotient -17 -5) 3)))

(define test-remainder-positive (lambda ()
  (assert-equal (remainder 17 5) 2)))

(define test-remainder-negative-numerator (lambda ()
  (assert-equal (remainder -17 5) -2)))

(define test-modulo-positive (lambda ()
  (assert-equal (modulo 17 5) 2)))

(define test-modulo-negative-numerator (lambda ()
  (assert-equal (modulo -17 5) 3)))

(define test-quotient-remainder-identity (lambda ()
  ;; For any x, y: x = y * quotient(x,y) + remainder(x,y)
  (define x 17)
  (define y 5)
  (assert-equal x (+ (* y (quotient x y)) (remainder x y)))))

;; ============================================================================
;; Number Theory
;; ============================================================================

(define test-gcd-two-numbers (lambda ()
  (assert-equal (gcd 48 18) 6)))

(define test-gcd-coprime (lambda ()
  (assert-equal (gcd 100 35) 5)))

(define test-gcd-one-arg (lambda ()
  (assert-equal (gcd 42) 42)))

(define test-gcd-multiple-args (lambda ()
  (assert-equal (gcd 48 18 12) 6)))

(define test-lcm-basic (lambda ()
  (assert-equal (lcm 12 18) 36)))

(define test-lcm-coprime (lambda ()
  (assert-equal (lcm 7 11) 77)))

(define test-lcm-one-arg (lambda ()
  (assert-equal (lcm 15) 15)))

(define test-lcm-multiple-args (lambda ()
  (assert-equal (lcm 4 6 8) 24)))

(define test-gcd-lcm-identity (lambda ()
  ;; For any a, b: gcd(a,b) * lcm(a,b) = a * b
  (define a 12)
  (define b 18)
  (assert-equal (* (gcd a b) (lcm a b)) (* a b))))
